<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=ja class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=/ja/documentation/legacy/><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>レガシー | Selenium</title><meta name=description content="このセクションでは、Seleniumのレガシーコンポーネントに関連するすべてのドキュメントを見つけることができます。 これは、非推奨コンポーネントを使用する動機としてではなく、純粋に歴史的な理由で保持されることを意図しています。
"><meta property="og:title" content="レガシー"><meta property="og:description" content="このセクションでは、Seleniumのレガシーコンポーネントに関連するすべてのドキュメントを見つけることができます。 これは、非推奨コンポーネントを使用する動機としてではなく、純粋に歴史的な理由で保持されることを意図しています。
"><meta property="og:type" content="website"><meta property="og:url" content="/ja/documentation/legacy/"><meta property="og:image" content="/images/selenium_4_logo.png"><meta property="og:site_name" content="Selenium"><meta itemprop=name content="レガシー"><meta itemprop=description content="このセクションでは、Seleniumのレガシーコンポーネントに関連するすべてのドキュメントを見つけることができます。 これは、非推奨コンポーネントを使用する動機としてではなく、純粋に歴史的な理由で保持されることを意図しています。
"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/images/selenium_4_logo.png"><meta name=twitter:title content="レガシー"><meta name=twitter:description content="このセクションでは、Seleniumのレガシーコンポーネントに関連するすべてのドキュメントを見つけることができます。 これは、非推奨コンポーネントを使用する動機としてではなく、純粋に歴史的な理由で保持されることを意図しています。
"><link rel=preload href=/scss/main.min.d5ac5f1b576decba108e173dbaf5f52b13fe0b921a41be4ff4e2748ecd784ef1.css as=style><link href=/scss/main.min.d5ac5f1b576decba108e173dbaf5f52b13fe0b921a41be4ff4e2748ecd784ef1.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script>
<link rel=stylesheet href=/css/prism.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.5.2 integrity="sha512-TW5eKlwwg7OfQUVBqxjp94/uqtjJJbhkRE3++XGEQjAL1n3y//QVqS3acPkwqkzInaFRtj+w05uyxDbfDXiI1A==" crossorigin=anonymous><script defer data-domain=selenium.dev src=https://plausible.io/js/plausible.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand-lg navbar-light bg-white flex-row td-navbar"><a class=navbar-brand href=/ja/><span class=navbar-logo><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 139.38 34"><defs><style>.cls-1{fill:#43b02a}</style></defs><title>Selenium logo green</title><path class="cls-1" d="M46.2 26.37a18.85 18.85.0 01-2.57-.2 25 25 0 01-2.74-.53v-1.39a25.31 25.31.0 002.71.53 18 18 0 002.5.2 5.51 5.51.0 003.29-.84 2.79 2.79.0 001.14-2.39 2.85 2.85.0 00-1.24-2.49A6 6 0 0048 18.55q-.78-.29-1.67-.55A15.93 15.93.0 0144 17.13a5.92 5.92.0 01-1.58-1.05 3.6 3.6.0 01-.9-1.34A5 5 0 0141.23 13a4.46 4.46.0 01.41-1.93 4.31 4.31.0 011.17-1.5 5.26 5.26.0 011.82-1A8 8 0 0147 8.28a20.51 20.51.0 014.41.57v1.42a20 20 0 00-2.23-.44 15.2 15.2.0 00-2-.15 4.86 4.86.0 00-3.08.9A2.9 2.9.0 0042.88 13a3.25 3.25.0 00.21 1.21 2.61 2.61.0 00.7 1 4.83 4.83.0 001.27.79 14.31 14.31.0 002 .68q1.11.33 2.06.71a6.21 6.21.0 011.65.94 4.09 4.09.0 011.1 1.38 4.54 4.54.0 01.4 2 4.15 4.15.0 01-1.56 3.48A7.16 7.16.0 0146.2 26.37z"/><path class="cls-1" d="M60.62 26.32a5.46 5.46.0 01-4.28-1.62A6.9 6.9.0 0154.88 20a7.8 7.8.0 011.43-5 5 5 0 014.14-1.75 4.24 4.24.0 013.47 1.43A6.48 6.48.0 0165.1 18.8q0 .54.0.92a3.22 3.22.0 01-.09.64H56.44a5.39 5.39.0 001.17 3.5A4.18 4.18.0 0060.8 25a10.52 10.52.0 001.82-.17 11.77 11.77.0 001.93-.52l.12 1.27a10.68 10.68.0 01-2 .55A11.47 11.47.0 0160.62 26.32zM60.4 14.43q-3.68.0-3.94 4.74h7.15a6.49 6.49.0 00-.78-3.63A2.76 2.76.0 0060.4 14.43z"/><path class="cls-1" d="M68.64 7h1.58V26.11H68.64z"/><path class="cls-1" d="M79.56 26.32a5.46 5.46.0 01-4.28-1.62A6.9 6.9.0 0173.83 20a7.8 7.8.0 011.43-5 5 5 0 014.14-1.75 4.24 4.24.0 013.47 1.43A6.48 6.48.0 0184 18.8q0 .54.0.92a3.22 3.22.0 01-.09.64H75.38a5.4 5.4.0 001.17 3.5A4.18 4.18.0 0079.75 25a10.52 10.52.0 001.82-.17 11.8 11.8.0 001.93-.52l.12 1.27a10.68 10.68.0 01-2 .55A11.47 11.47.0 0179.56 26.32zm-.21-11.89q-3.68.0-3.94 4.74h7.15a6.49 6.49.0 00-.78-3.63A2.76 2.76.0 0079.35 14.43z"/><path class="cls-1" d="M87.51 13.37h1.32l.12 1.49h.12q.94-.45 1.72-.78t1.43-.54a8.42 8.42.0 011.2-.31 6.54 6.54.0 011.1-.09A3.3 3.3.0 0197 14a3.63 3.63.0 01.83 2.63v9.51H96.24v-9a3 3 0 00-.55-2 2.18 2.18.0 00-1.69-.6 7.25 7.25.0 00-2.24.41 20.1 20.1.0 00-2.67 1.12v10H87.51z"/><path class="cls-1" d="M102.75 10.52a.93.93.0 01-1.06-1 1.06 1.06.0 012.12.0.93.93.0 01-1.06 1zm-.8 2.85h1.58V26.11h-1.58z"/><path class="cls-1" d="M110.81 26.34q-3.14.0-3.14-3.47v-9.5h1.58v9a3.16 3.16.0 00.48 2 1.92 1.92.0 001.59.6 6.83 6.83.0 002.48-.48q1.25-.48 2.59-1.14V13.37H118V26.11h-1.32l-.12-1.58h-.09l-1.73.81q-.74.34-1.38.57a7.9 7.9.0 01-1.23.33A7.34 7.34.0 01110.81 26.34z"/><path class="cls-1" d="M122.18 13.37h1.3l.14 1.49h.09a19.53 19.53.0 012.58-1.31 5.51 5.51.0 012-.41 2.83 2.83.0 013 1.77h.12q.8-.5 1.45-.83a12.61 12.61.0 011.2-.54 6.17 6.17.0 011-.31 5.18 5.18.0 011-.09 3.3 3.3.0 012.45.84 3.63 3.63.0 01.83 2.63v9.51h-1.56v-9a2.9 2.9.0 00-.55-2 2.21 2.21.0 00-1.69-.59 5.14 5.14.0 00-1.78.38A14.45 14.45.0 00131.6 16v10.1H130v-9a2.9 2.9.0 00-.55-2 2.21 2.21.0 00-1.69-.59 5.24 5.24.0 00-1.86.4A14 14 0 00123.76 16V26.11h-1.58z"/><path class="cls-1" d="M21.45 21.51a2.49 2.49.0 00-2.55 2.21.08.08.0 00.08.1h4.95a.08.08.0 00.08-.09 2.41 2.41.0 00-2.56-2.22z"/><path class="cls-1" d="M32.06 4.91 21.56 16.7a.32.32.0 01-.47.0l-5.36-5.53a.32.32.0 010-.4L17.5 8.5a.32.32.0 01.52.0l3 3.32a.32.32.0 00.49.0L29.87.36A.23.23.0 0029.69.0H.25A.25.25.0 000 .25v33.5A.25.25.0 00.25 34h32a.25.25.0 00.25-.25V5.06A.23.23.0 0032.06 4.91zm-23 25.36a8.08 8.08.0 01-5.74-2 .31.31.0 010-.41l1.25-1.75A.31.31.0 015 26a6.15 6.15.0 004.2 1.64c1.64.0 2.44-.76 2.44-1.56.0-2.48-8.08-.78-8.08-6.06.0-2.33 2-4.27 5.32-4.27a7.88 7.88.0 015.25 1.76.31.31.0 010 .43L12.9 19.65a.31.31.0 01-.45.05 6.08 6.08.0 00-3.84-1.32c-1.28.0-2 .57-2 1.41.0 2.23 8.06.74 8.06 6C14.67 28.33 12.84 30.27 9.05 30.27zM26.68 25.4a.27.27.0 01-.28.28H19a.09.09.0 00-.08.1 2.81 2.81.0 003 2.32 4.62 4.62.0 002.56-.84.27.27.0 01.4.06l.9 1.31a.28.28.0 01-.06.37 6.67 6.67.0 01-4.1 1.28 5.28 5.28.0 01-5.57-5.48 5.31 5.31.0 015.4-5.46c3.11.0 5.22 2.33 5.22 5.74z"/></svg></span></a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=main_navbar><ul class="navbar-nav mr-4 mb-2 mb-lg-0 ps-4 ps-lg-2"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/ja/about>About Selenium</a>
<a class=dropdown-item href=/ja/project>Structure and Governance</a>
<a class=dropdown-item href=/ja/events>Events</a>
<a class=dropdown-item href=/ja/ecosystem>Ecosystem</a>
<a class=dropdown-item href=/ja/history>History</a>
<a class=dropdown-item href=/ja/getinvolved>Get Involved</a>
<a class=dropdown-item href=/ja/sponsors>Sponsors</a>
<a class=dropdown-item href=/ja/sponsor>Sponsor Us</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/ja/downloads><span>Downloads</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/ja/documentation><span>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/ja/projects><span>Projects</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/ja/support><span>Support</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/ja/blog><span>Blog</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>日本語</a><ul class=dropdown-menu><li><a class=dropdown-item href=/documentation/legacy/>English</a></li><li><a class=dropdown-item href=/pt-br/documentation/legacy/>Português (Brasileiro)</a></li><li><a class=dropdown-item href=/zh-cn/documentation/legacy/>中文简体</a></li></ul></div></li></ul><div class=navbar-nav><div class=td-search><div class=td-search--algolia id=docsearch-1></div></div></div></div></nav><section id=announcement-banner class="alert-static g-0 row -bg-selenium-blue"><div class="container g-0" style=padding:10px><div class="row g-0 justify-content-center"><div class="alert alert-selenium-blue col-12 fade show mb-0 p-0 -bg-selenium-blue" role=alert><h4 class="alert-heading text-center m-0">WebDriver BiDi is the future of cross-browser automation.
<a href=https://developer.chrome.com/blog/webdriver-bidi target=_blank aria-pressed=true>Read all about it!</a></h4></div></div></div></section></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>これは、このセクションの複数ページの印刷可能なビューです。
<a href=# onclick="return print(),!1">印刷するには、ここをクリックしてください</a>.</p><p><a href=/ja/documentation/legacy/>このページの通常のビューに戻る</a>.</p></div><h1 class=title>レガシー</h1><div class=lead>このセクションでは、Seleniumのレガシーコンポーネントに関連するすべてのドキュメントを見つけることができます。 これは、非推奨コンポーネントを使用する動機としてではなく、純粋に歴史的な理由で保持されることを意図しています。</div><ul><li>1: <a href=#pg-e110624c2173a008ef22f9868f67af24>Selenium RC (Selenium 1)</a></li><li>2: <a href=#pg-ede019ded97a1a192cb78af69ca6d9e0>Selenium 2</a></li><ul><li>2.1: <a href=#pg-a933946e45b79ed277508ff2adf95523>RCからWebDriverへの移行</a></li><li>2.2: <a href=#pg-3cf3554f61b84dbd1b188df5fe81a963>リモートWebDriverサーバー</a></li></ul><li>3: <a href=#pg-eb898089792ca95955a3e178c30668c5>Selenium 3</a></li><ul><li>3.1: <a href=#pg-7de6b958ae01ee49598af67bc8beb54b>Grid 3</a></li><li>3.2: <a href=#pg-b440ee8870fc93b6895529a575702cfd>独自のグリッドを設定する</a></li><li>3.3: <a href=#pg-f6b04bbdc688aa2cc42afbe78c4d549d>グリッドのコンポーネント</a></li></ul><li>4: <a href=#pg-0e6ac56fecd03a41b9fe9f76020a6bfe>レガシー Selenium IDE</a></li><ul><li>4.1: <a href=#pg-83d0a8171b15b9b98fe401350fa5a31d>HTMLランナー</a></li></ul></ul><div class=content><div class="pageinfo pageinfo-warning"><p class=lead><i class="fas fa-language d-4"></i>
Most of the documentation found in this section is still in English.
Please note we are not accepting pull requests to translate this content
as translating documentation of legacy components does not add value to
the community nor the project.</p></div></div></div><div class=td-content><h1 id=pg-e110624c2173a008ef22f9868f67af24>1 - Selenium RC (Selenium 1)</h1><div class=lead>The original version of Selenium</div><h2 id=紹介>紹介</h2><p>Selenium RCは長い間メインのSeleniumプロジェクトでしたが、WebDriver/Seleniumを併合したより強力なツールであるSelenium 2が登場しました。
Selenium 1はもうサポートされていないことを強調する価値があります。</p><h2 id=selenium-rcの仕組み>Selenium RCの仕組み</h2><p>はじめに、Selenium RCのコンポーネントがどのように動作するか、およびテストスクリプトの実行でそれぞれが果たす役割について説明します。</p><h3 id=rcコンポーネント>RCコンポーネント</h3><p>SeleniumRCコンポーネントは、以下のとおりです。</p><ul><li>ブラウザを起動および終了し、テストプログラムから渡されたSeleneseコマンドを解釈および実行し、ブラウザとAUTの間で渡されるHTTPメッセージをインターセプトおよび検証するSeleniumサーバー</li><li>各プログラミング言語とSelenium RC Server間のインターフェイスを提供するクライアントライブラリ</li></ul><p>これは簡略化されたアーキテクチャ図です。</p><p><img src=/images/documentation/legacy/selenium_rc_architecture_diagram_simple.png alt=簡略化されたアーキテクチャ図></p><p>この図は、クライアントライブラリが実行される各Seleniumコマンドを渡すサーバーと通信することを示しています。
次に、サーバーはSelenium-Core JavaScriptコマンドを使用してSeleniumコマンドをブラウザーに渡します。
ブラウザは、JavaScriptインタープリターを使用して、Seleniumコマンドを実行します。
これにより、テストスクリプトで指定したSeleneseアクションまたは検証が実行されます。</p><h3 id=seleniumサーバー>Seleniumサーバー</h3><p>Seleniumサーバーは、テストプログラムからSeleniumコマンドを受信して解釈し、それらのテストの実行結果をプログラムに報告します。</p><p>RCサーバーはSelenium Coreをバンドルし、ブラウザーに自動的に挿入します。
これは、テストプログラムがブラウザを開いたときに発生します（クライアントライブラリのAPI関数を使用）。
Selenium-CoreはJavaScriptプログラムです。
実際には、ブラウザの組み込みJavaScriptインタープリターを使用してSeleneseコマンドを解釈および実行するJavaScript関数のセットです。</p><p>サーバーは、単純なHTTP GET/POSTリクエストを使用して、テストプログラムからSeleneseコマンドを受け取ります。
これは、HTTPリクエストを送信できるプログラミング言語を使用して、ブラウザーでのSeleniumテストを自動化できることを意味します。</p><h3 id=クライアントライブラリ>クライアントライブラリ</h3><p>クライアントライブラリは、独自の設計のプログラムからSeleniumコマンドを実行できるプログラミングサポートを提供します。
サポートされる言語ごとに異なるクライアントライブラリがあります。
Seleniumクライアントライブラリは、プログラミングインターフェイス（API）、つまり、独自のプログラムからSeleniumコマンドを実行する一連の関数を提供します。
各インターフェイス内には、各Seleneseコマンドをサポートするプログラミング関数があります。</p><p>クライアントライブラリは、Seleneseコマンドを受け取り、それをSeleniumサーバーに渡して、特定のアクションまたはテスト対象アプリケーション（AUT）に対するテストを処理します。
クライアントライブラリは、そのコマンドの結果も受け取り、プログラムに返します。
プログラムは結果を受け取ってプログラム変数に保存し、成功または失敗として報告するか、予期しないエラーの場合は修正アクションを実行できます。</p><p>したがって、テストプログラムを作成するには、クライアントライブラリAPIを使用して一連のSeleniumコマンドを実行するプログラムを作成するだけです。
また、オプションで、Selenium-IDEでSeleneseテストスクリプトを既に作成している場合は、Selenium RCコードを生成できます。
Selenium-IDEは、（エクスポートメニュー項目を使用して）SeleniumコマンドをクライアントドライバーのAPI関数呼び出しに変換できます。
Selenium-IDEからRCコードをエクスポートする詳細については、Selenium-IDEの章を参照してください。</p><h2 id=インストール>インストール</h2><p>インストールというのは、Seleniumの誤った呼び名です。
Seleniumには、選択したプログラミング言語で利用可能な一連のライブラリがあります。
<a href=https://selenium.dev/downloads/>ダウンロードページ</a>からダウンロードできます。</p><p>使用する言語を選択したら、次のことを行う必要があります。</p><ul><li>Selenium RCサーバーをインストールします。</li><li>言語固有のクライアントドライバーを使用してプログラミングプロジェクトをセットアップします。</li></ul><h3 id=seleniumサーバーのインストール>Seleniumサーバーのインストール</h3><p>Selenium RCサーバーは単なるJava jarファイル（selenium-server-standalone-&lt;version-number>.jar）であり、特別なインストールは不要です。
zipファイルをダウンロードして、目的のディレクトリにサーバーを展開するだけで十分です。</p><h3 id=seleniumサーバーを実行する>Seleniumサーバーを実行する</h3><p>テストを開始する前に、サーバーを起動する必要があります。
Selenium RCのサーバーがあるディレクトリに移動し、コマンドラインコンソールから次を実行します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>    java -jar selenium-server-standalone-&lt;version-number&gt;.jar
</span></span></code></pre></div><p>これは、上記のコマンドを含むバッチまたはシェル実行可能ファイル（Windowsでは.bat、Linuxでは.sh）を作成することで簡素化できます。
次に、デスクトップ上でその実行可能ファイルへのショートカットを作成し、アイコンをダブルクリックしてサーバーを起動します。</p><p>サーバーを実行するには、Javaをインストールし、PATH環境変数をコンソールから実行するように正しく構成する必要があります。
コンソールで次を実行すると、Javaが正しくインストールされていることを確認できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>       java -version
</span></span></code></pre></div><p>バージョン番号（1.5以降である必要があります）を取得したら、Selenium RCの使用を開始できます。</p><h3 id=javaクライアントドライバーの使用>Javaクライアントドライバーの使用</h3><ul><li>SeleniumHQ<a href=https://selenium.dev/downloads/>ダウンロードページ</a>からSelenium Javaクライアントドライバーのzipファイルをダウンロードします。</li><li>selenium-java-&lt;version-number> .jarファイルを解凍します。</li><li>Open your desired Java IDE (Eclipse, NetBeans, IntelliJ, Netweaver, etc.)</li><li>希望するJava IDE（Eclipse、NetBeans、IntelliJ、Netweaverなど）を開きます。</li><li>Javaプロジェクトを作成します。</li><li>selenium-java-&lt;version-number>.jarファイルをプロジェクトの参照先に追加します。</li><li>selenium-java-&lt;version-number>.jarファイルをプロジェクトのクラスパスに追加します。</li><li>Selenium-IDEから、スクリプトをJavaファイルにエクスポートしてJavaプロジェクトに含めるか、selenium-java-client APIを使用してJavaでSeleniumテストを記述します。
APIについては、この章の後半で説明します。
JUnitまたはTestNgを使用してテストを実行するか、独自の単純なmain()プログラムを作成できます。
これらの概念については、このセクションの後半で説明します。</li><li>コンソールからSeleniumサーバーを実行します。</li><li>Java IDEまたはコマンドラインからテストを実行します。</li></ul><p>Javaテストプロジェクトの設定詳細については、付録セクションの「EclipseでのSelenium RCの設定」および「IntellijでのSelenium RCの設定」を参照してください。</p><h3 id=pythonクライアントドライバーの使用>Pythonクライアントドライバーの使用</h3><ul><li>SeleniumをPIP経由でインストールします。手順はSeleniumHQ<a href=https://selenium.dev/downloads/>ダウンロードページ</a>にリンクされています。</li><li>SeleniumテストをPythonで作成するか、Selenium-IDEからPythonファイルにスクリプトをエクスポートします。</li><li>コンソールからSeleniumサーバーを実行します。</li><li>コンソールまたはPython IDEからテストを実行します。</li></ul><p>Pythonクライアントドライバーの設定詳細については、付録「Pythonクライアントドライバーの設定」を参照してください。</p><h3 id=netクライアントドライバーの使用>.NETクライアントドライバーの使用</h3><ul><li>SeleniumHQ<a href=https://selenium.dev/downloads/>ダウンロードページ</a>からSelenium RCをダウンロードします。</li><li>フォルダーを解凍します。</li><li><a href=https://nunit.org/download/>NUnit</a>をダウンロードしてインストールします。
（注：テストエンジンとしてNUnitを使用できます。
NUnitにまだ慣れていない場合は、簡単なmain()関数を作成してテストを実行することもできますが、NUnitはテストエンジンとして非常に便利です。）</li><li>希望した.Net IDE（Visual Studio、SharpDevelop、MonoDevelop）を開きます。</li><li>クラスライブラリ(.dll)を作成します。</li><li>次のDLLへの参照を追加します。
nmock.dll、nunit.core.dll、nunit、framework.dll、ThoughtWorks.Selenium.Core.dll、ThoughtWorks.Selenium.IntegrationTests.dll、ThoughtWorks.Selenium.UnitTests.dll</li><li>Seleniumテストを.Net言語(C#、VB.Net)で記述するか、Selenium-IDEからC#ファイルにスクリプトをエクスポートし、このコードを作成したクラスファイルにコピーします。</li><li>独自の単純なmain()プログラムを作成するか、テストを実行するためにプロジェクトにNUnitを含めることができます。
これらの概念については、この章の後半で説明します。</li><li>コンソールからSeleniumサーバーを実行します。</li><li>IDE、NUnit GUI、またはコマンドラインからテストを実行します。</li></ul><p>Visual Studioを使用した.NETクライアントドライバーの設定詳細については、付録の.NETクライアントドライバー設定を参照してください。</p><h3 id=rubyクライアントドライバーの使用>Rubyクライアントドライバーの使用</h3><ul><li>RubyGemsがまだない場合は、RubyForgeからインストールします。</li><li>次のコマンドを実行します。 <code>gem install selenium-client</code></li><li>テストスクリプトの上部に次の行を追加します。 <code>require "selenium/client"</code></li><li>Rubyテストハーネス(Test :: Unit、Mini :: Test、RSpecなど)を使用してテストスクリプトを記述します。</li><li>コンソールからSeleniumサーバーを実行します。</li><li>他のRubyスクリプトを実行するのと同じ方法でテストを実行します。</li></ul><p>Rubyクライアントドライバーの構成の詳細については、<code>Selenium-Clientのドキュメント</code> を参照してください。</p><h2 id=seleneseからプログラムへ>Seleneseからプログラムへ</h2><p>Selenium RCを使用する主なタスクは、Seleneseをプログラミング言語に変換することです。
このセクションでは、言語固有の例をいくつか示します。</p><h3 id=サンプルテストスクリプト>サンプルテストスクリプト</h3><p>Seleneseテストスクリプトの例から始めましょう。
Selenium-IDEで次のテストを記録することを想像してください。</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>open</td><td>/</td><td></td></tr><tr><td>type</td><td>q</td><td>selenium rc</td></tr><tr><td>clickAndWait</td><td>btnG</td><td></td></tr><tr><td>assertTextPresent</td><td>Results * for selenium rc</td><td></td></tr></tbody></table><p>注：この例は、Google検索ページ <a href=http://www.google.com>http://www.google.com</a> で機能します。</p><h3 id=プログラミングコードとしてのselenese>プログラミングコードとしてのSelenese</h3><p>サポートされている各プログラミング言語に(Selenium-IDE経由で)エクスポートされたテストスクリプトを次に示します。
オブジェクト指向プログラミング言語の少なくとも基本的な知識がある場合は、これらの例のいずれかを読むことで、SeleniumがSeleneseコマンドを実行する方法を理解できます。
特定の言語の例を表示するには、これらのボタンのいずれかを選択します。</p><h4 id=csharp>CSharp</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>System</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>System.Text</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>System.Text.RegularExpressions</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>System.Threading</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>NUnit.Framework</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>Selenium</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>namespace</span> <span style=color:#000>SeleniumTests</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>            [TestFixture]</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>NewTest</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>ISelenium</span> <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>StringBuilder</span> <span style=color:#000>verificationErrors</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                
</span></span></span><span style=display:flex><span><span style=color:#c4a000>                [SetUp]</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>SetupTest</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>selenium</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DefaultSelenium</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Start</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>verificationErrors</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>StringBuilder</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                
</span></span></span><span style=display:flex><span><span style=color:#c4a000>                [TearDown]</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>TeardownTest</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>try</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Stop</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Exception</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#8f5902;font-style:italic>// Ignore errors if unable to close the browser</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>Assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AreEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>verificationErrors</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToString</span><span style=color:#000;font-weight:700>());</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                
</span></span></span><span style=display:flex><span><span style=color:#c4a000>                [Test]</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>TheNewTest</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Open</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Type</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;selenium rc&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Click</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;btnG&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WaitForPageToLoad</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;30000&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>Assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AreEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;selenium rc - Google Search&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetTitle</span><span style=color:#000;font-weight:700>());</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=java>Java</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>      
</span></span><span style=display:flex><span>	  <span style=color:#8f5902;font-style:italic>/** Add JUnit framework to your classpath if not already there 
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>	   *  for this example to work
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>	  */</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>com.example.tests</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.thoughtworks.selenium.*</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>java.util.regex.Pattern</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>NewTest</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>SeleneseTestCase</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>setUp</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>throws</span> <span style=color:#000>Exception</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>              <span style=color:#000>setUp</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>          <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>testNew</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>throws</span> <span style=color:#000>Exception</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>open</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;selenium rc&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>click</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;btnG&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>waitForPageToLoad</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;30000&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>assertTrue</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>isTextPresent</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Results * for selenium rc&#34;</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span>          <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=php>Php</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>&lt;?</span><span style=color:#000>php</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>require_once</span> <span style=color:#4e9a06>&#39;PHPUnit/Extensions/SeleniumTestCase.php&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Example</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>PHPUnit_Extensions_SeleniumTestCase</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>setUp</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#000>$this</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setBrowser</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>          <span style=color:#000>$this</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setBrowserUrl</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>testMyTestCase</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#000>$this</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>open</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>          <span style=color:#000>$this</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>type</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;selenium rc&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>          <span style=color:#000>$this</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>click</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;btnG&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>          <span style=color:#000>$this</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>waitForPageToLoad</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;30000&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>          <span style=color:#000>$this</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>assertTrue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$this</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>isTextPresent</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Results * for selenium rc&#34;</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#8f5902;font-style:italic>?&gt;</span><span style=color:#a40000>
</span></span></span></code></pre></div><h4 id=python>Python</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>selenium</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>selenium</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>unittest</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>time</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>re</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>NewTest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>unittest</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>TestCase</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>setUp</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>              <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>verificationErrors</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
</span></span><span style=display:flex><span>              <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>selenium</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                      <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>              <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>start</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>         
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>test_new</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>              <span style=color:#000>sel</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>selenium</span>
</span></span><span style=display:flex><span>              <span style=color:#000>sel</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>open</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>              <span style=color:#000>sel</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>type</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;selenium rc&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>              <span style=color:#000>sel</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>click</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;btnG&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>              <span style=color:#000>sel</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>wait_for_page_to_load</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;30000&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>              <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>failUnless</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>sel</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>is_text_present</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Results * for selenium rc&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>         
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>tearDown</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>              <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>              <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>assertEqual</span><span style=color:#000;font-weight:700>([],</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>verificationErrors</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h4 id=ruby>Ruby</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87>require</span> <span style=color:#4e9a06>&#34;selenium/client&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87>require</span> <span style=color:#4e9a06>&#34;test/unit&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>NewTest</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>Test</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Unit</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>TestCase</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>setup</span>
</span></span><span style=display:flex><span>          <span style=color:#000>@verification_errors</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#ce5c00;font-weight:700>[]</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>$selenium</span>
</span></span><span style=display:flex><span>            <span style=color:#000>@selenium</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>$selenium</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>else</span>
</span></span><span style=display:flex><span>            <span style=color:#000>@selenium</span> <span style=color:#ce5c00;font-weight:700>=</span>  <span style=color:#000>Selenium</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Client</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Driver</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>60</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>start</span>
</span></span><span style=display:flex><span>          <span style=color:#204a87;font-weight:700>end</span>
</span></span><span style=display:flex><span>          <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>set_context</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;test_new&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>teardown</span>
</span></span><span style=display:flex><span>          <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>stop</span> <span style=color:#204a87;font-weight:700>unless</span> <span style=color:#000>$selenium</span>
</span></span><span style=display:flex><span>          <span style=color:#000>assert_equal</span> <span style=color:#ce5c00;font-weight:700>[]</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>@verification_errors</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>test_new</span>
</span></span><span style=display:flex><span>          <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>open</span> <span style=color:#4e9a06>&#34;/&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>type</span> <span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;selenium rc&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>click</span> <span style=color:#4e9a06>&#34;btnG&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>wait_for_page_to_load</span> <span style=color:#4e9a06>&#34;30000&#34;</span>
</span></span><span style=display:flex><span>          <span style=color:#000>assert</span> <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>is_text_present</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Results * for selenium rc&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>end</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>end</span>
</span></span></code></pre></div><p>次のセクションでは、生成されたコードを使用してテストプログラムを構築する方法を説明します。</p><h2 id=テストをプログラミングする>テストをプログラミングする</h2><p>次に、サポートされている各プログラミング言語の例を使用して、独自のテストをプログラミングする方法を説明します。
基本的に2つのタスクがあります。</p><ul><li>Selenium-IDEからスクリプトをプログラミング言語に生成し、必要に応じて結果を変更します。</li><li>生成されたコードを実行する非常に単純なmainプログラムを記述します。</li></ul><p>必要に応じて、JUnitまたはJava用のTestNG、またはこれらの言語のいずれかを使用している場合は.NET用のNUnitなどのテストエンジンプラットフォームを採用できます。</p><p>ここでは、言語固有の例を示します。
言語固有のAPIはそれぞれ異なっている傾向があるため、それぞれに個別の説明があります。</p><ul><li>Java</li><li>C#</li><li>Python</li><li>Ruby</li><li>Perl, PHP</li></ul><h3 id=java-1>Java</h3><p>Javaの場合、テストエンジンとしてJUnitまたはTestNGを使用します。
Eclipseは、プラグインを介してこれらを直接サポートしています。
これにより、さらに簡単になります。
JUnitまたはTestNGの指導はこのドキュメントの範囲外ですが、資料はオンラインで入手でき、利用可能な出版物があります。
すでに"java-shop"であれば、開発者がこれらのテストフレームワークのいずれかで既にある程度の経験を持っている可能性があります。</p><p>おそらく、テストクラスの名前を"NewTest"から独自の名前に変更する必要があります。
また、ステートメント内のブラウザを開くパラメーターを変更する必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#000>selenium</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DefaultSelenium</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*iehta&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>Selenium-IDEで生成されたコードは次のようになります。
この例では、わかりやすくするためにコメントを手動で追加しています。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>com.example.tests</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// We specify the package of our tests
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>com.thoughtworks.selenium.*</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// This is the driver&#39;s import. You&#39;ll use this for instantiating a
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#8f5902;font-style:italic>// browser and making it do what you need.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>java.util.regex.Pattern</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// Selenium-IDE add the Pattern module because it&#39;s sometimes used for 
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#8f5902;font-style:italic>// regex validations. You can remove the module if it&#39;s not used in your 
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#8f5902;font-style:italic>// script.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>NewTest</span> <span style=color:#204a87;font-weight:700>extends</span> <span style=color:#000>SeleneseTestCase</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// We create our Selenium test case
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>setUp</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>throws</span> <span style=color:#000>Exception</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>           <span style=color:#000>setUp</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#8f5902;font-style:italic>// We instantiate and start the browser
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>         <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>         <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>testNew</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>throws</span> <span style=color:#000>Exception</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>              <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>open</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>              <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;selenium rc&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>              <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>click</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;btnG&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>              <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>waitForPageToLoad</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;30000&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>              <span style=color:#000>assertTrue</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>isTextPresent</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Results * for selenium rc&#34;</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span>              <span style=color:#8f5902;font-style:italic>// These are the real test steps
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>   <span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=c><code>C#</code></h3><p>.NETクライアントドライバーはMicrosoft.NETで動作します。
NUnitやVisual Studio 2005 Team Systemなどの.NETテストフレームワークで利用できます。</p><p>Selenium-IDEは、テストフレームワークとしてNUnitを使用することを想定しています。
以下の生成コードでこれを確認できます。
NUnitの <em>using</em> ステートメントと、テストクラスの各メンバー関数の役割を識別する対応するNUnit属性が含まれています。</p><p>おそらく、テストクラスの名前を"NewTest"から独自の選択に変更する必要があります。
また、ステートメントのブラウザで開くパラメーターを変更する必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>    <span style=color:#000>selenium</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DefaultSelenium</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*iehta&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>生成されたコードは次のようになります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>System</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>System.Text</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>System.Text.RegularExpressions</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>System.Threading</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>NUnit.Framework</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000>Selenium</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>namespace</span> <span style=color:#000>SeleniumTests</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>        [TestFixture]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>NewTest</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>ISelenium</span> <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>StringBuilder</span> <span style=color:#000>verificationErrors</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>
</span></span></span><span style=display:flex><span><span style=color:#c4a000>        [SetUp]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>SetupTest</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>selenium</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DefaultSelenium</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*iehta&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Start</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#000>verificationErrors</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>StringBuilder</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>
</span></span></span><span style=display:flex><span><span style=color:#c4a000>        [TearDown]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>TeardownTest</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>try</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Stop</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Exception</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Ignore errors if unable to close the browser</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#000>Assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AreEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>verificationErrors</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToString</span><span style=color:#000;font-weight:700>());</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>        [Test]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>TheNewTest</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Open Google search engine.        </span>
</span></span><span style=display:flex><span>            <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Open</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>);</span> 
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Assert Title of page.</span>
</span></span><span style=display:flex><span>            <span style=color:#000>Assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AreEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Google&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetTitle</span><span style=color:#000;font-weight:700>());</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Provide search term as &#34;Selenium OpenQA&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Type</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;Selenium OpenQA&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Read the keyed search term and assert it.</span>
</span></span><span style=display:flex><span>            <span style=color:#000>Assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AreEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Selenium OpenQA&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Click on Search button.</span>
</span></span><span style=display:flex><span>            <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Click</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;btnG&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Wait for page to load.</span>
</span></span><span style=display:flex><span>            <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WaitForPageToLoad</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;5000&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Assert that &#34;www.openqa.org&#34; is available in search results.</span>
</span></span><span style=display:flex><span>            <span style=color:#000>Assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IsTrue</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IsTextPresent</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;www.openqa.org&#34;</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// Assert that page title is - &#34;Selenium OpenQA - Google Search&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#000>Assert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AreEqual</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Selenium OpenQA - Google Search&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span>                         <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetTitle</span><span style=color:#000;font-weight:700>());</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>NUnitにテストの実行を管理させることができます。
または、テストオブジェクトをインスタンス化し、<code>SetupTest()</code>、<code>TheNewTest()</code>、<code>TeardownTest()</code> の各メソッドを順番に実行する単純な <code>main()</code> プログラムを作成することもできます。</p><h3 id=python-1>Python</h3><p>Pyunitは、Pythonで使用するテストフレームワークです。</p><p>基本的なテスト構造は次のとおりです。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>selenium</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>selenium</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic># This is the driver&#39;s import.  You&#39;ll use this class for instantiating a</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic># browser and making it do what you need.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>unittest</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>time</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>re</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic># This are the basic imports added by Selenium-IDE by default.</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic># You can remove the modules if they are not used in your script.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>NewTest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>unittest</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>TestCase</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic># We create our unittest test case</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>setUp</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>           <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>verificationErrors</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># This is an empty array where we will store any verification errors</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># we find in our tests</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>           <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>selenium</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                   <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>           <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>start</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># We instantiate and start the browser</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>test_new</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># This is the test code.  Here you should put the actions you need</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># the browser to do during your test.</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>           <span style=color:#000>sel</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>selenium</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># We assign the browser to the variable &#34;sel&#34; (just to save us from </span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># typing &#34;self.selenium&#34; each time we want to call the browser).</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>           <span style=color:#000>sel</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>open</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>           <span style=color:#000>sel</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>type</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;selenium rc&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>           <span style=color:#000>sel</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>click</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;btnG&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>           <span style=color:#000>sel</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>wait_for_page_to_load</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;30000&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>           <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>failUnless</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>sel</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>is_text_present</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Results * for selenium rc&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># These are the real test steps</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>tearDown</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>           <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>stop</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># we close the browser (I&#39;d recommend you to comment this line while</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># you are creating and debugging your tests)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>           <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>assertEqual</span><span style=color:#000;font-weight:700>([],</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>verificationErrors</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># And make the test fail if we found that any verification errors</span>
</span></span><span style=display:flex><span>           <span style=color:#8f5902;font-style:italic># were found</span>
</span></span></code></pre></div><h3 id=ruby-1>Ruby</h3><p>Selenium-IDEの古い（2.0より前の）バージョンは、古いSelenium gemを必要とするRubyコードを生成します。
したがって、IDEによって生成されたRubyスクリプトを次のように更新することをお勧めします。</p><ol><li><p>１行目を <code>require "selenium"</code> から <code>require "selenium/client"</code> に変更</p></li><li><p>11行目を <code>Selenium::SeleniumDriver.new</code> から <code>Selenium::Client::Driver.new</code> に変更</p></li></ol><p>クラス名を"Untitled"よりもわかりやすい名前に変更し、テストメソッドの名前を"test_untitled"以外の名前に変更することもできます。</p><p>上記のように、Selenium IDEによって生成されたRubyコードを変更して作成された簡単な例を次に示します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic># load the Selenium-Client gem</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87>require</span> <span style=color:#4e9a06>&#34;selenium/client&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic># Load Test::Unit, Ruby&#39;s default test framework.</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic># If you prefer RSpec, see the examples in the Selenium-Client</span>
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic># documentation.</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87>require</span> <span style=color:#4e9a06>&#34;test/unit&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Untitled</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>Test</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Unit</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>TestCase</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#8f5902;font-style:italic># The setup method is called before each test.</span>
</span></span><span style=display:flex><span>     <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>setup</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># This array is used to capture errors and display them at the</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># end of the test run.</span>
</span></span><span style=display:flex><span>       <span style=color:#000>@verification_errors</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#ce5c00;font-weight:700>[]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># Create a new instance of the Selenium-Client driver.</span>
</span></span><span style=display:flex><span>       <span style=color:#000>@selenium</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Selenium</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Client</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Driver</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>new</span> <span style=color:#000;font-weight:700>\</span>
</span></span><span style=display:flex><span>         <span style=color:#4e9a06>:host</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         <span style=color:#4e9a06>:port</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         <span style=color:#4e9a06>:browser</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#4e9a06>&#34;*chrome&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         <span style=color:#4e9a06>:url</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         <span style=color:#4e9a06>:timeout_in_second</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#0000cf;font-weight:700>60</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># Start the browser session</span>
</span></span><span style=display:flex><span>       <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>start</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># Print a message in the browser-side log and status bar</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># (optional).</span>
</span></span><span style=display:flex><span>       <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>set_context</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;test_untitled&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#204a87;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#8f5902;font-style:italic># The teardown method is called after each test.</span>
</span></span><span style=display:flex><span>     <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>teardown</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># Stop the browser session.</span>
</span></span><span style=display:flex><span>       <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>stop</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># Print the array of error messages, if any.</span>
</span></span><span style=display:flex><span>       <span style=color:#000>assert_equal</span> <span style=color:#ce5c00;font-weight:700>[]</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>@verification_errors</span>
</span></span><span style=display:flex><span>     <span style=color:#204a87;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     <span style=color:#8f5902;font-style:italic># This is the main body of your test.</span>
</span></span><span style=display:flex><span>     <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>test_untitled</span>
</span></span><span style=display:flex><span>     
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># Open the root of the site we specified when we created the</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># new driver instance, above.</span>
</span></span><span style=display:flex><span>       <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>open</span> <span style=color:#4e9a06>&#34;/&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># Type &#39;selenium rc&#39; into the field named &#39;q&#39;</span>
</span></span><span style=display:flex><span>       <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>type</span> <span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;selenium rc&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># Click the button named &#34;btnG&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>click</span> <span style=color:#4e9a06>&#34;btnG&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># Wait for the search results page to load.</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># Note that we don&#39;t need to set a timeout here, because that</span>
</span></span><span style=display:flex><span>       <span style=color:#8f5902;font-style:italic># was specified when we created the new driver instance, above.</span>
</span></span><span style=display:flex><span>       <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>wait_for_page_to_load</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>begin</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic># Test whether the search results contain the expected text.</span>
</span></span><span style=display:flex><span>	  <span style=color:#8f5902;font-style:italic># Notice that the star (*) is a wildcard that matches any</span>
</span></span><span style=display:flex><span>	  <span style=color:#8f5902;font-style:italic># number of characters.</span>
</span></span><span style=display:flex><span>	  <span style=color:#000>assert</span> <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>is_text_present</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Results * for selenium rc&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>	  
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>rescue</span> <span style=color:#000>Test</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Unit</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>AssertionFailedError</span>
</span></span><span style=display:flex><span>       
</span></span><span style=display:flex><span>          <span style=color:#8f5902;font-style:italic># If the assertion fails, push it onto the array of errors.</span>
</span></span><span style=display:flex><span>	  <span style=color:#000>@verification_errors</span> <span style=color:#ce5c00;font-weight:700>&lt;&lt;</span> <span style=color:#000>$!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>end</span>
</span></span><span style=display:flex><span>     <span style=color:#204a87;font-weight:700>end</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>end</span>
</span></span></code></pre></div><h3 id=perl-php>Perl, PHP</h3><p>ドキュメントチームのメンバーは、PerlまたはPHPでSelenium RCを使用していません。
これらの2つの言語のいずれかでSelenium RCを使用している場合は、ドキュメントチームに連絡してください（貢献に関する章を参照）。
PerlおよびPHPユーザーをサポートするために、あなたとあなたの経験からいくつかの例を含めたいと思います。</p><h2 id=apiを学ぶ>APIを学ぶ</h2><p>Selenium RC APIは、Seleneseを理解していると仮定すると、インターフェイスのほとんどが自明である命名規則を使用します。
ただし、ここでは、最も重要で、おそらくそれほど明白ではない側面について説明します。</p><h3 id=ブラウザーを起動する>ブラウザーを起動する</h3><h4 id=csharp-1>CSharp</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>      <span style=color:#000>selenium</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DefaultSelenium</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Start</span><span style=color:#000;font-weight:700>();</span>
</span></span></code></pre></div><h4 id=java-2>Java</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#000>setUp</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><h4 id=perl>Perl</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-perl data-lang=perl><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>my</span> <span style=color:#000>$sel</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Test::WWW::Selenium</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#204a87;font-weight:700>new</span><span style=color:#000;font-weight:700>(</span> <span style=color:#000>host</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span>                                          <span style=color:#000>port</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span>                                          <span style=color:#000>browser</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span>                                          <span style=color:#000>browser_url</span> <span style=color:#ce5c00;font-weight:700>=&gt;</span> <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span> <span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h4 id=php-1>Php</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>      <span style=color:#000>$this</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setBrowser</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#000>$this</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#c4a000>setBrowserUrl</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h4 id=python-2>Python</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>      <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>selenium</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>selenium</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                               <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>      <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>start</span><span style=color:#000;font-weight:700>()</span>
</span></span></code></pre></div><h4 id=ruby-2>Ruby</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>      <span style=color:#000>@selenium</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Selenium</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>ClientDriver</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;http://www.google.com/&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>10000</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#000>@selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>start</span>
</span></span></code></pre></div><p>これらの各例はブラウザを開き、&ldquo;ブラウザーインスタンス"をプログラム変数に割り当てることでそのブラウザを表します。
このプログラム変数は、ブラウザからメソッドを呼び出すために使用されます。
これらのメソッドは、Seleniumコマンドを実行します。
つまり、 <em>open</em> コマンドや <em>type</em> コマンド、 <em>verify</em> コマンドなどです。</p><p>ブラウザーインスタンスの作成時に必要なパラメーターは次のとおりです。</p><ul><li><p><strong>host</strong>
サーバーが配置されているコンピューターのIPアドレスを指定します。
通常、これはクライアントが実行されているマシンと同じマシンであるため、この場合は <em>localhost</em> が渡されます。
一部のクライアントでは、これは任意のパラメーターです。</p></li><li><p><strong>port</strong>
サーバーがクライアントが接続を確立するのを待機しているTCP/IPソケットを指定します。
これは、一部のクライアントドライバーでは任意です。</p></li><li><p><strong>browser</strong>
テストを実行するブラウザー。
これは必須パラメーターです。</p></li><li><p><strong>url</strong>
テスト対象のアプリケーションのベースURL。
これは、すべてのクライアントライブラリに必要であり、ブラウザプロキシAUT通信を開始するための不可欠な情報です。</p></li></ul><p>一部のクライアントライブラリでは、 <code>start()</code> メソッドを呼び出してブラウザーを明示的に起動する必要があります。</p><h3 id=コマンドを実行する>コマンドを実行する</h3><p>ブラウザを初期化して変数（一般的に"selenium"という名前）に割り当てたら、ブラウザ変数からそれぞれのメソッドを呼び出してSeleneseコマンドを実行させることができます。
たとえば、Seleniumオブジェクトの <em>type</em> メソッドを呼び出すには、以下のように記述します。</p><pre tabindex=0><code>    selenium.type(&#34;field-id&#34;,&#34;string to type&#34;)
</code></pre><p>バックグラウンドで、ブラウザは、メソッド呼び出し中に指定したロケーターと文字列を使用して、ユーザーがブラウザーに入力を入力するのと本質的に同じタイプ操作を実際に実行します。</p><h2 id=結果を報告する>結果を報告する</h2><p>Selenium RCには、結果を報告するための独自のメカニズムがありません。
むしろ、選択したプログラミング言語の機能を使用して、ニーズに合わせてカスタマイズしたレポートを作成できます。
それは素晴らしいことですが、すでにあなたのために行われている何かを簡単にしたい場合はどうでしょうか？
多くの場合、既存のライブラリまたはテストフレームワークは、独自のテストレポートコードを開発するよりも早くニーズを満たすことができます。</p><h3 id=テストフレームワークのレポートツール>テストフレームワークのレポートツール</h3><p>テストフレームワークは、多くのプログラミング言語で使用できます。
これらは、テストを実行するための柔軟なテストエンジンを提供する主な機能とともに、結果を報告するためのライブラリコードを含んでいます。
たとえば、Javaには一般的に使用される2つのテストフレームワーク、JUnitとTestNGがあります。
.NETには独自のNUnitもあります。</p><p>ここではフレームワーク自体を教えません。
これはこのユーザーガイドの範囲外です。
Seleniumに関連するフレームワーク機能と、適用可能ないくつかのテクニックを簡単に紹介します。
ただし、これらのテストフレームワークに関する優れた書籍は、インターネット上の情報とともに入手できます。</p><h3 id=テストレポートライブラリ>テストレポートライブラリ</h3><p>選択したプログラミング言語でテスト結果を報告するために特別に作成されたサードパーティライブラリも利用できます。
これらは多くの場合、HTMLやPDFなどのさまざまな形式をサポートします。</p><h3 id=最良のアプローチは何ですか>最良のアプローチは何ですか？</h3><p>テストフレームワークを初めて使用するほとんどの人は、フレームワークに組み込まれているレポート機能から始めます。
独自のライブラリを開発するよりも時間がかかりません。
Seleniumを使用し始めたら、進捗を報告するための独自の"印刷したステートメント"を入力し始めることは間違いありません。
それにより、ライブラリまたはテストフレームワークの使用と並行して、独自のレポートの開発に徐々につながる可能性があります。
とにかく、最初の、しかし短い学習曲線の後、あなたは自分の状況に最適なものを自然に開発します。</p><h3 id=テストレポートの例>テストレポートの例</h3><p>説明のために、Seleniumでサポートされている他の言語のいくつかの特定のツールを紹介します。
ここにリストされているものは一般的に使用されており、このガイドの著者によって広く使用されています（したがって、推奨されています）。</p><h4 id=javaのテストレポート>Javaのテストレポート</h4><ul><li><p>SeleniumテストケースがJUnitを使用して開発されている場合、JUnitレポートを使用してテストレポートを生成できます。</p></li><li><p>TestNGを使用してSeleniumテストケースを開発する場合、テストレポートを生成するために外部タスクは必要ありません。
TestNGフレームワークは、テストの詳細をリストするHTMLレポートを生成します。</p></li><li><p>ReportNGは、TestNGフレームワーク用のHTMLレポートプラグインです。
これは、デフォルトのTestNG HTMLレポートの代替として意図されています。
ReportNGは、テスト結果の色分けされたシンプルなビューを提供します。</p></li></ul><h5 id=seleneseコマンドのロギング>Seleneseコマンドのロギング</h5><ul><li>Seleniumのロギングを使用して、テスト内のすべてのSeleneseコマンドのレポートを、それぞれの成功または失敗とともに生成できます。
ロギングSeleniumはJavaクライアントドライバーを拡張して、このSeleneseロギング機能を追加します。</li></ul><h4 id=pythonのテストレポート>Pythonのテストレポート</h4><ul><li>Pythonクライアントドライバーを使用する場合、HTMLTestRunnerを使用してテストレポートを生成できます。</li></ul><h4 id=rubyのテストレポート>Rubyのテストレポート</h4><ul><li>RSpecフレームワークをRubyでのSeleniumテストケースの作成に使用する場合、そのHTMLレポートを使用してテストレポートを生成できます。</li></ul><h2 id=テストにスパイスを追加する>テストにスパイスを追加する</h2><p>次に、テストにプログラミングロジックを追加して、Selenium RCを使用するすべての理由を説明します。
他のプログラムと同じです。
プログラムフローは、条件ステートメントと反復を使用して制御されます。
さらに、I/Oを使用して進捗情報を報告できます。
このセクションでは、プログラミング言語の構成要素をSeleniumと組み合わせて、一般的なテストの問題を解決する方法の例をいくつか示します。</p><p>ページ要素の存在の単純なテストから、予想される結果を検証するためにプログラミングロジックを必要とする複数のWebページとさまざまなデータを含む動的機能のテストに移行するときにわかります。
基本的に、Selenium-IDEは反復および標準条件ステートメントをサポートしていません。
Seleneseパラメーターにjavascriptを埋め込むことでいくつかの条件を実行できますが、反復は不可能であり、プログラミング言語ではほとんどの条件がはるかに簡単になります。
さらに、エラー回復のために例外処理が必要になる場合があります。
これらの理由およびその他の理由により、自動テストでの"検証力"を高めるための一般的なプログラミング手法の使用を説明するために、このセクションを作成しました。</p><p>このセクションの例はC#とJavaで記述されていますが、コードはシンプルであり、サポートされている他の言語に簡単に適合させることができます。
オブジェクト指向プログラミング言語の基本的な知識があれば、このセクションを理解するのに困難はないはずです。</p><h3 id=反復>反復</h3><p>反復は、テストで行う必要がある最も一般的なことの1つです。
たとえば、検索を複数回実行したい場合があります。
または、おそらくテスト結果を検証するために、データベースから返された"結果セット"を処理する必要があります。</p><p>前に使用したのと同じGoogle検索の例を使用して、Seleniumの検索結果を確認しましょう。
このテストではSeleneseを使用できます。</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>open</td><td>/</td><td></td></tr><tr><td>type</td><td>q</td><td>selenium rc</td></tr><tr><td>clickAndWait</td><td>btnG</td><td></td></tr><tr><td>assertTextPresent</td><td>Results * for selenium rc</td><td></td></tr><tr><td>type</td><td>q</td><td>selenium ide</td></tr><tr><td>clickAndWait</td><td>btnG</td><td></td></tr><tr><td>assertTextPresent</td><td>Results * for selenium ide</td><td></td></tr><tr><td>type</td><td>q</td><td>selenium grid</td></tr><tr><td>clickAndWait</td><td>btnG</td><td></td></tr><tr><td>assertTextPresent</td><td>Results * for selenium grid</td><td></td></tr></tbody></table><p>同じ手順を3回実行するためにコードが繰り返されています。
ただし、同じコードのコピーを複数作成することは、維持する作業が増えるため、プログラムとしては適切ではありません。
プログラミング言語を使用することで、検索結果を反復処理して、より柔軟で保守可能なソリューションを実現できます。</p><h4 id=c-の場合><code>C#</code> の場合</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// Collection of String values.</span>
</span></span><span style=display:flex><span>   <span style=color:#000>String</span><span style=color:#000;font-weight:700>[]</span> <span style=color:#000>arr</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;ide&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;rc&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;grid&#34;</span><span style=color:#000;font-weight:700>};</span>    
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// Execute loop for each String in array &#39;arr&#39;.</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>foreach</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>String</span> <span style=color:#000>s</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>arr</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>sel</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>open</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>       <span style=color:#000>sel</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>type</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;selenium &#34;</span> <span style=color:#000;font-weight:700>+</span><span style=color:#000>s</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>       <span style=color:#000>sel</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>click</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;btnG&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>       <span style=color:#000>sel</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>waitForPageToLoad</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;30000&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>       <span style=color:#000>assertTrue</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Expected text: &#34;</span> <span style=color:#000;font-weight:700>+</span><span style=color:#000>s</span><span style=color:#000;font-weight:700>+</span> <span style=color:#4e9a06>&#34; is missing on page.&#34;</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>,</span> <span style=color:#000>sel</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>isTextPresent</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Results * for selenium &#34;</span> <span style=color:#000;font-weight:700>+</span> <span style=color:#000>s</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=条件ステートメント>条件ステートメント</h3><p>テストでの条件の使用を説明するために、例から始めます。
Seleniumテストの実行中に発生する一般的な問題は、ページで予期される要素が利用できない場合に発生します。
たとえば、次の行を実行する場合です。</p><pre tabindex=0><code>   selenium.type(&#34;q&#34;, &#34;selenium &#34; +s);
</code></pre><p>要素 &lsquo;q&rsquo;がページにない場合、例外がスローされます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>   <span style=color:#000>com</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>thoughtworks</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>SeleniumException</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>ERROR</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>Element</span> <span style=color:#000>q</span> <span style=color:#000>not</span> <span style=color:#000>found</span>
</span></span></code></pre></div><p>これにより、テストが中断する可能性があります。
いくつかのテストでは、それがあなたの望むものです。
しかし、多くの場合、テストスクリプトには実行する他の多くのテストがあるため、これは望ましくありません。</p><p>より良いアプローチは、まず要素が実際に存在するかどうかを検証し、次に存在しない場合に代替手段を取ることです。
Javaを使用してこれを見てみましょう。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>   <span style=color:#8f5902;font-style:italic>// If element is available on page then perform type operation.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>   <span style=color:#204a87;font-weight:700>if</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>isElementPresent</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#ce5c00;font-weight:700>))</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;q&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;Selenium rc&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>   <span style=color:#ce5c00;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>       <span style=color:#000>System</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>out</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>printf</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;Element: &#34;</span> <span style=color:#ce5c00;font-weight:700>+</span><span style=color:#000>q</span><span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34; is not available on page.&#34;</span><span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>   <span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>このアプローチの利点は、ページで一部のUI要素が利用できない場合でも、テストの実行を続行できることです。</p><h3 id=テストからjavascriptを実行する>テストからJavaScriptを実行する</h3><p>JavaScriptは、セレンによって直接サポートされていないアプリケーションを実行する際に非常に便利です。
Selenium APIの <strong>getEval</strong> メソッドを使用して、Selenium RCからJavaScriptを実行できます。</p><p>静的な識別子のないチェックボックスを持つアプリケーションを考えてください。
この場合、Selenium RCからJavaScriptを評価して、すべてのチェックボックスのIDを取得し、それらを実行できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#000>String</span><span style=color:#ce5c00;font-weight:700>[]</span> <span style=color:#000>getAllCheckboxIds</span> <span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>{</span> 
</span></span><span style=display:flex><span>		<span style=color:#000>String</span> <span style=color:#000>script</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;var inputId  = new Array();&#34;</span><span style=color:#ce5c00;font-weight:700>;</span><span style=color:#8f5902;font-style:italic>// Create array in java script.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#000>script</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#4e9a06>&#34;var cnt = 0;&#34;</span><span style=color:#ce5c00;font-weight:700>;</span> <span style=color:#8f5902;font-style:italic>// Counter for check box ids.  
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#000>script</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#4e9a06>&#34;var inputFields  = new Array();&#34;</span><span style=color:#ce5c00;font-weight:700>;</span> <span style=color:#8f5902;font-style:italic>// Create array in java script.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#000>script</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#4e9a06>&#34;inputFields = window.document.getElementsByTagName(&#39;input&#39;);&#34;</span><span style=color:#ce5c00;font-weight:700>;</span> <span style=color:#8f5902;font-style:italic>// Collect input elements.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#000>script</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#4e9a06>&#34;for(var i=0; i&lt;inputFields.length; i++) {&#34;</span><span style=color:#ce5c00;font-weight:700>;</span> <span style=color:#8f5902;font-style:italic>// Loop through the collected elements.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#000>script</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#4e9a06>&#34;if(inputFields[i].id !=null &#34;</span> <span style=color:#ce5c00;font-weight:700>+</span>
</span></span><span style=display:flex><span>		<span style=color:#4e9a06>&#34;&amp;&amp; inputFields[i].id !=&#39;undefined&#39; &#34;</span> <span style=color:#ce5c00;font-weight:700>+</span>
</span></span><span style=display:flex><span>		<span style=color:#4e9a06>&#34;&amp;&amp; inputFields[i].getAttribute(&#39;type&#39;) == &#39;checkbox&#39;) {&#34;</span><span style=color:#ce5c00;font-weight:700>;</span> <span style=color:#8f5902;font-style:italic>// If input field is of type check box and input id is not null.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#000>script</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#4e9a06>&#34;inputId[cnt]=inputFields[i].id ;&#34;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#8f5902;font-style:italic>// Save check box id to inputId array.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#4e9a06>&#34;cnt++;&#34;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#8f5902;font-style:italic>// increment the counter.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#4e9a06>&#34;}&#34;</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#8f5902;font-style:italic>// end of if.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#4e9a06>&#34;}&#34;</span><span style=color:#ce5c00;font-weight:700>;</span> <span style=color:#8f5902;font-style:italic>// end of for.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#000>script</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#4e9a06>&#34;inputId.toString();&#34;</span> <span style=color:#ce5c00;font-weight:700>;</span><span style=color:#8f5902;font-style:italic>// Convert array in to string.			
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#000>String</span><span style=color:#ce5c00;font-weight:700>[]</span> <span style=color:#000>checkboxIds</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getEval</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>script</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>split</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;,&#34;</span><span style=color:#ce5c00;font-weight:700>);</span> <span style=color:#8f5902;font-style:italic>// Split the string.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>		<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>checkboxIds</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>ページ上の画像の数を数えるには、以下のとおりです。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>   <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getEval</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;window.document.images.length;&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>デフォルトでは、テストウィンドウではなくSeleniumウィンドウが参照されるため、DOM式の場合は必ずウィンドウオブジェクトを使用してください。</p><h2 id=サーバーオプション>サーバーオプション</h2><p>サーバーの起動時に、コマンドラインオプションを使用してデフォルトのサーバーの動作を変更できます。</p><p>サーバーを起動するには、次を実行してください。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   $ java -jar selenium-server-standalone-&lt;version-number&gt;.jar
</span></span></code></pre></div><p>オプションのリストを表示するには、 <code>-h</code> オプションを指定してサーバーを実行します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   $ java -jar selenium-server-standalone-&lt;version-number&gt;.jar -h
</span></span></code></pre></div><p>サーバーで使用できるすべてのオプションのリストとそれぞれの簡単な説明が表示されます。
提供された説明では必ずしも十分ではないため、いくつかのより重要なオプションについて説明しました。</p><h3 id=プロキシ設定>プロキシ設定</h3><p>AUTが認証を必要とするHTTPプロキシの後ろにある場合、次のコマンドを使用してhttp.proxyHost、http.proxyPort、http.proxyUserおよびhttp.proxyPasswordを設定する必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   $ java -jar selenium-server-standalone-&lt;version-number&gt;.jar -Dhttp.proxyHost<span style=color:#ce5c00;font-weight:700>=</span>proxy.com -Dhttp.proxyPort<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>8080</span> -Dhttp.proxyUser<span style=color:#ce5c00;font-weight:700>=</span>username -Dhttp.proxyPassword<span style=color:#ce5c00;font-weight:700>=</span>password
</span></span></code></pre></div><h3 id=マルチウィンドウモード>マルチウィンドウモード</h3><p>Selenium 1.0を使用している場合は、マルチウィンドウモードがデフォルトの動作であるため、おそらくこのセクションをスキップできます。
ただし、バージョン1.0より前は、Seleniumはデフォルトで、ここに示すようにサブフレームでテスト対象のアプリケーションを実行していました。</p><p><img src=/images/documentation/legacy/selenium_rc_single_window_mode.png alt=シングルウィンドウモード></p><p>一部のアプリケーションはサブフレームで正しく実行されず、ウィンドウの上部フレームにロードする必要がありました。
マルチウィンドウモードオプションにより、AUTはデフォルトフレームではなく別のウィンドウで実行でき、そこで必要なトップフレームを取得できました。</p><p><img src=/images/documentation/legacy/selenium_rc_multi_window_mode.png alt=マルチウィンドウモード></p><p>Seleniumの古いバージョンでは、次のオプションで明示的にマルチウィンドウモードを指定する必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   -multiwindow 
</span></span></code></pre></div><p>Selenium RC 1.0の時点で、単一のフレーム内でテストを実行する場合（つまり、以前のSeleniumバージョンの標準を使用する場合）、オプションを使用してこれをSelenium Serverに指定できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   -singlewindow 
</span></span></code></pre></div><h3 id=firefoxプロファイルの指定>Firefoxプロファイルの指定</h3><p>Firefoxは、インスタンスごとに個別のプロファイルを指定しない限り、2つのインスタンスを同時に実行しません。
Selenium RC 1.0以降は個別のプロファイルで自動的に実行されるため、Selenium 1.0を使用している場合は、このセクションをスキップできます。
ただし、Seleniumの古いバージョンを使用している場合、またはテストに特定のプロファイルを使用する必要がある場合（https証明書の追加やアドオンのインストールなど）、プロファイルを明示的に指定する必要があります。</p><p>最初に、別のFirefoxプロファイルを作成するには、次の手順に従います。 Windowsのスタートメニューを開き、&ldquo;実行"を選択して、次のいずれかを入力します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   firefox.exe -profilemanager 
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   firefox.exe -P 
</span></span></code></pre></div><p>ダイアログを使用して新しいプロファイルを作成します。
次に、Seleniumサーバーを実行するときに、サーバーのコマンドラインオプション <em>-firefoxProfileTemplate</em> でこの新しいFirefoxプロファイルを使用し、ファイル名とディレクトリパスを使用してプロファイルへのパスを指定するように指示します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   -firefoxProfileTemplate <span style=color:#4e9a06>&#34;path to the profile&#34;</span> 
</span></span></code></pre></div><p><strong>警告</strong>: 必ずデフォルトとは別の新しいフォルダーにプロファイルを入れてください!!!
Firefoxプロファイルマネージャーツールは、プロファイルを削除すると、プロファイルファイルであるかどうかに関係なく、フォルダー内のすべてのファイルを削除します。</p><p>Firefoxプロファイルの詳細については、<a href=http://support.mozilla.com/en/kb/Managing+profiles>Mozillaのナレッジベース</a>をご覧ください。</p><h3 id=-htmlsuiteを使用してサーバー内でseleneseを直接実行する>-htmlSuiteを使用してサーバー内でSeleneseを直接実行する</h3><p>HTMLファイルをサーバーのコマンドラインに渡すことで、Selenese HTMLファイルをSelenium Server内で直接実行できます。
例えば、</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   java -jar selenium-server-standalone-&lt;version-number&gt;.jar -htmlSuite <span style=color:#4e9a06>&#34;*firefox&#34;</span> 
</span></span><span style=display:flex><span>   <span style=color:#4e9a06>&#34;http://www.google.com&#34;</span> <span style=color:#4e9a06>&#34;c:\absolute\path\to\my\HTMLSuite.html&#34;</span> 
</span></span><span style=display:flex><span>   <span style=color:#4e9a06>&#34;c:\absolute\path\to\my\results.html&#34;</span>
</span></span></code></pre></div><p>これにより、HTMLスイートが自動的に起動され、すべてのテストが実行され、結果とともにHTMLレポートが保存されます。</p><p><em>注意:</em> このオプションを使用すると、サーバーはテストを開始し、テストが完了するまで指定された秒数待機します。 その時間内にテストが完了しない場合、コマンドはゼロ以外の終了コードで終了し、結果ファイルは生成されません。</p><p>このコマンドラインは非常に長いため、入力するときは注意してください。
これには、単一のテストではなく、HTML Seleneseスイートを渡す必要があることに注意してください。
また、 -htmlSuite オプションは<code>-interactive</code>と互換性がないことに注意してください。
両方を同時に実行することはできません。</p><h3 id=seleniumサーバーのログ>Seleniumサーバーのログ</h3><h4 id=サーバー側のログ>サーバー側のログ</h4><p>Seleniumサーバーを起動するときに、 <strong>-log</strong> オプションを使用して、Seleniumサーバーによってレポートされた貴重なデバッグ情報をテキストファイルに記録できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   java -jar selenium-server-standalone-&lt;version-number&gt;.jar -log selenium.log
</span></span></code></pre></div><p>このログファイルは、標準のコンソールログよりも詳細です（DEBUGレベルのログメッセージが含まれます）。
ログファイルには、ロガー名、およびメッセージを記録したスレッドのID番号も含まれます。
例えば、</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   20:44:25 DEBUG <span style=color:#ce5c00;font-weight:700>[</span>12<span style=color:#ce5c00;font-weight:700>]</span> org.openqa.selenium.server.SeleniumDriverResourceHandler - 
</span></span><span style=display:flex><span>   Browser 465828/:top frame1 posted START NEW
</span></span></code></pre></div><p>メッセージの形式は、以下のとおりです。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   TIMESTAMP<span style=color:#ce5c00;font-weight:700>(</span>HH:mm:ss<span style=color:#ce5c00;font-weight:700>)</span> LEVEL <span style=color:#ce5c00;font-weight:700>[</span>THREAD<span style=color:#ce5c00;font-weight:700>]</span> LOGGER - MESSAGE
</span></span></code></pre></div><p>このメッセージは複数行の場合があります。</p><h4 id=ブラウザ側のログ>ブラウザ側のログ</h4><p>ブラウザ側のJavaScript（Selenium Core）も重要なメッセージを記録します。
多くの場合、これらは通常のSeleniumサーバーログよりもエンドユーザーにとって有用です。
ブラウザ側のログにアクセスするには、 <strong>-browserSideLog</strong> 引数をSeleniumサーバーに渡します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   java -jar selenium-server-standalone-&lt;version-number&gt;.jar -browserSideLog
</span></span></code></pre></div><p><strong>-browserSideLog</strong> を <strong>-log</strong> 引数と組み合わせて、browserSideLogs（および他のすべてのDEBUGレベルのログメッセージ）をファイルに記録する必要があります。</p><h2 id=特定のブラウザへのパスを指定する>特定のブラウザへのパスを指定する</h2><p>特定のブラウザーへのパスをSelenium RCに指定できます。
これは、同じブラウザーの異なるバージョンがあり、特定のブラウザーを使用する場合に便利です。
また、これは、Selenium RCで直接サポートされていないブラウザーに対してテストを実行できるようにするために使用されます。
実行モードを指定するときは、ブラウザの実行可能ファイルへのフルパスが後に続く *custom 指定子を使用します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   *custom &lt;path to browser&gt; 
</span></span></code></pre></div><h2 id=selenium-rcアーキテクチャ>Selenium RCアーキテクチャ</h2><p><em>注意:</em> このトピックでは、Selenium RCの背後にある技術的な実装について説明します。
Seleniumユーザーがこれを知ることは基本的なことではありませんが、将来発生する可能性のある問題の一部を理解するのに役立ちます。</p><p>Selenium RC Serverがどのように機能し、プロキシインジェクションと高度な特権モードを使用する理由を詳細に理解するには、最初に <code>同一オリジンポリシー</code> を理解する必要があります。</p><h3 id=同一オリジンポリシー>同一オリジンポリシー</h3><p>Seleniumが直面する主な制限は、同一オリジンポリシーです。
このセキュリティ制限は、市場のすべてのブラウザーによって適用され、その目的は、サイトのコンテンツが別のサイトのスクリプトによってアクセスされないようにすることです。
同一オリジンポリシーでは、ブラウザ内にロードされたコードはすべて、そのウェブサイトのドメイン内でのみ動作することが規定されています。
別のWebサイトで関数を実行することはできません。
たとえば、ブラウザが <a href=https://www.mysite.com>www.mysite.com</a> を読み込むときにJavaScriptコードを読み込むと、それが別のサイトであっても、読み込まれたコードを <a href=https://www.mysite2.com>www.mysite2.com</a> に対して実行できません。
これが可能な場合、他のタブで口座ページを開いていれば、開いているウェブサイトに配置されたスクリプトは銀行口座の情報を読み取ることができます。
これはXSS（クロスサイトスクリプティング）と呼ばれます。</p><p>このポリシー内で機能するには、Selenium-Core（およびすべての魔法を発生させるJavaScriptコマンド）をテスト対象アプリケーション（同じURL）と同一オリジンに配置する必要があります。</p><p>歴史的に、Selenium-CoreはJavaScriptで実装されていたため、この問題によって制限されていました。
ただし、Selenium RCは同一オリジンポリシーによって制限されていません。
Seleniumサーバーをプロキシとして使用すると、この問題を回避できます。
基本的に、ブラウザがサーバーが提供する単一の"なりすまし"ウェブサイトで動作していることをブラウザに伝えます。</p><p><em>注意:</em> このトピックに関する追加情報は、同一オリジンポリシーおよびXSSに関するWikipediaページで見つけることができます。</p><h3 id=プロキシインジェクション>プロキシインジェクション</h3><p>同一オリジンポリシーを回避するためにSeleniumが使用した最初の方法は、プロキシインジェクションでした。
プロキシインジェクションモードでは、Selenium Serverはブラウザと テスト対象アプリケーション<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> の間にあるクライアント設定の <strong>HTTPプロキシ</strong><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>として機能します。
次に、架空のURLでテスト対象アプリケーションをマスクします（Selenium-Coreと一連のテストを埋め込み、同一オリジンから来ているかのように配信します）。</p><p>これがアーキテクチャ図です。</p><p><img src=/images/documentation/legacy/selenium_rc_architecture_diagram_1.png alt="これがアーキテクチャ図 1"></p><p>お気に入りの言語でテストスイートが開始されると、次のようになります。</p><ol><li>クライアント/ドライバーは、selenium-RCサーバーとの接続を確立します。</li><li>Selenium RCサーバーは、Selenium-CoreのJavaScriptをブラウザーがロードしたWebページに挿入するURLを使用してブラウザーを起動します（または古いブラウザーを再利用します）。</li><li>クライアントドライバーはSeleneseコマンドをサーバーに渡します。</li><li>サーバーはコマンドを解釈し、対応するJavaScript実行をトリガーして、ブラウザー内でそのコマンドを実行します。 Selenium-Coreは、ブラウザーに最初の命令に基づいて動作するよう指示し、通常はテスト対象アプリケーションのページを開きます。</li><li>ブラウザーはオープンリクエストを受信し、Selenium RCサーバー（使用するブラウザーのHTTPプロキシとして設定）からWebサイトのコンテンツを要求します。</li><li>Selenium RCサーバーはWebサーバーと通信してページを要求し、ページを受信すると、ブラウザーにページを送信し、オリジンをマスクしてページがSelenium-Coreと同じサーバーからのものであるように見えます（これにより、Selenium-Coreは 同一オリジンポリシーを使用）。</li><li>ブラウザーはWebページを受信し、そのページ用に予約されているフレーム/ウィンドウにレンダリングします。</li></ol><h3 id=heightened-privileges-でブラウザーを起動する>Heightened Privileges でブラウザーを起動する</h3><p>この方法のこのワークフローは、プロキシインジェクションに非常に似ていますが、主な違いは、ブラウザが <em>Heightened Privileges</em> と呼ばれる特別なモードで起動されることです。
これにより、Webサイトは一般に許可されていないこと（SeleniumにXSSを実行したり、ファイルのアップロード入力を入力したり）を許可します。
これらのブラウザーモードを使用することで、Selenium CoreはAUT全体をSelenium RCサーバーに渡すことなく、テスト対象アプリケーションを直接開き、コンテンツを読み取り/操作できます。</p><p>これがアーキテクチャ図です。</p><p><img src=/images/documentation/legacy/selenium_rc_architecture_diagram_2.png alt="アーキテクチャ図 1"></p><p>お気に入りの言語でテストスイートが開始されると、次のようになります。</p><ol><li>クライアント/ドライバーは、selenium-RCサーバーとの接続を確立します。</li><li>Selenium RCサーバーは、WebページにSelenium-CoreをロードするURLを使用してブラウザーを起動します（または古いブラウザーを再利用します）。</li><li>Selenium-Coreは、クライアント/ドライバーから最初の命令を取得します（Selenium RCサーバーへの別のHTTP要求を介して）。</li><li>Selenium-Coreはその最初の命令に基づいて動作し、通常はテスト対象アプリケーションのページを開きます。</li><li>ブラウザはオープン要求を受信し、Webサーバーにページを要求します。
ブラウザがWebページを受信すると、そのページ用に予約されたフレーム/ウィンドウにレンダリングします。</li></ol><h2 id=httpsおよびセキュリティポップアップの処理>HTTPSおよびセキュリティポップアップの処理</h2><p>多くのアプリケーションは、パスワードやクレジットカード情報などの暗号化された情報を送信する必要がある場合、HTTPからHTTPSに切り替えます。
これは、今日の多くのWebアプリケーションに共通しています。
Selenium RCはこれをサポートしています。</p><p>HTTPSサイトが本物であることを確認するには、ブラウザにセキュリティ証明書が必要です。
そうでない場合、ブラウザがHTTPSを使用してテスト対象アプリケーションにアクセスすると、アプリケーションが&rsquo;信頼されていない&rsquo;と見なされます。
これが発生すると、ブラウザにセキュリティポップアップが表示され、Selenium RCを使用してこれらのポップアップを閉じることはできません。</p><p>Selenium RCテストでHTTPSを扱う場合、これをサポートし、セキュリティ証明書を処理する実行モードを使用する必要があります。
テストプログラムでSeleniumを初期化するときに、実行モードを指定します。</p><p>Selenium RC 1.0ベータ2以降では、実行モードに* firefoxまたは* iexploreを使用します。
Selenium RC 1.0 beta 1を含む以前のバージョンでは、実行モードに*chromeまたは *iehtaを使用します。
これらの実行モードを使用すると、特別なセキュリティ証明書をインストールする必要はありません。
Selenium RCがそれを処理します。</p><p>バージョン1.0では、実行モード*firefoxまたは*iexploreが推奨されます。
ただし、*iexploreproxyおよび*firefoxproxyの追加の実行モードがあります。
これらは後方互換性のためにのみ提供されており、レガシーテストプログラムで必要でない限り使用しないでください。
アプリケーションが追加のブラウザウィンドウを開く場合、セキュリティ証明書の処理と複数のウィンドウの実行に制限があります。</p><p>Selenium RCの以前のバージョンでは、 *chromeまたは*iehtaは、HTTPSおよびセキュリティポップアップの処理をサポートする実行モードでした。
これらは&rsquo;実験モード&rsquo;と見なされましたが、非常に安定し、多くの人が使用していました。
Selenium 1.0を使用している場合、これらの古い実行モードは不要であり、使用すべきではありません。</p><h3 id=セキュリティ証明書の説明>セキュリティ証明書の説明</h3><p>通常、ブラウザは、既に所有しているセキュリティ証明書をインストールすることで、テストしているアプリケーションを信頼します。
ブラウザのオプションまたはインターネットのプロパティでこれを確認できます（テスト対象アプリケーションのセキュリティ証明書がわからない場合は、システム管理者に問い合わせてください）。
Seleniumがブラウザーをロードすると、ブラウザーとサーバー間のメッセージをインターセプトするコードを挿入します。
ブラウザーは、信頼されていないソフトウェアがアプリケーションのように見えると解釈するようになりました。
ポップアップメッセージで警告することで応答します。</p><p>これを回避するために、Selenium RC（これをサポートする実行モードを使用する場合）は、ブラウザーがアクセスできる場所でクライアントコンピューターに独自のセキュリティ証明書を一時的にインストールします。
これにより、ブラウザはテスト対象アプリケーションとは異なるサイトにアクセスしていると思わせ、ポップアップを効果的に抑制します。</p><p>Seleniumの以前のバージョンで使用された別の方法は、Seleniumのインストールで提供されるCybervilliansセキュリティ証明書をインストールすることでした。
ただし、ほとんどのユーザーはこれを行う必要がなくなります。
Selenium RCをプロキシインジェクションモードで実行している場合、このセキュリティ証明書を明示的にインストールする必要があるかもしれません。</p><h2 id=追加のブラウザーとブラウザー構成のサポート>追加のブラウザーとブラウザー構成のサポート</h2><p>Selenium APIは、Internet ExplorerとMozilla Firefoxに加えて、複数のブラウザーに対する実行をサポートしています。
サポートされるブラウザーについては、 <a href=https://selenium.dev>https://selenium.dev</a> Webサイトを参照してください。
さらに、ブラウザーが直接サポートされていない場合でも、テストアプリケーションがブラウザーを起動する時に&rdquo;*custom"実行モード（すなわち、*firefoxまたは*iexploreの代わり）を使用して、選択したブラウザーに対してSeleniumテストを実行できます。
これにより、API呼び出し内で実行可能なブラウザーへのパスを渡します。
これは、対話モードのサーバーからも実行できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   <span style=color:#000>cmd</span><span style=color:#ce5c00;font-weight:700>=</span>getNewBrowserSession<span style=color:#000;font-weight:700>&amp;</span><span style=color:#000>1</span><span style=color:#ce5c00;font-weight:700>=</span>*custom c:<span style=color:#4e9a06>\P</span>rogram Files<span style=color:#4e9a06>\M</span>ozilla Firefox<span style=color:#4e9a06>\M</span>yBrowser.exe<span style=color:#000;font-weight:700>&amp;</span><span style=color:#000>2</span><span style=color:#ce5c00;font-weight:700>=</span>http://www.google.com
</span></span></code></pre></div><h3 id=異なるブラウザー設定でテストを実行する>異なるブラウザー設定でテストを実行する</h3><p>通常、Selenium RCはブラウザーを自動的に設定しますが、&rdquo;*custom" 実行モードを使用してブラウザーを起動する場合、自動設定を使用せずにSelenium RCにブラウザーをそのまま強制的に起動させることができます。</p><p>たとえば、次のようなカスタム設定でFirefoxを起動できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   <span style=color:#000>cmd</span><span style=color:#ce5c00;font-weight:700>=</span>getNewBrowserSession<span style=color:#000;font-weight:700>&amp;</span><span style=color:#000>1</span><span style=color:#ce5c00;font-weight:700>=</span>*custom c:<span style=color:#4e9a06>\P</span>rogram Files<span style=color:#4e9a06>\M</span>ozilla Firefox<span style=color:#4e9a06>\f</span>irefox.exe<span style=color:#000;font-weight:700>&amp;</span><span style=color:#000>2</span><span style=color:#ce5c00;font-weight:700>=</span>http://www.google.com
</span></span></code></pre></div><p>この方法でブラウザーを起動する場合、Selenium Serverをプロキシとして使用するようにブラウザーを手動で設定する必要があることに注意してください。
通常、これはブラウザーの設定を開き、&ldquo;localhost:4444"をHTTPプロキシとして指定することを意味しますが、この手順はブラウザーごとに根本的に異なる場合があります。
詳細については、ブラウザーのドキュメントを参照してください。</p><p>Mozillaブラウザは、起動と停止の方法が異なる場合があることに注意してください。
Mozillaブラウザの動作をもう少し予測可能にするために、MOZ_NO_REMOTE環境変数を設定する必要があるかもしれません。
Unixユーザーは、シェルスクリプトを使用してブラウザを起動しないでください。
一般に、バイナリ実行可能ファイル（firefox-binなど）を直接使用することをお勧めします。</p><h2 id=一般的な問題のトラブルシューティング>一般的な問題のトラブルシューティング</h2><p>Selenium RCの使用を開始すると、一般的に発生する可能性のある問題がいくつかあります。
ここでそれらとその解決策を紹介します。</p><h3 id=サーバーに接続できません>サーバーに接続できません</h3><p>テストプログラムがSeleniumサーバーに接続できない場合、Seleniumはテストプログラムで例外をスローします。
このメッセージまたは同様のメッセージが表示されるはずです。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    <span style=color:#4e9a06>&#34;Unable to connect to remote server (Inner Exception Message: 
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>	No connection could be made because the target machine actively 
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>	refused it )&#34;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>	<span style=color:#ce5c00;font-weight:700>(</span>using .NET and XP Service Pack 2<span style=color:#ce5c00;font-weight:700>)</span> 
</span></span></code></pre></div><p>このようなメッセージが表示された場合は、必ずSeleniumサーバーを起動してください。
その場合、SeleniumクライアントライブラリとSeleniumサーバー間の接続に問題があります。</p><p>Selenium RCを使用する場合、ほとんどの人は、同じマシンでテストプログラム（Seleniumクライアントライブラリを使用）とSeleniumサーバーを実行することから始めます。
これを行うには、接続パラメーターとして"localhost"を使用します。
開始する潜在的なネットワークの問題の影響を軽減するため、この方法で開始することをお勧めします。
オペレーティングシステムに一般的なネットワーク設定とTCP/IP設定があると仮定すると、ほとんど問題はありません。
実際、多くの人がこの方法でテストを実行することを選択します。</p><p>ただし、リモートマシンでSeleniumサーバーを実行する場合は、2台のマシン間に有効なTCP/IP接続があると仮定すると、接続は良好です。</p><p>接続に問題がある場合は、 <em>ping</em> 、<em>telnet</em> 、 <em>ifconfig(Unix)/ipconfig(Windows)</em> などの一般的なネットワークツールを使用して、有効なネットワーク接続を確保できます。
これらに不慣れな場合は、システム管理者が支援できます。</p><h3 id=ブラウザをロードできません>ブラウザをロードできません</h3><p>わかりやすいエラーメッセージではありません。
申し訳ありませんが、Seleniumサーバーがブラウザをロードできない場合、このエラーが表示される可能性があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>(</span>500<span style=color:#ce5c00;font-weight:700>)</span> Internal Server Error
</span></span></code></pre></div><p>これは、下記が原因の可能性があります。</p><ul><li>Firefox（Selenium 1.0より前）は、ブラウザーが既に開いており、別のプロファイルを指定していないため、起動できません。
サーバーオプションのFirefoxプロファイルのセクションを参照してください。</li><li>使用している実行モードは、マシン上のどのブラウザとも一致しません。
プログラムでブラウザーを開いたときに、Seleniumに渡したパラメーターを確認してください。</li><li>ブラウザーへのパスを明示的に指定しました（ &ldquo;*custom&rdquo; を使用 - 上記を参照）が、パスが正しくありません。
パスが正しいことを確認してください。
また、ユーザーグループをチェックして、ブラウザーと &ldquo;*custom&rdquo; パラメーターに既知の問題がないことを確認します。</li></ul><h3 id=seleniumはautを見つけることができません>SeleniumはAUTを見つけることができません</h3><p>テストプログラムがブラウザを正常に起動したが、テストしているWebサイトがブラウザに表示されない場合、最も可能性の高い原因は、テストプログラムが正しいURLを使用していないことです。</p><p>これは簡単に起きます。
Selenium-IDEを使用してスクリプトをエクスポートすると、ダミーのURLが挿入されます。
アプリケーションをテストするには、URLを手動で正しいものに変更する必要があります。</p><h3 id=firefoxはプロファイルの準備中にシャットダウンを拒否しました>Firefoxはプロファイルの準備中にシャットダウンを拒否しました</h3><p>これはほとんどの場合、Selenium RCテストプログラムをFirefoxに対して実行しますが、Firefoxブラウザーセッションが既に実行されており、Selenium Serverの起動時に別のプロファイルを指定しなかった場合に発生します。
テストプログラムからのエラーは次のようになります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    Error:  java.lang.RuntimeException: Firefox refused shutdown <span style=color:#204a87;font-weight:700>while</span> 
</span></span><span style=display:flex><span>    preparing a profile 
</span></span></code></pre></div><p>サーバーからの完全なエラーメッセージを次に示します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    16:20:03.919 INFO - Preparing Firefox profile... 
</span></span><span style=display:flex><span>    16:20:27.822 WARN - GET /selenium-server/driver/?cmd<span style=color:#ce5c00;font-weight:700>=</span>getNewBrowserSession<span style=color:#000;font-weight:700>&amp;</span><span style=color:#000>1</span><span style=color:#ce5c00;font-weight:700>=</span>*fir 
</span></span><span style=display:flex><span>    efox<span style=color:#000;font-weight:700>&amp;</span><span style=color:#000>2</span><span style=color:#ce5c00;font-weight:700>=</span>http%3a%2f%2fsage-webapp1.qa.idc.com HTTP/1.1 
</span></span><span style=display:flex><span>    java.lang.RuntimeException: Firefox refused shutdown <span style=color:#204a87;font-weight:700>while</span> preparing a profile 
</span></span><span style=display:flex><span>            at org.openqa.selenium.server.browserlaunchers.FirefoxCustomProfileLaunc 
</span></span><span style=display:flex><span>    her.waitForFullProfileToBeCreated<span style=color:#ce5c00;font-weight:700>(</span>FirefoxCustomProfileLauncher.java:277<span style=color:#ce5c00;font-weight:700>)</span> 
</span></span><span style=display:flex><span>    ... 
</span></span><span style=display:flex><span>    Caused by: org.openqa.selenium.server.browserlaunchers.FirefoxCustomProfileLaunc 
</span></span><span style=display:flex><span>    her<span style=color:#000>$FileLockRemainedException</span>: Lock file still present! C:<span style=color:#4e9a06>\D</span>OCUME~1<span style=color:#4e9a06>\j</span>svec<span style=color:#4e9a06>\L</span>OCALS 
</span></span><span style=display:flex><span>    ~1<span style=color:#4e9a06>\T</span>emp<span style=color:#4e9a06>\c</span>ustomProfileDir203138<span style=color:#4e9a06>\p</span>arent.lock 
</span></span></code></pre></div><p>これを解決するには、個別のFirefoxプロファイルの指定に関するセクションを参照してください。</p><h3 id=バージョン管理の問題>バージョン管理の問題</h3><p>Seleniumのバージョンがブラウザのバージョンをサポートしていることを確認してください。
たとえば、Selenium RC 0.92はFirefox 3をサポートしていません。
時には幸運かもしれません（私はそうでした）。
ただし、使用しているSeleniumのバージョンでサポートされているブラウザのバージョンを確認することを忘れないでください。
疑わしい場合は、ブラウザの最も広く使用されているバージョンでSeleniumの最新リリースバージョンを使用してください。</p><h3 id=サーバーの起動中のエラーメッセージ-unsupported-majorminor-version-490>サーバーの起動中のエラーメッセージ： &ldquo;(Unsupported major.minor version 49.0)&rdquo;</h3><p>このエラーは、正しいバージョンのJavaを使用していないことを示しています。
Selenium ServerにはJava 1.5以降が必要です。</p><p>Javaバージョンを再確認するには、コマンドラインからこれを実行します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   java -version
</span></span></code></pre></div><p>Javaバージョンを示すメッセージが表示されます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   java version <span style=color:#4e9a06>&#34;1.5.0_07&#34;</span>
</span></span><span style=display:flex><span>   Java<span style=color:#ce5c00;font-weight:700>(</span>TM<span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#0000cf;font-weight:700>2</span> Runtime Environment, Standard Edition <span style=color:#ce5c00;font-weight:700>(</span>build 1.5.0_07-b03<span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>   Java HotSpot<span style=color:#ce5c00;font-weight:700>(</span>TM<span style=color:#ce5c00;font-weight:700>)</span> Client VM <span style=color:#ce5c00;font-weight:700>(</span>build 1.5.0_07-b03, mixed mode<span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>低いバージョン番号が表示される場合は、JREを更新するか、単に更新したJREをPATH環境変数に追加する必要があります。</p><h3 id=getnewbrowsersessionコマンドの実行時の404エラー>getNewBrowserSessionコマンドの実行時の404エラー</h3><p>&ldquo;<a href=http://www.google.com/selenium-server/%22>http://www.google.com/selenium-server/"</a> でページを開こうとしているときに404エラーが表示される場合は、Seleniumサーバーがプロキシとして正しく構成されていないことが原因である必要があります。
&ldquo;selenium-server&rdquo; ディレクトリはgoogle.comには存在しません。
プロキシが適切に設定されている場合にのみ存在します。
プロキシ設定は、Firefox、iexplore、opera、またはカスタムでブラウザを起動する方法に大きく依存します。</p><ul><li><p>iexplore: *iexplore を使用してブラウザを起動した場合、Internet Explorerのプロキシ設定に問題がある可能性があります。
Seleniumサーバーは、インターネットオプションコントロールパネルでグローバルプロキシ設定を構成しようとします。
Seleniumサーバーがブラウザーを起動するときに、これらが正しく構成されていることを確認する必要があります。
インターネットオプションコントロールパネルを見てみてください。
&ldquo;接続"タブをクリックし、&ldquo;LAN設定"をクリックします。</p><ul><li>プロキシを使用してテストするアプリケーションにアクセスする必要がある場合は、"-Dhttp.proxyHost"でSeleniumサーバーを起動する必要があります。
詳細については、<code>Proxy Configuration</code>_ を参照してください。</li><li>プロキシを手動で設定してから、 *custom または *iehta ブラウザーランチャーでブラウザーを起動することもできます。</li></ul></li><li><p>custom: *customを使用する場合、プロキシを正しく（手動で）設定する必要があります。
そうしないと、404エラーが発生します。
プロキシ設定が正しく構成されていることを再確認してください。
プロキシを正しく設定したかどうかを確認するには、意図的にブラウザを誤って設定しようとします。
間違ったプロキシサーバーのホスト名または間違ったポートを使用するようにブラウザーを構成してください。
ブラウザのプロキシ設定を正しく構成しなかった場合、ブラウザーはインターネットに接続できなくなります。
これは、関連する設定を調整していることを確認する1つの方法です。</p></li><li><p>他のブラウザ（*firefox、*opera）では、プロキシが自動的にハードコード化されるため、この機能に関する既知の問題はありません。
404エラーが発生し、このユーザーガイドに従っている場合は、ユーザーコミュニティからの助けを得るために、ユーザーグループに結果を慎重に投稿してください。</p></li></ul><h3 id=パーミッション拒否エラー>パーミッション拒否エラー</h3><p>このエラーの最も一般的な理由は、セッションがドメインの境界を越える（たとえば、
http://domain1 から、http://domain2 のページにアクセスします）かプロトコルを切り替える（http://domainX から https://domainX に移動する）ことで同一オリジンポリシーに違反しようとしていることです。</p><p>このエラーは、JavaScriptがまだ使用可能でないUIページ（ページが完全にロードされる前）または使用できなくなった（ページのアンロードが開始された後）UIオブジェクトを見つけようとした場合にも発生します。
これは、AJAXページで最も一般的に発生します。
AJAXページは、大きなページとは独立してロードおよび/またはリロードするページまたはサブフレームのセクションで動作します。</p><p>このエラーは断続的に発生する場合があります。
問題はデバッガーのオーバーヘッドがシステムに追加されたときに再現できない競合状態に起因するため、デバッガーで問題を再現することはできません。
パーミッションの問題については、チュートリアルで詳しく説明します。
<code>The Same Origin Policy</code>、<code>Proxy Injection</code>に関する章を注意深くお読みください。</p><h3 id=ブラウザーポップアップウィンドウの処理>ブラウザーポップアップウィンドウの処理</h3><p>Seleniumテスト中に取得できる"ポップアップ"にはいくつかの種類があります。
テスト対象アプリケーションではなくブラウザによって開始されたSeleniumコマンドを実行しても、これらのポップアップを閉じることができない場合があります。
これらの管理方法を知る必要があるかもしれません。
ポップアップの種類ごとに異なる方法で対処する必要があります。</p><ul><li><p>HTTP基本認証ダイアログ：これらのダイアログは、サイトにログインするためのユーザー名/パスワードの入力を求めます。
HTTP基本認証を必要とするサイトにログインするには、次のように、<code>RFC 1738</code>で説明されているように、URLでユーザー名とパスワードを使用します。 open(&ldquo;<a href=http://myusername:myuserpassword@myexample.com/blah/blah/blah%22)>http://myusername:myuserpassword@myexample.com/blah/blah/blah")</a>.</p></li><li><p>SSL証明書の警告：Selenium RCは、SSL証明書がプロキシとして有効になっている場合、自動的になりすまそうとします。
詳細については、HTTPSの章を参照してください。
ブラウザーが正しく設定されている場合、SSL証明書の警告は表示されませんが、危険な"CyberVillains"SSL認証局を信頼するようにブラウザーを設定する必要があります。
繰り返しますが、これを行う方法についてはHTTPSセクションを参照してください。</p></li><li><p>モーダルJavaScriptアラート/確認/プロンプトダイアログ：Seleniumはそれらのダイアログを（window.alert、window.confirm、window.promptを置き換えることで）隠そうとするため、ページの実行が停止されません。
アラートポップアップが表示されている場合は、ページの読み込みプロセス中に発生した可能性があります。
通常、ページを保護するには早すぎます。
Seleneseには、アラートと確認のポップアップをアサートまたは検証するためのコマンドが含まれています。
第4章のこれらのトピックに関する章を参照してください。</p></li></ul><h3 id=linuxでfirefoxブラウザーセッションが閉じないのはなぜですか>Linuxで、Firefoxブラウザーセッションが閉じないのはなぜですか？</h3><p>Unix/Linuxでは、&ldquo;firefox-bin"を直接呼び出す必要があるため、実行可能ファイルがパス上にあることを確認してください。
シェルスクリプトを介してFirefoxを実行している場合、ブラウザーを終了するときが来ると、Selenium RCはシェルスクリプトを終了し、ブラウザーを実行したままにします。
このように、firefox-binへのパスを直接指定できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   <span style=color:#000>cmd</span><span style=color:#ce5c00;font-weight:700>=</span>getNewBrowserSession<span style=color:#000;font-weight:700>&amp;</span><span style=color:#000>1</span><span style=color:#ce5c00;font-weight:700>=</span>*firefox /usr/local/firefox/firefox-bin<span style=color:#000;font-weight:700>&amp;</span><span style=color:#000>2</span><span style=color:#ce5c00;font-weight:700>=</span>http://www.google.com
</span></span></code></pre></div><h3 id=firefox-chrome-はカスタムプロファイルでは機能しません>Firefox *chrome はカスタムプロファイルでは機能しません</h3><p>Firefoxプロファイルのフォルダー -> prefs.js -> user_pref(&ldquo;browser.startup.page&rdquo;, 0); を確認してください。
次の行を &ldquo;//user_pref(&ldquo;browser.startup.page&rdquo;, 0);&rdquo; のようにコメントアウトして、再度試してください。</p><h3 id=親ページの読み込み中にカスタムポップアップを読み込むことはできますかつまり親ページのjavascript-windowonload関数が実行される前>親ページの読み込み中にカスタムポップアップを読み込むことはできますか（つまり、親ページのjavascript window.onload()関数が実行される前）？</h3><p>いいえ。Seleniumはインターセプターに依存しており、ロード中のウィンドウ名を決定します。
これらのインターセプターは、ウィンドウがonload()関数の後にロードされた場合、新しいウィンドウをキャッチするのに最適に機能します。
Seleniumは、onload関数の前にロードされたウィンドウを認識しない場合があります。</p><h3 id=linux上のfirefox>Linux上のFirefox</h3><p>Unix/Linuxでは、1.0より前のSeleniumのバージョンは &ldquo;firefox-bin&rdquo; を直接呼び出す必要があったため、以前のバージョンを使用している場合は、実際の実行可能ファイルがパス上にあることを確認してください。</p><p>ほとんどのLinuxディストリビューションでは、実際の <em>firefox-bin</em> は次の場所にあります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   /usr/lib/firefox-x.x.x/ 
</span></span></code></pre></div><p>x.x.xは現在使用しているバージョン番号です。
そのため、そのパスをユーザーのパスに追加します。
以下を.bashrcファイルに追加する必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   <span style=color:#204a87>export</span> <span style=color:#000>PATH</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;</span><span style=color:#000>$PATH</span><span style=color:#4e9a06>:/usr/lib/firefox-x.x.x/&#34;</span>
</span></span></code></pre></div><p>必要に応じて、次のようにテストで直接firefox-binへのパスを指定できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   <span style=color:#4e9a06>&#34;*firefox /usr/lib/firefox-x.x.x/firefox-bin&#34;</span>
</span></span></code></pre></div><h3 id=ieおよびスタイル属性>IEおよびスタイル属性</h3><p>Internet Explorerでテストを実行していて、style属性を使用して要素を見つけられない場合、例えば、次のような場合があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    //td<span style=color:#ce5c00;font-weight:700>[</span>@style<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;background-color:yellow&#34;</span><span style=color:#ce5c00;font-weight:700>]</span>
</span></span></code></pre></div><p>これはFirefox、Opera、またはSafariで完全に機能しますが、IEでは機能しません。
IEは <code>@style</code> のキーを大文字として解釈します。
したがって、ソースコードが小文字であっても、下記のように使用したほうがよいです。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>    //td<span style=color:#ce5c00;font-weight:700>[</span>@style<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;BACKGROUND-COLOR:yellow&#34;</span><span style=color:#ce5c00;font-weight:700>]</span>
</span></span></code></pre></div><p>テストが複数のブラウザーで動作することを意図している場合、これは問題ですが、簡単にテストをコーディングして状況を検出し、IEでのみ動作する代替ロケーターを試すことができます。</p><h3 id=エラーが発生しました-googlechromeブラウザーのシャットダウン時にcannot-convert-object-to-primitive-value>エラーが発生しました-*googlechromeブラウザーのシャットダウン時に"Cannot convert object to primitive value&rdquo;</h3><p>このエラーを回避するには、同一オリジンポリシーチェックを無効にするオプションでブラウザを起動する必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   selenium.start<span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;commandLineFlags=--disable-web-security&#34;</span><span style=color:#ce5c00;font-weight:700>)</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h3 id=ieでエラーが発生しました---couldnt-open-app-window-is-the-pop-up-blocker-enabled>IEでエラーが発生しました - &ldquo;Couldn&rsquo;t open app window; is the pop-up blocker enabled?&rdquo;</h3><p>このエラーを回避するには、ブラウザを設定する必要があります。
ポップアップブロッカーを無効にし、ツール &#187; オプション &#187;セキュリティで&rsquo;保護モードを有効にする&rsquo;オプションをオフにします。</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>ブラウザーは、 localhost:4444 をHTTPプロキシーとして設定した構成プロファイルで起動されます。
これが、ブラウザーが行うHTTP要求がSeleniumサーバーを通過し、レスポンスが実サーバーからではなく通過する理由です。&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>プロキシは、2つの部分の間でボールを渡す中間の第三者です。
AUTをブラウザに配信する"Webサーバー"として機能します。
プロキシであるため、Seleniumサーバーはテスト対象アプリケーションの実際のURLについて"嘘をつく"機能を提供します。&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=td-content style=page-break-before:always><h1 id=pg-ede019ded97a1a192cb78af69ca6d9e0>2 - Selenium 2</h1><div class=lead>Selenium 2 was a rewrite of Selenium 1 that was implemented with WebDriver code.</div></div><div class=td-content><h1 id=pg-a933946e45b79ed277508ff2adf95523>2.1 - RCからWebDriverへの移行</h1><h2 id=selenium-webdriverに移行する方法>Selenium WebDriverに移行する方法</h2><p>Selenium 2を採用する際によくある質問は、「既存のテストセットに新しいテストを追加するときに正しいことは何ですか？」ということです。
フレームワークを初めて使用するユーザーは、新しいWebDriver APIを使用してテストを作成することから始めることができます。
しかし、既存のテストスイートを既に持っているユーザーはどうでしょうか？
このガイドは、既存のテストを新しいAPIに移行し、WebDriverが提供する新機能を使用してすべての新しいテストを作成する方法を示すことを目的としています。</p><p>ここで紹介する方法は、1回の大規模なプッシュですべてをやり直す必要のない、WebDriver APIへの断片的な移行について説明しています。
これは、既存のテストの移行により多くの時間を割り当てることができることを意味します。
これにより、どこに労力を費やすかを決定しやすくなります。</p><p>このガイドは、移行を行うための最良のサポートがあるため、Javaを使用して書かれています。
他の言語用のより優れたツールを提供するため、このガイドはそれらの言語を含むように拡張されます。</p><h2 id=webdriverに移行する理由>WebDriverに移行する理由</h2><p>一連のテストをあるAPIから別のAPIに移動するには、多大な労力が必要です。
なぜあなたとあなたのチームはこの動きを検討するのですか？
WebDriverを使用するためにSeleniumテストを移行することを検討する必要があるいくつかの理由を以下に示します。</p><ul><li>小さくコンパクトなAPI。
WebDriverのAPIは、元のSelenium RC APIよりもオブジェクト指向です。
これにより、作業が容易になります。</li><li>ユーザー操作のより良いエミュレーション。
可能な場合、WebDriverはWebページと対話するためにネイティブイベントを使用します。
これは、ユーザーがサイトやアプリを操作する方法をより厳密に模倣しています。
さらに、WebDriverは、サイトとの複雑な相互作用をモデル化できる高度なユーザーインタラクションAPIを提供します。</li><li>ブラウザーベンダーによるサポート。
Opera、Mozilla、GoogleはすべてWebDriverの開発に積極的に参加しており、それぞれにフレームワークの改善に取り組んでいるエンジニアがいます。
多くの場合、これはWebDriverのサポートがブラウザー自体に組み込まれていることを意味します。
テストは可能な限り高速で安定して実行されます。</li></ul><h2 id=はじめる前に>はじめる前に</h2><p>移行プロセスを可能な限り簡単にするために、すべてのテストが最新のSeleniumリリースで正しく実行されることを確認してください。
これは当たり前のように聞こえるかもしれませんが、言ってもらうのが最善です！</p><h2 id=はじめに>はじめに</h2><p>移行を開始する最初の手順は、Seleniumのインスタンスの取得方法を変更することです。
Selenium RCを使用する場合、これは次のように行われます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>Selenium</span> <span style=color:#000>selenium</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>DefaultSelenium</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;localhost&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;*firefox&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;http://www.yoursite.com&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>start</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span></code></pre></div><p>これは次のように置き換える必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>WebDriver</span> <span style=color:#000>driver</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>FirefoxDriver</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#000>Selenium</span> <span style=color:#000>selenium</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>WebDriverBackedSelenium</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>driver</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;http://www.yoursite.com&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><h2 id=次のステップ>次のステップ</h2><p>テストがエラーなしで実行されたら、次の段階は実際のテストコードを移行してWebDriver APIを使用することです。
コードがどれだけ適切に抽象化されているかによって、これは短いプロセスまたは長いプロセスになります。
どちらの場合でも、アプローチは同じであり、簡単に要約できます。
編集するときに新しいAPIを使用するようにコードを変更します。</p><p>基になるWebDriver実装をSeleniumインスタンスから抽出する必要がある場合は、WrapsDriverにキャストするだけです。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>WebDriver</span> <span style=color:#000>driver</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#ce5c00;font-weight:700>((</span><span style=color:#000>WrapsDriver</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>getWrappedDriver</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span></code></pre></div><p>これにより、通常どおりSeleniumインスタンスの受け渡しを続けることができますが、必要に応じてWebDriverインスタンスのラップを解除できます。</p><p>ある時点で、コードベースは主に新しいAPIを使用します。
この時点で、WebDriverを使用して関係を反転し、オンデマンドでSeleniumインスタンスをインスタンス化できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>Selenium</span> <span style=color:#000>selenium</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>WebDriverBackedSelenium</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>driver</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>baseUrl</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><h2 id=一般的な問題>一般的な問題</h2><p>幸いなことに、この移行を最初に行ったのはあなたではないので、他の人が経験した一般的な問題とその解決方法を以下に示します。</p><h3 id=クリックと入力がより完全に>クリックと入力がより完全に</h3><p>Selenium RCテストの一般的なパターンは、以下のとおりです。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;exciting tex&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>keyDown</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;t&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>keyPress</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;t&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>keyUp</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;t&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>これは、ユーザーがページと対話した場合に通常発生するすべてのイベントも発生せずに、&ldquo;type"が識別された要素のコンテンツを単に置き換えるという事実に依存しています。
&ldquo;key*&rdquo; の最後の直接呼び出しにより、JSハンドラーが期待どおりに起動します。</p><p>WebDriverBackedSeleniumを使用する場合、フォームフィールドに入力した結果は &ldquo;exciting texttt&rdquo; になります。
期待したものではありません！
これは、WebDriverがユーザーの動作をより正確にエミュレートするため、ずっとイベントを発火させていたためです。</p><p>この同じ事実により、Selenium 1テストよりも早くページの読み込みが発生する場合があります。
&ldquo;StaleElementException"がWebDriverによってスローされた場合、これが発生したことを確認できます。</p><h3 id=waitforpagetoloadがすぐに戻る>WaitForPageToLoadがすぐに戻る</h3><p>ページの読み込みが完了したことを発見するのは難しい仕事です。
&ldquo;ロードイベントが発生したとき&rdquo;、&ldquo;すべてのAJAXリクエストが完了したとき&rdquo;、&ldquo;ネットワークトラフィックがないとき&rdquo;、&ldquo;document.readyStateが変更されたとき&rdquo;、または他の全体的な何かを意味しますか？</p><p>WebDriverは元のSeleniumの動作をシミュレートしようとしますが、これはさまざまな理由で常に完全に機能するとは限りません。
最も一般的な理由は、ページの読み込みがまだ開始されていないことと、ページ呼び出しがメソッド呼び出し間で完了したことの違いを見分けることが難しいことです。
これは、ページの読み込みが完了する前（または開始される前）に制御がテストに返されることを意味する場合があります。</p><p>これに対する解決策は、特定の何かを待つことです。
一般的に、これは次にやり取りしたい要素、または特定の値に設定されるJavascript変数のためのものです。
例えば、</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>Wait</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>WebDriver</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>wait</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>WebDriverWait</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>driver</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>Duration</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>ofSeconds</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>WebElement</span> <span style=color:#000>element</span><span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>wait</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>until</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>visibilityOfElementLocated</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>By</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;some_id&#34;</span><span style=color:#ce5c00;font-weight:700>)));</span>
</span></span></code></pre></div><p>&ldquo;visibilityOfElementLocated&rdquo; は次のように実装されます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>ExpectedCondition</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>WebElement</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>visibilityOfElementLocated</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>final</span> <span style=color:#000>By</span> <span style=color:#000>locator</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ExpectedCondition</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>WebElement</span><span style=color:#ce5c00;font-weight:700>&gt;()</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>WebElement</span> <span style=color:#000>apply</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>WebDriver</span> <span style=color:#000>driver</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>WebElement</span> <span style=color:#000>toReturn</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>driver</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>findElement</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>locator</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>toReturn</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>isDisplayed</span><span style=color:#ce5c00;font-weight:700>())</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>toReturn</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>};</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>これは複雑に見えるかもしれませんが、ほとんどすべての定型コードです。
唯一の興味深い点は、 &ldquo;apply&rdquo; メソッドが &ldquo;null&rdquo; でもBoolean.FALSEでもないものを返すまで、 &ldquo;ExpectedCondition&rdquo; が繰り返し評価されることです。</p><p>もちろん、これらの &ldquo;wait&rdquo; 呼び出しをすべて追加すると、コードが混乱する可能性があります。
その場合で、ニーズが単純な場合は、暗黙的な待機の使用を検討してください。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>driver</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>manage</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>timeouts</span><span style=color:#ce5c00;font-weight:700>().</span><span style=color:#c4a000>implicitlyWait</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>TimeUnit</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>SECONDS</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>これにより、要素が見つかるたびに、要素が存在しない場合は、存在するか、30秒が経過するまで位置が再試行されます。</p><h3 id=xpathまたはcssセレクターによる検索は常に機能するとは限りませんがselenium1では機能します>XPathまたはCSSセレクターによる検索は常に機能するとは限りませんが、Selenium1では機能します</h3><p>Selenium 1では、xpathがブラウザ自体の機能ではなく、バンドルされたライブラリを使用するのが一般的でした。
代替手段がない限り、WebDriverは常にネイティブブラウザーメソッドを使用します。
つまり、一部のブラウザでは複雑なxpath式が壊れる場合があります。</p><p>Selenium 1のCSSセレクターは、Sizzleライブラリを使用して実装されました。
これにより、CSS Selector仕様のスーパーセットが実装され、どこで境界を越えたかが常に明確になるとは限りません。
WebDriverBackedSeleniumを使用していて、要素の検索にCSSセレクターの代わりにSizzleロケーターを使用している場合、コンソールに警告が記録されます。
特に要素を見つけることができないためにテストが失敗する場合、これらを探すのに時間をかける価値があります。</p><h3 id=browserbotはありません>Browserbotはありません</h3><p>Selenium RCはSelenium Coreに基づいていたため、Javascriptを実行すると、Selenium Coreの一部にアクセスして作業を簡単にすることができました。
WebDriverはSelenium Coreに基づいていないため、これは不可能です。
Selenium Coreを使用しているかどうかをどのように確認できますか？
シンプル！ &ldquo;getEval&rdquo; または同様の呼び出しが、評価されたJavascriptで &ldquo;selenium&rdquo; または &ldquo;browserbot&rdquo; を使用しているかどうかを確認してください。</p><p>browserbotを使用して、テストの現在のウィンドウまたはドキュメントへのハンドルを取得している可能性があります。
幸いなことに、WebDriverは常に現在のウィンドウのコンテキストでJSを評価するため、&ldquo;ウィンドウ"または"ドキュメント"を直接使用できます。</p><p>または、Browserbotを使用して要素を見つけることもできます。
WebDriverでは、これを行うためのイディオムは、最初に要素を見つけ、それを引数としてJavascriptに渡すことです。
従って、</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>String</span> <span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getEval</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;selenium.browserbot.findElement(&#39;id=foo&#39;, browserbot.getCurrentWindow()).tagName&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>このようになります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>WebElement</span> <span style=color:#000>element</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>driver</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>findElement</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>By</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;foo&#34;</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>String</span> <span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>String</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>((</span><span style=color:#000>JavascriptExecutor</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#000>driver</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>executeScript</span><span style=color:#ce5c00;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;return arguments[0].tagName&#34;</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#000>element</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>渡された &ldquo;element&rdquo; 変数が、JS標準の &ldquo;arguments&rdquo; 配列の最初の項目としてどのように表示されるかに注目してください。</p><h3 id=executing-javascript-doesnt-return-anything>Executing Javascript Doesn&rsquo;t Return Anything</h3><p>WebDriverのJavascriptExecutorは、すべてのJSをラップし、匿名式として評価します。
これは、 &ldquo;return&rdquo; キーワードを使用する必要があることを意味します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#000>String</span> <span style=color:#000>title</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>selenium</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>getEval</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;browserbot.getCurrentWindow().document.title&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div><p>このようになります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>((</span><span style=color:#000>JavascriptExecutor</span><span style=color:#ce5c00;font-weight:700>)</span> <span style=color:#000>driver</span><span style=color:#ce5c00;font-weight:700>).</span><span style=color:#c4a000>executeScript</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;return document.title;&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-3cf3554f61b84dbd1b188df5fe81a963>2.2 - リモートWebDriverサーバー</h1><p>サーバーは、テストするブラウザーがインストールされたマシンで常に実行されます。
サーバーは、コマンドラインから、またはコード設定を通じて使用できます。</p><h2 id=コマンドラインからサーバーを起動する>コマンドラインからサーバーを起動する</h2><p>一旦、<code>selenium-server-standalone-{VERSION}.jar</code>をダウンロードしたら、テストしたいブラウザーのあるコンピューターに配置します。
次に、jarを含むディレクトリから、次のコマンドを実行します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-standalone-<span style=color:#ce5c00;font-weight:700>{</span>VERSION<span style=color:#ce5c00;font-weight:700>}</span>.jar
</span></span></code></pre></div><h2 id=サーバーを実行するにあたって考慮すること>サーバーを実行するにあたって考慮すること</h2><p>呼び出し元は、<code>Selenium#stop()</code>または<code>WebDriver#quit</code>を呼び出して、各セッションを適切に終了すべきです。</p><p>selenium-serverは、進行中の各セッションのメモリ内ログを保持します。
これらのログは、<code>Selenium#stop()</code>または<code>WebDriver#quit</code>が呼び出されるとクリアされます。
これらのセッションの終了を忘れると、サーバーでメモリリークが発生する可能性があります。
非常に長時間実行されるセッションを維持する場合は、時々停止または終了する必要があります（または-Xmx jvmオプションでメモリを増やします）。</p><h2 id=タイムアウト-version-221以降>タイムアウト (version 2.21以降)</h2><p>サーバーには2つの異なるタイムアウトがあり、次のように設定できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-standalone-<span style=color:#ce5c00;font-weight:700>{</span>VERSION<span style=color:#ce5c00;font-weight:700>}</span>.jar -timeout<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>20</span> -browserTimeout<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>60</span>
</span></span></code></pre></div><ul><li>browserTimeout<ul><li>ブラウザーのハングを許可する時間を制御します（値は秒単位）。</li></ul></li><li>timeout<ul><li>セッションが回収されるまでにクライアントがいなくなる時間を制御します（値は秒単位）。</li></ul></li></ul><p>システムプロパティ<code>selenium.server.session.timeout</code>は、2.21からサポートされなくなりました。</p><p><code>browserTimeout</code>は、通常のタイムアウトメカニズムが失敗した場合の予備のタイムアウトメカニズムであることに注意してください。これは主にグリッド/サーバー環境で使用され、クラッシュ/失われたプロセスが長く滞留、ランタイム環境を汚染しないようにします。</p><h2 id=プログラムでサーバーを構成する>プログラムでサーバーを構成する</h2><p>理論的には、プロセスは<code>DriverServlet</code>をURLにマッピングするのと同じくらい簡単ですが、ページを全体的にコードで構成されたJettyなどの軽量コンテナでホストすることもできます。これを行う手順は次のとおりです。</p><p><code>selenium-server.zip</code>をダウンロードして解凍します。
JARをCLASSPATHに配置します。
<code>AppServer</code>という新しいクラスを作成します。
ここでは、Jettyを使用しているので、それも<a href=//www.eclipse.org/jetty/download.html>ダウンロード</a>する必要があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.mortbay.jetty.Connector</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.mortbay.jetty.Server</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.mortbay.jetty.nio.SelectChannelConnector</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.mortbay.jetty.security.SslSocketConnector</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.mortbay.jetty.webapp.WebAppContext</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>javax.servlet.Servlet</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>java.io.File</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>org.openqa.selenium.remote.server.DriverServlet</span><span style=color:#ce5c00;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>AppServer</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>private</span> <span style=color:#000>Server</span> <span style=color:#000>server</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>Server</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>AppServer</span><span style=color:#ce5c00;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>throws</span> <span style=color:#000>Exception</span> <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>WebAppContext</span> <span style=color:#000>context</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>WebAppContext</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#000>context</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>setContextPath</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#000>context</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>setWar</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>File</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#4e9a06>&#34;.&#34;</span><span style=color:#ce5c00;font-weight:700>));</span>
</span></span><span style=display:flex><span>    <span style=color:#000>server</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>addHandler</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>context</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>addServlet</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>DriverServlet</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>,</span> <span style=color:#4e9a06>&#34;/wd/*&#34;</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>SelectChannelConnector</span> <span style=color:#000>connector</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>SelectChannelConnector</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#000>connector</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>setPort</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3001</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#000>server</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>addConnector</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>connector</span><span style=color:#ce5c00;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>server</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#c4a000>start</span><span style=color:#ce5c00;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-eb898089792ca95955a3e178c30668c5>3 - Selenium 3</h1><div class=lead>Selenium 3 was the implementation of WebDriver without the Selenium RC Code. It has since been replaced with Selenium 4, which implements the W3C WebDriver specification.</div></div><div class=td-content><h1 id=pg-7de6b958ae01ee49598af67bc8beb54b>3.1 - Grid 3</h1><div class=lead>Selenium Grid 3 supported WebDriver without Selenium RC code. Grid 3 was completely rewritten for the new Grid 4.</div><p><a href=/ja/documentation/grid/>Grid 4</a></p><p><em>Selenium Grid</em> は、SeleniumテストがコマンドをリモートWebブラウザーインスタンスにルーティングできるようにする賢いプロキシサーバーです。
その目的は、複数のマシンで並行してテストを実行する簡単な方法を提供することです。</p><p>Selenium Gridでは、1つのサーバーが、JSON形式のテストコマンドを1つ以上の登録済みのグリッドノードにルーティングするハブとして機能します。
テストはハブに接続して、リモートブラウザーインスタンスへのアクセスを取得します。
ハブには、アクセスを提供する登録済みサーバーのリストがあり、これらのインスタンスを制御できます。</p><p>Selenium Gridを使用すると、複数のマシンで並行してテストを実行し、さまざまなブラウザーバージョンとブラウザー構成を（個々のテストではなく）一元的に管理できます。</p><p>Selenium Gridは特効薬ではありません。
一般的な委譲および配布の問題のサブセットを解決しますが、たとえばインフラストラクチャを管理せず、特定のニーズに適さない場合があります。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b440ee8870fc93b6895529a575702cfd>3.2 - 独自のグリッドを設定する</h1><div class=lead>Quick start guide for setting up Grid 3.</div><p>Selenium Gridを使用するには、ノード用の独自のインフラストラクチャを維持する必要があります。
これは面倒で時間のかかる作業になる可能性があるため、多くの組織はこのインフラストラクチャを提供するためにAmazon EC2やGoogle ComputeなどのIaaSプロバイダーを使用しています。</p><p>他の選択肢として、クラウドのサービスとしてSelenium Gridを提供するSauce LabsやTesting Botなどのプロバイダーの使うこともできます。
独自のハードウェアでノードを実行することも確かに可能です。
この章では、独自のノードインフラストラクチャを備えた独自のグリッドを実行するオプションについて詳しく説明します。</p><h2 id=クイックスタート>クイックスタート</h2><p>この例では、Selenium 2グリッドハブを起動し、WebDriverノードとSelenium 1 RCレガシーノードの両方を登録する方法を示します。 また、Javaからグリッドを呼び出す方法も示します。
ここでは、ハブとノードが同じマシンで実行されていますが、もちろん、selenium-server-standaloneを複数のマシンにコピーできます。</p><p><code>selenium-server-standalone</code>パッケージには、グリッドの実行に必要なハブ、WebDriver、およびレガシーRCが含まれています。 <em>ant</em> はもう必要ありません。
<code>selenium-server-standalone.jar</code>は <a href=https://selenium.dev/downloads/>https://selenium.dev/downloads/</a> からダウンロードできます。</p><h3 id=ステップ1ハブを開始する>ステップ1：ハブを開始する</h3><p>ハブは、テストリクエストを受信し、それらを適切なノードに配布する中心点です。
配布は機能ベースで行われます。
つまり、一連の機能を必要とするテストは、その機能セットまたは機能のサブセットを提供するノードにのみ配布されます。</p><p>テストのDesiredCapabilitiesは、 <em>任意の</em> を意味するため、ハブはDesiredCapabilitiesの設定に完全に一致するノードを見つけることを保証できません。</p><p>コマンドプロンプトを開き、<code>selenium-server-standalone.jar</code>ファイルをコピーしたディレクトリに移動します。 ハブを起動するには、<code>-role hub</code>フラグをスタンドアロンサーバーに渡します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-standalone.jar -role hub
</span></span></code></pre></div><p>ハブはデフォルトでポート4444をリッスンします。 ブラウザーウィンドウを開いて <a href=http://localhost:4444/grid/console>http://localhost:4444/grid/console</a> に移動すると、ハブのステータスを表示できます。</p><p>デフォルトのポートを変更するには、コマンドを実行するときにリッスンするポートを表す整数を持つオプションの <code>-port</code> フラグを追加できます。
また、JSON構成ファイル（以下を参照）に表示される他のすべてのオプションは、可能なコマンドラインフラグです。</p><p>確かに上記の簡単なコマンドだけでうまくいくことができますが、より高度な構成が必要な場合は、JSON形式の構成ファイルを指定して、開始時にハブを構成することもできます。
JSON形式の構成ファイルを指定して開始時にハブを構成する方法は以下のとおりです。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-standalone.jar -role hub -hubConfig hubConfig.json -debug
</span></span></code></pre></div><p>以下に、 <code>hubConfig.json</code> ファイルの例を示します。
ステップ2でノード構成ファイルを提供する方法について詳しく説明します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;_comment&#34;</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Configuration for Hub - hubConfig.json&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;host&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>ip</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;maxSession&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;port&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;cleanupCycle&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>5000</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;timeout&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>300000</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;newSessionWaitTimeout&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>-1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;servlets&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;prioritizer&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;capabilityMatcher&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;org.openqa.grid.internal.utils.DefaultCapabilityMatcher&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;throwOnCapabilityNotPresent&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;nodePolling&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>180000</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;platform&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;WINDOWS&#34;</span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=ステップ2ノードを起動する>ステップ2：ノードを起動する</h3><p>新しいWebDriver機能を備えたグリッドを実行するか、Selenium 1 RC機能を備えたグリッドを実行するか、または両方を同時に実行するかに関係なく、同じ <code>selenium-server-standalone.jar</code> ファイルを使用してノードを起動します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-standalone.jar -role node -hub http://localhost:4444
</span></span></code></pre></div><p><code>-port</code> フラグでポートが指定されていない場合、空いているポートが選択されます。
1台のマシンで複数のノードを実行できますが、実行する場合は、システムメモリリソースとスクリーンショットの問題をテストで確認する必要があることに注意する必要があります。</p><h4 id=オプションを使用したノード構成>オプションを使用したノード構成</h4><p>前述のように、下位互換性のために、&ldquo;wd"および"rc"ロールは"node"ロールの有効なサブセットのままです。
ただし、これらのロールは、対応するAPIへのリモート接続の種類を制限し、&ldquo;node"はRCとWebDriverの両方のリモート接続を許可します。</p><p>コマンドラインでもJVMプロパティを（ <em>-jar引数の前に</em> <code>-D</code>フラグを使用して）渡すと、これらが取得され、ノードに伝播されます。</p><p><code>-Dwebdriver.chrome.driver=chromedriver.exe</code></p><h4 id=jsonを使用したノード構成>JSONを使用したノード構成</h4><p>JSON設定ファイルで構成されたグリッドノードを起動することもできます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -Dwebdriver.chrome.driver<span style=color:#ce5c00;font-weight:700>=</span>chromedriver.exe -jar selenium-server-standalone.jar -role node -nodeConfig node1Config.json
</span></span></code></pre></div><p>そして、これは <code>nodeConfig.json</code> ファイルの例です。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;capabilities&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;browserName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;firefox&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;acceptSslCerts&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;javascriptEnabled&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;takesScreenshot&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;firefox_profile&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;browser-version&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;27&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;platform&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;WINDOWS&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;maxInstances&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;firefox_binary&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;cleanSession&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;browserName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;chrome&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;maxInstances&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;platform&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;WINDOWS&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;webdriver.chrome.driver&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;C:/Program Files (x86)/Google/Chrome/Application/chrome.exe&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;browserName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;internet explorer&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;maxInstances&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;platform&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;WINDOWS&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;webdriver.ie.driver&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;C:/Program Files (x86)/Internet Explorer/iexplore.exe&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;configuration&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;_comment&#34;</span> <span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Configuration for Node&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;cleanUpCycle&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2000</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;timeout&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>30000</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;proxy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;org.openqa.grid.selenium.proxy.WebDriverRemoteProxy&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;port&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>5555</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;host&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#a40000>ip</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;register&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;hubPort&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>4444</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;maxSession&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>5</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><code>-host</code> フラグに関する注意</p><p>ハブとノードの両方で、<code>-host</code>フラグが指定されていない場合、デフォルトで<code>0.0.0.0</code>を使用します。
これにより、マシンのすべてのパブリック（非ループバック）IPv4インターフェイスにバインドされます。
特別なネットワーク構成または追加のネットワークインターフェイスを作成するコンポーネントがある場合は、<code>-host</code>フラグにハブ/ノードが別のマシンから到達できる値を設定することをお勧めします。</p><h4 id=ポートを指定する>ポートを指定する</h4><p>ハブで使用されるデフォルトのTCP / IPポートは4444です。
ポートを変更する必要がある場合は、上記の構成を使用してください。</p><h2 id=トラブルシューティング>トラブルシューティング</h2><h3 id=ログファイルを使用する>ログファイルを使用する</h3><p>高度なトラブルシューティングのために、システムメッセージを記録するログファイルを指定できます。 -log引数を使用してSelenium GRIDハブまたはノードを起動します。
以下の例をご覧ください。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-standalone.jar -role hub -log log.txt
</span></span></code></pre></div><p>お気に入りのテキストエディターを使用してログファイル（上記の例ではlog.txt）を開き、問題が発生した場合に"エラー"ログを見つけます。</p><h3 id=-debug-引数を使用する><code>-debug</code> 引数を使用する</h3><p>-debug引数を使用して、デバッグログをコンソールに出力することもできます。
<code>-debug</code> 引数を使用してSeleniumグリッドハブまたはノードを起動します。
以下の例をご覧ください。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>java -jar selenium-server-standalone.jar -role hub -debug
</span></span></code></pre></div><h2 id=警告>警告</h2><p>Selenium Gridは、適切なファイアウォールアクセス許可を使用して外部アクセスから保護する必要があります。</p><p>グリッドを保護しないと、次の1つ以上が発生する可能性があります。</p><ul><li>グリッドインフラストラクチャへのオープンアクセスを提供します。</li><li>サードパーティが内部Webアプリケーションおよびファイルにアクセスすることを許可します。</li><li>サードパーティにカスタムバイナリの実行を許可します。</li></ul><p><a href=//labs.detectify.com>Detectify</a> に関するこのブログ投稿をご覧ください。
これは、公開されたグリッドが悪用される可能性のある概要を示しています。 <a href=//labs.detectify.com/2017/10/06/guest-blog-dont-leave-your-grid-wide-open/>Don&rsquo;t Leave your Grid Wide Open</a></p><h2 id=docker-selenium>Docker Selenium</h2><p><a href=//www.docker.com/>Docker</a> は、コンテナと呼ばれる単位でSelenium Gridインフラストラクチャをプロビジョニングおよびスケーリングする便利な方法を提供します。
コンテナは、さまざまなマシンで信頼性と再現性のある方法で、すべての依存関係を含む目的のアプリケーションを実行するために必要なすべてを含むソフトウェアの標準化されたユニットです。</p><p>Seleniumプロジェクトは、ダウンロードして実行して作業用グリッドを迅速に起動および実行できる一連のDockerイメージを保持しています。 ノードはFirefoxとChromeの両方で使用できます。
グリッドのプロビジョニング方法の詳細は、 <a href=//github.com/SeleniumHQ/docker-selenium>Docker Selenium</a> リポジトリ内にあります。</p><h3 id=前提条件>前提条件</h3><p>グリッドを実行するための唯一の要件は、Dockerをインストールして動作させることです。
<a href=//www.docker.com/products/docker-desktop>Dockerのインストール</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f6b04bbdc688aa2cc42afbe78c4d549d>3.3 - グリッドのコンポーネント</h1><div class=lead>Description of Hub and Nodes for Grid 3.</div><figure class="img-responsive text-center"><img src=/images/documentation/legacy/grid_3/grid.png alt="Grid 3 Components"></figure><h2 id=ハブ>ハブ</h2><ul><li>仲介者およびマネージャー</li><li>テストを実行する要求を受け入れます</li><li>クライアントから命令を受け取り、ノード上でリモートで実行します</li><li>スレッドを管理します</li></ul><p><em>ハブ</em> は、すべてのテストが送信される中心点です。
各Selenium Gridは、ちょうど1つのハブで構成されます。
ハブは、それぞれのクライアント（CIサーバー、開発者マシンなど）から到達可能である必要があります。
ハブは、テストが委任される1つ以上のノードを接続します。</p><h2 id=ノード>ノード</h2><ul><li>ブラウザが存在する場所</li><li>ハブに自分自身を登録し、その機能を伝えます</li><li>ハブからリクエストを受信して実行します</li></ul><p><em>ノード</em> は、個々のコンピューターシステムでテストを実行するさまざまなSeleniumインスタンスです。
グリッドには多くのノードが存在する場合があります。
ノードであるマシンは、ハブまたは他のノードと同じプラットフォームであったり、同じブラウザーを選定する必要はありません。
Windows上のノードは、Internet Explorerをブラウザーオプションとして提供する機能を備えている場合がありますが、これはLinuxまたはMacでは不可能です。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-0e6ac56fecd03a41b9fe9f76020a6bfe>4 - レガシー Selenium IDE</h1><h2 id=紹介>紹介</h2><p>Selenium-IDE (統合開発環境) は、Selenium テストケースを開発するためのツールです。
Selenium-IDE は使いやすい Firefox プラグインで、一般にテストケースを開発するための最も効率的な方法です。
Selenium-IDE ではコンテキストメニューも使用できます。
コンテキストメニューを使うと、まず現在ブラウザに表示されているページ上の UI 要素を選択し、次に Selenium コマンドのリストから目的のコマンドを選択できます。
コマンドのパラメータは、選択された UI 要素のコンテキストに従って、あらかじめ定義されたものが使われます。
Selenium-IDE を使う方法は、時間の節約になるだけでなく、Selenium スクリプトの構文を学ぶ手段としても優れています。</p><p>この章では Selenium-IDE について詳しく取り上げ、Selenium-IDE を効果的に使う方法について説明します。</p><h2 id=ideのインストール>IDEのインストール</h2><p>Firefoxを使用して、最初にSeleniumHQ<a href=https://selenium.dev/downloads>ダウンロードページ</a>からIDEをダウンロードします。</p><p>Firefoxは、不慣れな場所からアドオンをインストールしないように保護するため、次のスクリーンショットに示すように、インストールを続行するには&rsquo;許可&rsquo;をクリックする必要があります。</p><p><img src=/images/documentation/legacy/selenium_ide_installation_1.png alt="Selenium IDE Installation 1"></p><p>Firefoxからダウンロードすると、次のウィンドウが表示されます。</p><p><img src=/images/documentation/legacy/selenium_ide_installation_2.png alt="Selenium IDE Installation 2"></p><p>「今すぐインストール」を選択します。
Firefoxの「アドオン」ウィンドウがポップアップし、最初にプログレスバーが表示されます。
ダウンロードが完了すると、次のような画面になります。</p><p><img src=/images/documentation/legacy/selenium_ide_installation_3.png alt="Selenium IDE Installation 3"></p><p>Firefoxを再起動します。
Firefoxの再起動後、Firefoxの「ツール」メニューには、「Selenium-IDE」が表示されます。</p><p><img src=/images/documentation/legacy/selenium_ide_installation_4.png alt="Selenium IDE Installation 4"></p><h2 id=ideを開く>IDEを開く</h2><p>Selenium-IDEを実行するには、Firefoxの「ツール」メニューから「Selenium-IDE」を選択するだけです。
空のスクリプト編集ウィンドウと、テストケースを読み込んだり新規作成したりするメニューのある Selenium-IDE のウィンドウが表示されます。</p><p><img src=/images/documentation/legacy/selenium_ide_open.png alt="Selenium IDE Open"></p><h2 id=ideの機能>IDEの機能</h2><h3 id=メニューバー>メニューバー</h3><p>「ファイル」メニューには、テストケースとテストスイート（テストケースのスイート）のオプションがあります。
これらを使用して、新しいテストケースを追加し、テストケースを開き、テストケースを保存し、選択した言語でテストケースをエクスポートできます。
最近のテストケースを開くこともできます。
これらすべてのオプションは、テストスイートでも使用できます。</p><p>「編集」メニューでは、テストケースのコマンドを編集するためのすべての操作をコピー、貼り付け、削除、元に戻す、選択できます。
「オプション」メニューでは、さまざまな設定を変更できます。
特定のコマンドのタイムアウト値を設定し、Seleniumコマンドの基本セットにユーザー定義のユーザー拡張機能を追加し、テストケースを保存するときに使用する形式（言語）を指定できます。
「ヘルプ」メニューは Firefox 標準の「ヘルプ」メニューで、この中の 「UI-Element Documentation」 だけが Selenium-IDE に関係のある項目です。</p><h3 id=ツールバー>ツールバー</h3><p>ツールバーには、テストケースをデバッグするためのステップ実行機能をはじめ、テストケースの実行をコントロールするためのさまざまなボタンが並んでいます。
右端の赤い丸のボタンは、「Record」(記録) ボタンです。</p><p><img src=/images/documentation/legacy/selenium_ide_features_1.png alt="Selenium IDE Features">
<img src=/images/documentation/legacy/selenium_ide_features_2.png alt="Selenium IDE Features"></p><p>「Speed Control」 (速度調節): テストケースの実行速度を調節します。</p><p><img src=/images/documentation/legacy/selenium_ide_features_3.png alt="Selenium IDE Features"></p><p>「Run All」 (すべて実行): 複数のテストケースを持つテストスイートが読み込まれているときにテストスイート全体を実行します。</p><p><img src=/images/documentation/legacy/selenium_ide_features_4.png alt="Selenium IDE Features"></p><p>「Run」 (実行): 現在選択されているテストを実行します。
テストが1つしか読み込まれていない場合、このボタンと「Run All」ボタンの動作は同じです。</p><p><img src=/images/documentation/legacy/selenium_ide_features_5.png alt="Selenium IDE Features">
<img src=/images/documentation/legacy/selenium_ide_features_6.png alt="Selenium IDE Features"></p><p>「Pause」 / 「Resume」 (一時停止/再開) : 実行中のテストを一時停止または再開します。</p><p><img src=/images/documentation/legacy/selenium_ide_features_7.png alt="Selenium IDE Features"></p><p>「Step」(ステップ実行): コマンドを1つずつ実行し、テストケースの「1ステップ実行」を行います。
テストケースをデバッグするときに使います。</p><p><img src=/images/documentation/legacy/selenium_ide_features_8.png alt="Selenium IDE Features"></p><p>「TestRunner Mode」 (TestRunner モード): テストケースを Selenium-Core TestRunner で読み込んでブラウザで実行することができます。
TestRunner は今はあまり使われておらず、いずれ非推奨となるでしょう。
このボタンは、テストケースを評価して、TestRunner との後方互換性があるかどうかを調べるために用意されています。
ほとんどのユーザーは、このボタンを使う必要はないでしょう。</p><p><img src=/images/documentation/legacy/selenium_ide_features_9.png alt="Selenium IDE Features"></p><p>「Apply Rollup Rules」(ロールアップルールを適用): この高度な機能を利用すると、一連の Selenium コマンドの繰り返しを 1 つのアクションにまとめることができます。
ロールアップルールの詳細については、「ヘルプ」 メニューの [UI-Element Documentation] を参照してください。</p><p><img src=/images/documentation/legacy/selenium_ide_features_10.png alt="Selenium IDE Features"></p><h3 id=テストケース-ペイン>テストケース ペイン</h3><p>スクリプトは「テストケース」ペインに表示されます。
ペインには2つのタブがあります。
次に示すのは、コマンドとそのパラメータを読みやすい「テーブル」形式で表示するための [「テーブル」タブです。</p><p><img src=/images/documentation/legacy/selenium_ide_image_pane.png alt="Selenium IDE Image Pane"></p><p>もう 1 つの「ソース」タブには、テストケースがネイティブ形式で表示されます。
ファイルはこのネイティブ形式で保存されます。
デフォルトでは HTML ですが、Java や C# などのプログラミング言語、あるいは Python などのスクリプト言語に変更することもできます。
詳細については、「オプション」 メニューを参照してください。
「ソース」 タブでは、テストケースを生の形式で編集することができ、操作のコピー、切り取り、貼り付けが可能です。</p><p>「コマンド」、「対象」、および 「値」 入力フィールドには、現在選択されているコマンドとそのパラメータが表示されます。
これらの入力フィールドでは、現在選択されているコマンドを修正できます。
一番下のペインの 「リファレンス」 タブで、コマンドに対して指定されている 1 つ目のパラメータは、必ず 「対象」 フィールドに入力します。
「リファレンス」 タブで 2 つ目のパラメータが指定されている場合、このパラメータは 「値」 フィールドに入力します。</p><p><img src=/images/documentation/legacy/selenium_ide_entry_fields.png alt="Selenium IDE Entry Fields"></p><p>「コマンド」フィールドに文字を入力すると、入力した文字に応じてドロップダウンリストに項目が表示されるので、このリストから目的のコマンドを選択できます。</p><h3 id=ログ参照ui要素ロールアップペイン>ログ/参照/UI要素/ロールアップペイン</h3><p>一番下のペインは、さまざまな機能で使われます。
「ログ」、「リファレンス」、「UI-Element」、および 「Rollup」 の4つのタブがあります。</p><h4 id=ログ>ログ</h4><p>テストケースを実行すると、「ログ」 タブを選択していなくても、エラーメッセージとテストの進行状況を示す情報メッセージが自動的にこのペインに表示されます。
これらのメッセージは、しばしばテストケースのデバッグに役立ちます。
ログを消去するには 「消去」 ボタンをクリックします。
「情報」 ボタンをクリックすると、ドロップダウンリストが表示されます。
リストで目的の項目を選択すれば、画面に表示する情報のレベルを指定できます。</p><p><img src=/images/documentation/legacy/selenium_ide_bottom_box.png alt="Selenium IDE Bottom Box"></p><h4 id=リファレンス>リファレンス</h4><p>「リファレンス」 タブは、「テーブル」 タブで Selenese コマンドとパラメータを入力したり修正したりする場合にデフォルトで選択されるタブです。
「テーブル」 タブが表示されている場合、「リファレンス」 ペインには現在のコマンドのリファレンスが表示されます。
「テーブル」 タブの 「ソース」 タブのどちらで作業している場合も、コマンドを入力または修正するときは、「対象」 フィールドと 「値」 フィールドで指定するパラメータが、「リファレンス」 ペインのパラメータリストに指定されているものと一致していることを確認することが非常に重要です。
指定するパラメータの数は、「リファレンス」 ペインで指定されている数と一致しなければならず、パラメータの順序も 「リファレンス」 ペインのそれと一致しなければなりません。
さらに、指定するパラメータの型も、「リファレンス」 ペインで指定されている型と一致していなければなりません。
これら 3つのうち、1つでも一致しないものがあれば、コマンドは正常に実行されません。</p><p><img src=/images/documentation/legacy/selenium_ide_bottom_box_ref.png alt="Selenium IDE Bottom Box"></p><p>「リファレンス」 タブはクイックリファレンスとして大いに役立ちますが、Seleniumリファレンスを参照することもしばしば必要になります。</p><h4 id=ui-elementとrollup>UI-ElementとRollup</h4><p>これらの2つのペイン (高度な機能を扱うためのペイン) については、Selenium-IDE の 「ヘルプ」 メニューの 「UI-Element Documentation」 を参照してください。</p><h2 id=テストケースの作成>テストケースの作成</h2><p>テストケースを開発するための主な方法は3つあります。
多くの場合、テスト開発者はこれら 3 つのテクニックをすべて使う必要があります。</p><h3 id=記録>記録</h3><p>Selenium を初めて使うユーザーは、Web サイトでの操作を記録してテストケースを作成することが多いようです。Selenium-IDE を最初に開いたとき、「Record」 ボタンはデフォルトでオンになっています。</p><p>Selenium-IDEで自動的に記録を開始したくない場合は、Options > Options… に移動し、&ldquo;Start recording immediately on open.&ldquo;の選択を解除して、これをオフにできます。</p><p>記録中は、ユーザーの操作に基づいて Selenium-IDE がテストケースにコマンドを自動的に挿入します。
次に示すのは、典型的なユーザーの操作です。</p><ul><li>リンクをクリックする - click または clickAndWait コマンド</li><li>値を入力する - type コマンド</li><li>ドロップダウンリストボックスからオプションを選択する - select コマンド</li><li>チェックボックスまたはラジオボタンをクリックする - click コマンド</li></ul><p>いくつか注意すべき点を次に示します。</p><ul><li>typeコマンドが記録されるようにするには、Web ページ上のどこか別の場所をクリックする操作が必要になる場合があります。</li><li>リンクをたどる操作は、通常は click コマンドとして記録されます。
多くの場合、 click コマンドは clickAndWait に変更して、新しいページが完全に読み込まれるまでテストケースを確実に停止させる必要があります。
そうしないと、ページに含まれるすべての UI 要素が読み込まれる前にテストケースの実行が先に進み、予期しない形でテストケースが失敗することになります。</li></ul><h3 id=コンテキストメニューを使った検証とアサートの追加>コンテキストメニューを使った検証とアサートの追加</h3><p>テストケースでは、Web ページのプロパティをチェックする必要もあるでしょう。
それには、 assert コマンドと verify コマンドを使う必要があります。
ここでは、これらのコマンドの細かな点には触れません。
テストケースに追加する方法だけを説明します。
コマンドの詳細については、 “Selenese” Selenium コマンド に関する章を参照してください。</p><p>Selenium-IDE の記録機能がオンの状態で、テスト対象のアプリケーションを表示しているブラウザを選択し、ページ上の任意の場所を右クリックします。
すると、 verify コマンドや assert コマンドを含むコンテキストメニューが表示されます。</p><p>初めて Selenium を使う場合には、Selenium コマンドが1つしか表示されないかもしれません。
しかし、IDE を使っていると、メニューに表示されるコマンドがどんどん増えていきます。
Selenium-IDE は、現在の Web ページ上で選択されている UI 要素に応じて、必要なコマンドとパラメータの予測を試みます。</p><p>実際にこの機能をためしてみましょう。
適当な Web ページを開き、ページ上のテキストを選択します。
段落1つか、見出しがいいでしょう。
次に、選択したテキストを右クリックします。
コンテキストメニューが表示され、 verifyTextPresent コマンドと、このコマンドにふさわしいパラメータとして、選択されたテキスト自体が表示されるはずです。</p><p>また、「利用可能な全てのコマンド」 という項目があることに注目してください。
この項目を選択すると、非常に多くのコマンドが、現在選択されている UI 要素のテストに適したパラメータ案とともに表示されます。</p><p>いくつかほかの UI 要素についても、同じようにためしてみてください。
たとえば、画像を右クリックしたり、ボタンやチェックボックスなどのユーザーコントロールを右クリックしたりしてみてください。
verifyTextPresent 以外のオプションを見るには、「利用可能な全てのコマンド」 を使う必要があるかもしれません。
いったんほかのオプションを選択すると、よく使われるコマンドがトップレベルのコンテキストメニューに表示されるようになります。
たとえば、画像に対して verifyElementPresent を選択すると、次に画像を選択して右クリックしたときに、トップレベルのコンテキストメニューにこのコマンドが表示されるようになります。</p><p>繰り返しになりますが、これらのコマンドの詳細については、Selenium のコマンドに関する章で説明します。
とりあえずここでは、IDE を使ってさまざまなコマンドをテストケースに記録、選択し、テストケースを実行してみてください。IDE を使っていうちに、Selenium のコマンドについても自然に多くのことを学べるはずです。</p><h3 id=編集>編集</h3><h4 id=コマンドの挿入>コマンドの挿入</h4><h5 id=テーブル-タブ>テーブル タブ</h5><p>テストケース内のコマンドを挿入する場所を選択します。
右クリックして 「コマンドを挿入」 をクリックします。
コマンド編集用のテキストフィールドを使って、新しいコマンドとそのパラメータを入力します。</p><h5 id=ソース-タブ>ソース タブ</h5><p>テストケース内のコマンドを挿入する場所を選択し、3 列からなる行を 1 つ作成するのに必要な HTML タグを入力します。
この行の 1 列目にはコマンドを、2 列目には最初のパラメータを (パラメータが必要な場合)、3 列目には 2 つ目のパラメータを (パラメータが必要な場合) 入力します。「テーブル」 タグに戻るときは、その前にテストケースを保存します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>Command<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>target (locator)<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>Value<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><h4 id=コメントの挿入>コメントの挿入</h4><p>テストケースの可読性を高めるためにコメントを入力できます。
テストケースの実行時にはコメントは無視されます。</p><p>垂直方向の空白 (1 行以上の空白行) をテストに追加するには、空のコメントを作成する必要があります。
空のコマンドでは実行時にエラーが発生します。</p><h5 id=テーブル-タブ-1>テーブル タブ</h5><p>テストケース内のコメントを挿入する場所を選択します。
右クリックして 「コメントを挿入」 をクリックします。
「コマンド」 フィールドにコメントを入力します。
入力したコメントは紫色のフォントで表示されます。</p><h5 id=ソース-タブ-1>ソース タブ</h5><p>テストケース内のコメントを挿入する場所を選択します。
HTML スタイルのコメント、すなわち <code>&lt;!-- これはコメントです -–></code> を入力します。</p><h4 id=コマンドまたはコメントの編集>コマンドまたはコメントの編集</h4><h5 id=テーブル-タブ-2>テーブル タブ</h5><p>変更する行を選択し、「コマンド」、「対象」、および 「値」 フィールドを使って内容を編集します。</p><h5 id=ソース-タブ-2>ソース タブ</h5><p>「ソース」 タブは WYSIWYG エディタに相当する機能を持っているので、目的の行 (コマンド、パラメータ、またはコメント) を編集します。</p><h3 id=テストケースを開く保存する>テストケースを開く、保存する</h3><p>ほとんどのプログラムと同様に、「ファイル」メニューには「保存」および「開く」コマンドがあります。
ただし、Seleniumはテストケースとテストスイートを区別します。
後で使用するためにSelenium-IDEテストを保存するには、個々のテストケースを保存するか、テストスイートを保存します。
テストスイートのテストケースが保存されていない場合は、テストスイートを保存する前に保存するよう求められます。</p><p>既存のテストケースまたはスイートを開くと、Selenium-IDEのテストケースペインにSeleniumコマンドが表示されます。</p><h2 id=テストケースの実行>テストケースの実行</h2><p>Selenium-IDE には、テストケースを実行するためのさまざまなオプションがあり、1つのテストケースの実行、停止と再開、1 行ずつの実行、現在開発中のコマンドだけの実行、テストスイート全体の実行などが可能です。
Selenium-IDE では、テストケースを非常に柔軟に実行できます。</p><p><strong>テストケースの実行</strong></p><p>「Run」 ボタンをクリックすると、現在表示されているテストケースが実行されます。</p><p><strong>テストスイートの実行</strong></p><p>「Run All」 ボタンをクリックすると、現在読み込まれているテストスイートに含まれるすべてのテストケースが実行されます。</p><p><strong>停止と再開</strong></p><p>「Pause」 ボタンをクリックすると、実行中のテストケースを停止できます。
テストケースの実行を停止すると、ボタンのアイコンは 「Resume」 ボタンのアイコンに変わります。実行を再開するには、「Resume」 ボタンをクリックします。</p><p><strong>途中で実行を停止</strong></p><p>テストケース内でブレークポイントを指定すると、特定のコマンドでテストケースを停止することができます。
この機能は、テストケースをデバッグするときに便利です。
ブレークポイントを指定するには、コマンドを選択し、右クリックして表示されるコンテキストメニューで 「ブレークポイントの指定/解除」 をクリックします。</p><p><strong>途中から実行を開始</strong></p><p>テストケースの途中にある特定のコマンドから実行を開始することができます。
この機能も、テストケースをデバッグするときに便利です。
開始位置を指定するには、コマンドを選択し、右クリックして表示されるコンテキストメニューで 「開始位置の指定/解除」 をクリックします。</p><p><strong>任意のコマンドの実行</strong></p><p>1 つのコマンドだけをダブルクリックすると、そのコマンドを実行することができます。
この機能は、コマンドを 1 つ記述するときに便利です。
作成中のコマンドが適切かどうかわからないときでも、コマンドを即座にテストできます。
コマンドをダブルクリックするだけで、適切に実行されるかどうか確認できます。この機能は、コンテキストメニューからも利用できます。</p><h2 id=base-url-を使った異なるドメインでのテストケースの実行>Base URL を使った、異なるドメインでのテストケースの実行</h2><p>Selenium-IDE ウィンドウの上部にある 「Base URL」 フィールドを使うと、テストケースを異なるドメインで実行できるので便利です。
たとえば、 <a href=http://news.portal.com>http://news.portal.com</a> という名前のサイトが <a href=http://beta.news.portal.com>http://beta.news.portal.com</a> という名前でインハウスのベータサイトを持っていたとします。
この場合、これらのサイトが対象で、 open ステートメントで始まるすべてのテストケースについて、 open の引数に 絶対 URL (http: または https: などのプロトコルで始まる URL) ではなく、 相対 URL を指定します。
すると、Selenium-IDE は、[Base URL] フィールドに入力された値の最後に、 open コマンドの引数を追加して、絶対 URL を作成します。
たとえば次のテストケースは、 <a href=http://news.portal.com/about.html>http://news.portal.com/about.html</a> を対象に実行されます。</p><p><img src=/images/documentation/legacy/selenium_ide_base_url_prod.png alt="Selenium IDE Prod URL"></p><p>ここで、「Base URL」 フィールドの設定を変更してテストケースを実行すれば、同じテストケースが今度は <a href=http://beta.news.portal.com/about.html>http://beta.news.portal.com/about.html</a> を対象に実行されます。</p><p><img src=/images/documentation/legacy/selenium_ide_base_url_beta.png alt="Selenium IDE Beta URL"></p><h2 id=selenium-コマンド--selenese>Selenium コマンド- &ldquo;Selenese&rdquo;</h2><p>Selenium コマンドは、多くの場合seleneseと呼ばれ、テストを実行するコマンドのセットです。
これらのコマンドのシーケンスはテストスクリプトです。
ここでは、これらのコマンドを詳細に説明し、Seleniumを使用するときにWebアプリケーションをテストする際に選択できる多くの選択肢を示します。</p><p>Seleniumには、想像できるあらゆる方法でWebアプリを完全にテストするための豊富なコマンドセットが用意されています。
この一連のコマンドは、よくseleneseと呼ばれます。
これらのコマンドは、基本的にテスト言語を作成します。</p><p>seleneseでは、HTMLタグに基づいてUI要素の存在をテストしたり、特定のコンテンツをテストしたり、壊れたリンクをテストしたり、入力フィールド、選択リストオプション、フォームを送信したり、テーブルデータなどをテストできます。
さらに、Seleniumコマンドは、ウィンドウサイズ、マウス位置、アラート、Ajax機能、ポップアップウィンドウ、イベント処理、およびその他の多くのWebアプリケーション機能のテストをサポートしています。
コマンドリファレンスには、使用可能なすべてのコマンドがリストされています。</p><p>コマンドは、Seleniumに何をすべきかを伝えます。 Seleniumコマンドには、 <strong>アクション</strong> 、 <strong>アクセサ</strong> 、<strong>アサーション</strong> という3つの"フレーバー"があります。</p><ul><li><p><strong>アクション</strong> は、一般的にアプリケーションの状態を操作するコマンドです。
&ldquo;このリンクをクリックする&rdquo; や &ldquo;そのオプションを選択する&rdquo; といったことを実行します。
アクションが失敗するか、エラーがある場合、現在のテストの実行は停止されます。</p><p>&ldquo;AndWait&rdquo; 接尾辞を使用して、多くのアクションを呼び出すことができます。（例 : &ldquo;clickAndWait&rdquo;）
この接尾辞は、アクションによってブラウザーがサーバーを呼び出すこと、およびSeleniumが新しいページの読み込みを待つことをSeleniumに伝えます。</p></li><li><p><strong>アクセサー</strong> はアプリケーションの状態を調べ、結果を変数に保存します。（例 : &ldquo;storeTitle&rdquo;）
また、アサーションを自動的に生成するためにも使用されます。</p></li><li><p><strong>アサーション</strong> はアクセサーに似ていますが、アプリケーションの状態が期待どおりになっていることを検証します。
たとえば、&ldquo;ページタイトルがXであることを確認する&rdquo; 、&ldquo;このチェックボックスがオンになっていることを確認する&rdquo; などです。</p></li></ul><p>すべてのSeleniumアサーションは、&ldquo;assert&rdquo;、&ldquo;verify&rdquo;、および &ldquo;waitFor"の3つのモードで使用できます。
たとえば、&ldquo;assertText&rdquo;、&ldquo;verifyText&rdquo;、&ldquo;waitForText"を使用できます。
&ldquo;assert&rdquo; が失敗すると、テストは中止されます。
&ldquo;verify&rdquo; が失敗すると、テストは実行を継続し、失敗を記録します。
これにより、単一の &ldquo;assert&rdquo; でアプリケーションが正しいページにあることを確認し、続いてフォームフィールドの値、ラベルなどをテストするための &ldquo;verify&rdquo; アサーションが多数行われます。</p><p>&ldquo;waitFor&rdquo; コマンドは、何らかの条件が真になるまで待機します（Ajaxアプリケーションのテストに役立ちます）。
条件がすでに真であれば、すぐに成功します。
ただし、現在のタイムアウト設定内で条件が真にならない場合、それらは失敗し、テストを停止します（以下のsetTimeoutアクションを参照）。</p><h2 id=スクリプトシンタックス>スクリプトシンタックス</h2><p>Seleniumコマンドは単純で、コマンドと2つのパラメーターで構成されています。
例えば、</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>verifyText</td><td>//div//a[2]</td><td>Login</td></tr></tbody></table><p>パラメーターは必ずしも必要ではありません。
コマンドに依存します。
両方のパラメータが必要な場合もあれば、1つのパラメータが必要な場合もあります。
また、コマンドがパラメータをまったく受け取らない場合もあります。
ここにいくつかの例があります。</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>goBackAndWait</td><td></td><td></td></tr><tr><td>verifyTextPresent</td><td></td><td>Welcome to My Home Page</td></tr><tr><td>type</td><td>id=phone</td><td>(555) 666-7066</td></tr><tr><td>type</td><td>id=address1</td><td>${myVariableAddress}</td></tr></tbody></table><p>コマンドリファレンスでは、各コマンドのパラメーター要件について説明しています。</p><p>パラメーターは異なりますが、通常は、</p><ul><li>ページ内のUI要素を識別するためのロケーター</li><li>予想されるページコンテンツを検証またはアサートするためのテキストパターン</li><li>入力フィールドにテキストを入力するため、またはオプションリストからオプションを選択するためのテキストパターンまたはSelenium変数</li></ul><p>ロケーター、テキストパターン、Selenium変数、およびコマンド自体については、Seleniumコマンドの章で詳しく説明します。</p><p>Selenium-IDEから実行されるSeleniumスクリプトは、HTMLテキストファイル形式で保存されます。
これは、3つの列を持つHTMLテーブルで構成されます。
最初の列はSeleniumコマンドを示し、2番目の列はターゲットであり、最後の列には値が含まれています。
2番目と3番目の列は、選択したSeleniumコマンドによっては値を必要としない場合がありますが、存在する必要があります。
各テーブル行は、新しいSeleniumコマンドを表します。
以下は、ページを開き、ページタイトルをアサートし、ページ上のコンテンツを検証するテストの例です。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>table</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>open<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>/download/<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>assertTitle<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>Downloads<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>verifyText<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>//h2<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>Downloads<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>table</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><p>ブラウザでテーブルとしてレンダリングされると、次のようになります。</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>open</td><td>/download/</td><td></td></tr><tr><td>assertTitle</td><td></td><td>Downloads</td></tr><tr><td>verifyText</td><td>//h2</td><td>Downloads</td></tr></tbody></table><p>The Selenese HTML syntax can be used to write and run tests without requiring
knowledge of a programming language. With a basic knowledge of selenese and
Selenium-IDE you can quickly produce and run testcases.</p><h2 id=テストスイート>テストスイート</h2><p>テストスイートは、テストのコレクションです。
多くの場合、テストスイート内のすべてのテストを1つの連続バッチジョブとして実行します。</p><p>Selenium-IDEを使用する場合、テストスイートは単純なHTMLファイルを使用して定義することもできます。
構文も簡単です。
HTMLテーブルはテストのリストを定義し、各行は各テストへのファイルシステムパスを定義します。
例ですべてがわかります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>head</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>title</span><span style=color:#000;font-weight:700>&gt;</span>Test Suite Function Tests - Priority 1<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>title</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>head</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>table</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>b</span><span style=color:#000;font-weight:700>&gt;</span>Suite Of Tests<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>b</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;./Login.html&#34;</span><span style=color:#000;font-weight:700>&gt;</span>Login<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;./SearchValues.html&#34;</span><span style=color:#000;font-weight:700>&gt;</span>Test Searching for Values<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;./SaveValues.html&#34;</span><span style=color:#000;font-weight:700>&gt;</span>Test Save<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>table</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><p>これと似たファイルを使用すると、Selenium-IDEから次々にテストを実行できます。</p><p>Selenium-RCを使用している場合、テストスイートも維持できます。
これはプログラミングによって行われ、いくつかの方法で行うことができます。
通常、Junitは、JavaでSelenium-RCを使用している場合にテストスイートを維持するために使用されます。
さらに、C#が選択された言語である場合、Nunitを使用できます。
Selenium-RCでPythonのようなインタープリター言語を使用する場合、テストスイートのセットアップにいくつかの簡単なプログラミングが含まれます。
Selenium-RCを使用する理由はすべて、テストにプログラミングロジックを使用することであるため、通常これは問題になりません。</p><h2 id=一般的に使用されるseleniumコマンド>一般的に使用されるSeleniumコマンド</h2><p>Seleniumの紹介を終了するために、いくつかの典型的なSeleniumコマンドを紹介します。
これらはおそらく、テストを構築するために最も一般的に使用されるコマンドです。</p><p><strong>open</strong></p><p>URLを使用してページを開きます。</p><p><strong>click/clickAndWait</strong></p><p>クリック操作を実行し、オプションで新しいページがロードされるのを待ちます。</p><p><strong>verifyTitle/assertTitle</strong></p><p>期待されるページタイトルを検証します。</p><p><strong>verifyTextPresent</strong></p><p>期待されるテキストがページのどこかにあることを確認します。</p><p><strong>verifyElementPresent</strong></p><p>HTMLタグで定義されている、期待されるUI要素がページに存在することを確認します。</p><p><strong>verifyText</strong></p><p>期待されるテキストとそれに対応するHTMLタグがページに存在することを確認します。</p><p><strong>verifyTable</strong></p><p>テーブルの期待される内容を検証します。</p><p><strong>waitForPageToLoad</strong></p><p>期待される新しいページがロードされるまで実行を一時停止します。
clickAndWaitが使用されると自動的に呼び出されます。</p><p><strong>waitForElementPresent</strong></p><p>HTMLタグで定義されているように、期待されるUI要素がページに表示されるまで実行を一時停止します。</p><h2 id=ページ要素の検証>ページ要素の検証</h2><p>ページ上の UI 要素の検証は、自動化されたテストではおそらく最もよく使われる機能でしょう。
Selenese では、UI 要素をさまざまな方法でチェックすることができます。
実際のテスト対象はどの方法を使うかによって左右されるので、これらの方法の違いを理解することが重要になります。</p><p>たとえば、現在テストしようとしているのは、次のどれでしょうか&mldr;。</p><ol><li>ある要素がページ上のどこかに存在しているかどうか。</li><li>特定のテキストがページ上のどこかに存在しているかどうか。</li><li>特定のテキストがページ上の特定の場所に存在しているかどうか。</li></ol><p>テキスト見出しをテストする場合、おそらくテスト対象として適しているのは、ページ先頭のテキストとその位置でしょう。
一方、画像がホームページ上に存在するかどうかをテストする場合で、Web デザイナーが具体的な画像ファイルとそのページ上の位置を頻繁に変更しているようなケースでは、(具体的な画像ファイルではなく) 画像 が ページ上のどこかに存在しているかどうかをテストする方が適切でしょう。</p><h2 id=アサーションと検証>アサーションと検証</h2><p>“assert” (アサート) と “verify” (検証) のどちらを使うかは、利便性、そしてエラーの扱いをどうするかによって決まります。
期待されたページがブラウザに表示されているかどうかをチェックするテストがすでに失敗しているのに、そのページの最初のパラグラフが正しいものかどうかをチェックしても、ほとんど意味はありません。
目的のページが表示されていなければ、テストケースを中止して、何が原因かすぐ調べて、問題を解決した方がよいでしょう。
一方、最初のエラーでテストケースを中止せず、ページ上の多くの属性をチェックしたい場合もあります。
こうすれば、該当するページ上のすべてのエラーをまとめて見直し、適切な対応策を講じることができます。
Selenium のコマンドを使う場合、”assert” では、テストがエラーになり、現在のテストケースは中止されますが、”verify” では、テストはエラーになるものの、テストケースの実行は続行されます。</p><p>この機能を上手に活用するには、テストのコマンドを論理的にグループ化し、各グループを “assert” で始め、その後に 1 つまたは複数の “verify” コマンドを続けて記述します。
例を次に示します。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>open</td><td>/download/</td><td></td></tr><tr><td>assertTitle</td><td></td><td>Downloads</td></tr><tr><td>verifyText</td><td>//h2</td><td>Downloads</td></tr><tr><td>assertTable</td><td>1.2.1</td><td>Selenium IDE</td></tr><tr><td>verifyTable</td><td>1.2.2</td><td>June 3, 2008</td></tr><tr><td>verifyTable</td><td>1.2.3</td><td>1.0 beta 2</td></tr></tbody></table><p>上記の例では、最初にページを開き、次にタイトルを期待値と比較することで正しいページがロードされることを“アサート”します。
これが成功した場合にのみ、次のコマンドが実行され、テキストが予想される場所に存在することを“検証”します。
テストケースは、最初のテーブルの2行目の最初の列に期待値が含まれていることを“アサート”します。
これに合格した場合にのみ、その行の残りのセルが“検証”されます。</p><h3 id=verifytextpresent><strong>verifyTextPresent</strong></h3><p><code>verifyTextPresent</code> コマンドは、 特定のテキストがページ上のどこかに存在することを検証するのに使います。
このコマンドは引数を 1 つだけ取ります。
引数には、検証するテキストのパターンを指定します。
次に例を示します。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>verifyTextPresent</td><td>Marketing Analysis</td><td></td></tr></tbody></table><p>この例では、現在テストの対象になっているページ上で “Marketing Analysis” というテキスト文字列を探し、この文字列がページ上のどこかにあるかどうかを検証します。
verifyTextPresent コマンドは、テキストそれ自体がページ上に存在するかどうかだけを調べるときに使います。
テキストがページ上に現れる場所もテストの対象に含める必要がある場合には、このコマンドは使わないでください。</p><h3 id=verifyelementpresent><strong>verifyElementPresent</strong></h3><p>このコマンドは、特定の UI 要素について、その内容ではなく、要素の存在自体をチェックするのに使います。
具体的にはテキストはチェックせず、HTML タグだけをチェックします。
一般的な使い方として、画像が存在するかどうかのチェックなどがあります。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>verifyElementPresent</td><td>//div/p/img</td><td></td></tr></tbody></table><p>この例では、&lt;img> HTML タグの存在によって指定される画像が、ページ上に存在するかどうか、そして &lt;img> タグが &lt;div> タグと &lt;p> タグに続いて出現するかどうかを検証しています。
最初の (1 つだけの) パラメータは、要素を探す方法を Selenese コマンドに指示するための ロケータ です。
ロケータについては、次のセクションで説明します。</p><p><code>verifyElementPresent</code>を使用して、ページ内のHTMLタグの存在を確認できます。
リンク、段落、分割 &lt;div>などの存在を確認できます。
さらにいくつかの例を示します。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>verifyElementPresent</td><td>//div/p</td><td></td></tr><tr><td>verifyElementPresent</td><td>//div/a</td><td></td></tr><tr><td>verifyElementPresent</td><td>id=Login</td><td></td></tr><tr><td>verifyElementPresent</td><td>link=Go to Marketing Research</td><td></td></tr><tr><td>verifyElementPresent</td><td>//a[2]</td><td></td></tr><tr><td>verifyElementPresent</td><td>//head/title</td><td></td></tr></tbody></table><p>これらの例は、UI要素をテストするさまざまな方法を示しています。
繰り返しになりますが、ロケータについては次のセクションで説明します。</p><h3 id=verifytext><strong>verifyText</strong></h3><p>テキストとそのUI要素の両方をテストする必要がある場合は、<code>verifyText</code>を使用します。
verifyTextはロケーターを使用する必要があります。
<em>XPath</em> ロケーターまたは <em>DOM</em> ロケーターを選択した場合、特定のテキストが、ページ上のほかの UI コンポーネントとの相対位置で指定される特定の場所に出現するかどうかを検証できます。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>verifyText</td><td>//table/tr/td/div/p</td><td>This is my text and it occurs right after the div inside the table.</td></tr></tbody></table><h2 id=要素の特定>要素の特定</h2><p>多くの Selenium コマンドでは、対象を指定する必要があります。
この対象は、Web アプリケーションのコンテキスト内で要素を特定するためのもので、ロケーションストラテジーに続けて、 <code>locatorType=location</code> の形でロケーションを指定します。
多くの場合、ロケーションのタイプは省略できます。
ロケーションのタイプについては、以下で例を挙げながら説明します。</p><h3 id=識別子による特定>識別子による特定</h3><p>この方法は、要素を特定する方法としておそらく最も一般的で、ロケータタイプとして認識されるものが使われていない場合の汎用デフォルトです。
このストラテジーでは、id 属性を持つ要素のうち、ロケーションに一致する最初の要素が使われます。
id 属性に一致する要素がない場合には、name 属性を持つ要素のうち、ロケーションに一致する最初の要素が使われます。</p><p>たとえば、ページソースに次のような id 属性と name 属性があったとします。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>form</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;loginForm&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;username&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;submit&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Login&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><p>この場合、次のロケータストラテジーは、上の HTML 断片のうち、行番号で示される部分の要素を返します。</p><ul><li><code>identifier=loginForm</code> (3)</li><li><code>identifier=password</code> (5)</li><li><code>identifier=continue</code> (6)</li><li><code>continue</code> (6)</li></ul><p><code>identifier</code> タイプのロケーターはデフォルトであるため、上記の最初の3つの例の <code>identifier=</code> は必要ありません。</p><h3 id=idによる特定>idによる特定</h3><p>このタイプのロケータは identifier ロケータタイプよりも限定の度合いは高くなりますが、それと同時に、より明示的になります。要素の id 属性がわかっている場合に使用します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>form</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;loginForm&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;username&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;submit&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Login&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Clear&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><ul><li><code>id=loginForm</code> (3)</li></ul><h3 id=nameによる特定>Nameによる特定</h3><p>name ロケータタイプは、nama 属性に一致する最初の要素を特定します。
1つの name 属性に対して、複数の要素が同じ値を持っている場合には、フィルタを使ってロケーションストラテジーの精度を高めることができます。
デフォルトのフィルタタイプは value です (value 属性に一致)。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>form</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;loginForm&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;username&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;submit&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Login&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Clear&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><ul><li><code>name=username</code> (4)</li><li><code>name=continue value=Clear</code> (7)</li><li><code>name=continue Clear</code> (7)</li><li><code>name=continue type=button</code> (7)</li></ul><p>注 : 一部のタイプの XPath ロケータや DOM ロケータと異なり、これまでに示した 3 つのタイプのロケータを使えば、ページ上の位置に関係なく UI 要素をテストすることができます。
したがって、ページの構造や構成が変わっても、テストはパスします。
ページの構造が変わったかどうかについては、テストしたい場合もテストしたくない場合もあるでしょう。
Web デザイナーが頻繁にページに手を加えていて、ページの機能を回帰テストの対象にする必要がある場合には、id 属性や name 属性、または任意の HTML プロパティによるテストが非常に重要になります。</p><h3 id=xpathによる特定>XPathによる特定</h3><p>XPath は、XML ドキュメント内のノードを特定するために使われる言語です。
HTML は XML (XHTML) の実装でもありうるので、Selenium ユーザーは XPath という強力な言語を使って、Web アプリケーション内の要素を特定することができます。
XPath は、id 属性や name 属性による要素の特定という単純な方法を (サポートすると当時に) さらに拡張しており、ページ上の3番目のチェックボックスを特定するなど、あらゆる種類の新しい可能性を開いてくれる言語です。</p><p>XPathを使う主な理由の1つは、特定したい要素に対応する適切な id 属性や name 属性がない場合があることです。
XPathを使うと、要素を絶対的に特定したり (ただし、このやり方は推奨されません)、id 属性または name 属性を持つ要素からの相対位置で要素を特定したりできます。
XPath ロケータを使って、id や name 以外の属性から要素を特定することもできます。</p><p>絶対 XPath には、ルート (html) からのすべての要素の位置が含まれており、したがって 、アプリケーションにわずかな変更を加えただけで、XPath による特定がうまくいかなる可能性があります。
id 属性または name 属性を持つ近くの要素 (理想的には親要素) を見つけることによって、対象となる要素を相対関係に基づいて特定できるようになります。
これは、アプリケーションに変更が加えられても変わる可能性は低く、テストをより堅牢にすることができます。</p><p><code>xpath</code> ロケーターのみが &ldquo;//&rdquo; で始まるため、XPathロケーターを指定するときに <code>xpath=</code> ラベルを含める必要はありません。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>form</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;loginForm&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;username&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;submit&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Login&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Clear&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><ul><li><code>xpath=/html/body/form[1]</code> (3) - <em>絶対パス（HTMLが少しだけ変更された場合に壊れます）</em></li><li><code>//form[1]</code> (3) - <em>HTMLの最初のフォーム要素</em></li><li><code>xpath=//form[@id='loginForm']</code> (3) - <em>&lsquo;id&rsquo; という名前の属性と値 &rsquo;loginForm&rsquo;を持つフォーム要素</em></li><li><code>xpath=//form[input/@name='username']</code> (3) - <em>&rsquo;name&rsquo;という名前の属性と値 &lsquo;username&rsquo; を持つ入力子要素を持つ最初のフォーム要素</em></li><li><code>//input[@name='username']</code> (4) - <em>&rsquo;name&rsquo;という名前の属性と&rsquo;username&rsquo; という値を持つ最初の入力要素</em></li><li><code>//form[@id='loginForm']/input[1]</code> (4) - <em>&lsquo;id&rsquo;という名前の属性と&rsquo;loginForm&rsquo;という値を持つフォーム要素の最初の入力子要素</em></li><li><code>//input[@name='continue'][@type='button']</code> (7) - <em>&rsquo;name&rsquo;という名前の属性と&rsquo;continue&rsquo;という値の属性、&rsquo;type&rsquo;という名前の属性と&rsquo;button&rsquo;という値の入力</em></li><li><code>//form[@id='loginForm']/input[4]</code> (7) - <em>&lsquo;id&rsquo;という名前の属性と&rsquo;loginForm&rsquo;という値を持つフォーム要素の4番目の入力子要素</em></li></ul><p>これらの例では、いくつかの基本的な使い方を示しています。XPath の指定方法の詳細については、次の参考資料を読むことをお勧めします。</p><ul><li><a href=http://www.w3schools.com/xml/xpath_intro.asp%3E>W3Schools XPath Tutorial</a></li><li><a href=http://www.w3.org/TR/xpath>W3C XPath Recommendation</a></li></ul><p>また、要素のXPathを検出するのに役立つ非常に便利なFirefoxアドオンがいくつかあります。</p><ul><li><a href="https://addons.mozilla.org/en-US/firefox/addon/1095?id=1095">XPath Checker</a> XPathおよびXPath結果のテストに使用できます。</li><li>[Firebug](<a href=https://addons.mozilla.org/en-US/firefox/addon/1843>https://addons.mozilla.org/en-US/firefox/addon/1843</a> - XPathの提案は、この非常に便利なアドオンの多くの強力な機能の1つにすぎません。</li></ul><h3 id=リンクテキストによるハイパーリンクの特定>リンクテキストによるハイパーリンクの特定</h3><p>これは、リンクのテキストを使用してWebページのハイパーリンクを特定する簡単な方法です。
同じテキストの2つのリンクが存在する場合、最初に一致したものが使われます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>p</span><span style=color:#000;font-weight:700>&gt;</span>Are you sure you want to do this?<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>p</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue.html&#34;</span><span style=color:#000;font-weight:700>&gt;</span>Continue<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;cancel.html&#34;</span><span style=color:#000;font-weight:700>&gt;</span>Cancel<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><ul><li><code>link=Continue</code> (4)</li><li><code>link=Cancel</code> (5)</li></ul><h3 id=domによる特定>DOMによる特定</h3><p>ドキュメントオブジェクトモデルはHTMLドキュメントを表し、JavaScriptを使用してアクセスできます。
このロケーションストラテジーでは、ページ上の要素に評価される JavaScript を使用します。
単に階層型ドット記法を使って要素の位置を特定できます。</p><p>&ldquo;document&rdquo; で始まるのは <code>dom</code> ロケーターだけなので、DOMロケーターを指定するときに <code>dom=</code> ラベルを含める必要はありません。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>form</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;loginForm&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;username&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;submit&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Login&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Clear&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><ul><li><code>dom=document.getElementById('loginForm')</code> (3)</li><li><code>dom=document.forms['loginForm']</code> (3)</li><li><code>dom=document.forms[0]</code> (3)</li><li><code>document.forms[0].username</code> (4)</li><li><code>document.forms[0].elements['username']</code> (4)</li><li><code>document.forms[0].elements[0]</code> (4)</li><li><code>document.forms[0].elements[3]</code> (7)</li></ul><p>Selenium それ自体に加え、ほかのサイトや拡張機能を利用すれば、作成中のアプリケーションの DOM について詳しく知ることができます。
<a href=http://www.w3schools.com/js/js_htmldom.asp>W3Schools</a>には適切なリファレンスがあります。</p><h3 id=cssによる特定>CSSによる特定</h3><p>CSS (Cascading Style Sheets) は、HTML ドキュメントと XML ドキュメントのレンダリングについて記述するための言語です。
CSS では、セレクタを使って、ドキュメント内の要素にスタイルプロパティをバインドしています。
Selenium では、これらのセレクタをロケーションストラテジーとして利用できます。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>form</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;loginForm&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;required&#34;</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;username&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;required passfield&#34;</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;password&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;submit&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Login&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;continue&#34;</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Clear&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>form</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><ul><li><code>css=form#loginForm</code> (3)</li><li><code>css=input[name="username"]</code> (4)</li><li><code>css=input.required[type="text"]</code> (4)</li><li><code>css=input.passfield</code> (5)</li><li><code>css=#loginForm input[type="button"]</code> (7)</li><li><code>css=#loginForm input:nth-child(2)</code> (5)</li></ul><p>CSSセレクターの詳細については、<a href=http://www.w3.org/TR/css3-selectors/>the W3C
publication</a>をご覧ください。
詳しいリファレンスもここにあります。</p><h3 id=暗黙のロケーター>暗黙のロケーター</h3><p>次の状況では、ロケータータイプを省略することができます。</p><ul><li><p>ロケーター戦略が明示的に定義されていないロケーターは、デフォルトで識別子ロケーター戦略を使用します。
<code>idによる特定</code>　をご覧ください。</p></li><li><p>&ldquo;//&rdquo; で始まるロケーターは、XPathロケーター戦略を使用します。
<code>XPathによる特定</code> をご覧ください。</p></li><li><p>&ldquo;document&rdquo; で始まるロケーターは、DOMロケーター戦略を使用します。
<code>DOMによる特定</code> をご覧ください。</p></li></ul><h2 id=テキストパターンとの一致>テキストパターンとの一致</h2><p>ロケータ同様、 パターン も Selenese コマンドでしばしば必要になるタイプのパラメータです。パターンを指定する必要があるコマンドとしては、 <strong>verifyTextPresent</strong> 、 <strong>verifyTitle</strong> 、 <strong>verifyAlert</strong> 、 <strong>assertConfirmation</strong> 、 <strong>verifyText</strong> 、 <strong>verifyPrompt</strong> などがあります。
また、すでに示したリンクロケータでも、パターンを使用できます。
パターンを使うと、テキストを正確に指定しなくても、期待されるテキストを特殊文字の使用を通じて 記述 することができます。</p><p>パターンには、 <em>globbing</em> 、 <em>regular expressions</em> 、 <em>exact</em> の 3 つの種類があります。</p><h3 id=グロビングパターン>グロビングパターン</h3><p>ほとんどのユーザーは、グロビングについてはすでによく知っていることでしょう。
グロビングは、DOS や Unix/Linux のコマンドラインで <code>ls *.c</code>などとしてファイル名を展開するときに使われています。
この例では、現在のディレクトリ内に存在する拡張子 <code>.c</code>で終わるすべてのファイルが表示されます。
グロビングにはかなり制限があります。
Selenium の実装でサポートされている特殊文字は、次の 2 つだけです。</p><p><code>*</code>「何にでも一致」します。すなわち、何もなし、1 文字だけ、複数の文字のすべてに一致します。</p><p><code>[ ]</code> ( <em>文字クラス</em> )。&ldquo;角かっこ内の任意の 1 文字に一致"します。
ダッシュ文字 (ハイフン。 “-“) を使って文字の範囲 (ASCII 文字セットで連続する文字の範囲) を指定できます。
文字クラスのはたらきについては、いくつか実例を挙げた方がわかりやすいでしょう。</p><p><code>[aeiou]</code> は任意の小文字の母音に一致します。</p><p><code>[0-9]</code> は任意の数字に一致します。</p><p><code>[a-zA-Z0-9]</code> は任意の英数字に一致します。</p><p>グロビングのほとんどの実装では、3 つ目の特殊文字として <strong>?</strong> が含まれています。
しかし、Selenium のグロビングパターンでサポートされているのは、アスタリスク (*) と文字クラスだけです。</p><p>Selenese コマンドでグロビングパターンを指定するには、指定するパターンの前に <strong>glob:</strong> ラベルを付けます。
ただし、グロビングパターンはデフォルトなので、このラベルを省略してパターンだけを指定することもできます。</p><p>次に示すのは、グロビングパターンの使用例です。
ページ上の実際のリンクテキストは “Film/Television Department” でした。
正確に一致するテキストではなく、パターンを使うと、リンクのテキストが “Film & Television Department” や “Film and Television Department” に変更された場合でも、 <strong>click</strong> コマンドが動作するようになります。
グロビングパターンのアスタリスクは、 “Film” という単語と “Television” という単語の間に何もなくても、または何があっても一致します。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>click</td><td>link=glob:Film*Television Department</td><td></td></tr><tr><td>verifyTitle</td><td>glob:*Film*Television*</td><td></td></tr></tbody></table><p>リンクをクリックして表示されるページの実際のタイトルは “De Anza Film And Television Department - Menu” でした。正確に一致するテキストではなく、パターンを使うと、ページのタイトルに “Film” と “Television” の 2 つの単語が (この順序で) 出現する限り、 <code>verifyTitle</code> はパスします。
たとえば、ページのオーナーがタイトルを短縮して “Film & Television Department” としても、テストはパスします。リンクとリンクが動作するかどうかのテスト (上の例では <code>verifyTitle</code>) との両方でパターンを使うことで、こうしたテストケースの保守の手間を大幅に減らすことができます。</p><h4 id=正規表現パターン>正規表現パターン</h4><p><em>正規表現</em> パターンは、Selenese がサポートしている 3 種類のパターンの中で最も強力です。
正規表現はほとんどの高水準プログラミング言語、多くのテキストエディタ、さらに Linux/Unix のコマンドラインユーティリティである <strong>grep</strong> や <strong>sed</strong> 、 <strong>awk</strong> など、さまざまなツールでもサポートされています。
Selenese では、正規表現パターンを使うと、それ以外の方法では実現が難しい数多くのタスクを実行することができます。
たとえば、テーブルの特定のセルに入力されているのが数字だけかどうかをテストする必要があるとします。
この場合、 <code>regexp: [0-9]+</code> と指定するだけで、任意の長さの数字に一致させることができます。</p><p>Selenese のグロビングパターンでサポートしているのは <strong>*</strong> と <strong>[ ]</strong> (文字クラス) だけですが、Selenese の正規表現パターンでは JavaScript に存在するものと同じ幅広い特殊文字を使用できます。
次に示すのは、これらの特殊文字です。</p><table><thead><tr><th>PATTERN</th><th>MATCH</th></tr></thead><tbody><tr><td>.</td><td>any single character</td></tr><tr><td>[ ]</td><td>character class: any single character that appears inside the brackets</td></tr><tr><td>*</td><td>quantifier: 0 or more of the preceding character (or group)</td></tr><tr><td>+</td><td>quantifier: 1 or more of the preceding character (or group)</td></tr><tr><td>?</td><td>quantifier: 0 or 1 of the preceding character (or group)</td></tr><tr><td>{1,5}</td><td>quantifier: 1 through 5 of the preceding character (or group)</td></tr><tr><td>|</td><td>alternation: the character/group on the left or the character/group on the right</td></tr><tr><td>( )</td><td>grouping: often used with alternation and/or quantifier</td></tr></tbody></table><p>Selenese の正規表現パターンでは、先頭に <code>regexp:</code> または <code>regexpi:</code> を付ける必要があります。
前者は大文字と小文字を区別しますが、後者は大文字と小文字を区別しません。</p><p>Selenese コマンドでの正規表現パターンの使い方については、いくつか実例を挙げた方がわかりやすいでしょう。
最初の例は、おそらく最もよく使われる正規表現である <strong>.*</strong> (“ドットスター”) を使ったものです。
この 2 文字の並びは、「任意の文字の 0 回以上の繰り返し」、もっとかみくだいて言えば、「すべて、または何もない」ものに一致します。1 文字のグロビングパターンで <strong>*</strong> (アスタリスク 1 つ) と指定するのと等価です。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>click</td><td>link=glob:Film*Television Department</td><td></td></tr><tr><td>verifyTitle</td><td>regexp:.*Film.*Television.*</td><td></td></tr></tbody></table><p>上のテスト例は、すでに示したグロビングパターンを使ったテストの例と機能的には同じです。
違いは、プリフィックス (<strong>glob:</strong> の代わりに <strong>regexp:</strong> が使われていること) と、「すべて、または何もない」パターンが指定されていること ( <strong>*</strong> の代わりに <strong>.*</strong> が使われていること) だけです。</p><p>次に示すのは、アラスカ州アンカレジの日の出時刻に関する情報が掲載されている Yahoo! Weather のページを対象としたもう少し複雑なテスト例です。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>open</td><td><a href=http://weather.yahoo.com/forecast/USAK0012.html>http://weather.yahoo.com/forecast/USAK0012.html</a></td><td></td></tr><tr><td>verifyTextPresent</td><td>regexp:Sunrise: *[0-9]{1,2}:[0-9]{2} [ap]m</td><td></td></tr></tbody></table><p>上の例で使われている正規表現を 1 つずつ見てみましょう。</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><code>Sunrise: *</code></td><td><strong>Sunrise:</strong> という文字列とそれに続く 0 個以上の空白</td></tr><tr><td><code>[0-9]{1,2}</code></td><td>1 個または 2 個の数字 (時間を表す)</td></tr><tr><td><code>:</code></td><td>文字 : そのもの (特殊文字は使われていない)</td></tr><tr><td><code>[0-9]{2}</code></td><td>2 個の数字 (分を表す) とそれに続く 1 個の空白</td></tr><tr><td><code>[ap]m</code></td><td>文字 “a” または “p” とそれに続く “m” (am または pm)</td></tr></tbody></table><h4 id=完全一致>完全一致</h4><p>Selenium の <strong>完全一致</strong> パターンは、それほど使う機会はないでしょう。
完全一致パターンでは、特殊文字は一切使いません。
したがって、(グロビングパターンと正規表現パターンでは特別な意味を持つ) アスタリスク文字を検索する必要がある場合には、完全一致パターンを使うのも 1 つの方法です。
たとえば、ドロップダウンリストで “Real *” というラベルの付いた項目を選択する場合、次のようなコードでは、期待どおりに動作する場合もそうでない場合もあります。
<code>glob:Real *</code>パターンに含まれるアスタリスクは、「すべて、または何もない」ものに一致します。
したがって、目的の select のオプションより前に “Real Numbers” というラベルの付いたオプションがあれば、それが選択され、目的の “Real *” というオプションは選択されないことになります。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>select</td><td>//select</td><td>glob:Real *</td></tr></tbody></table><p>項目 “Real *” が確実に選択されるようにするには、 <code>exact:</code> プリフィックスを使って次のように <strong>完全一致</strong> パターンを指定します。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>select</td><td>//select</td><td>exact:Real *</td></tr></tbody></table><p>ただし、正規表現パターンで次のようにアスタリスクをエスケープしても同じ結果が得られます。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>select</td><td>//select</td><td>regexp:Real \*</td></tr></tbody></table><p>ほとんどのテスターは、アスタリスクや、文字が間に入った角かっこの対 (グロビングパターンの文字クラス指定) を検索する必要はないでしょう。
したがって、大半のユーザーにとっては、グロビングパターンと正規表現パターンだけで十分なはずです。</p><h2 id=andwait-コマンド>“AndWait” コマンド</h2><p>あるコマンドとそのコマンドに対応する <em>AndWait</em> コマンドとの違いは、通常のコマンド (click など) が、操作を実行すると可能な限り速やかに次のコマンドの実行を続けるのに対し、 AndWait コマンド (clickAndWait など) は、操作が実行された後、ページが読み込まれるまで <strong>待機する</strong> よう Selenium に指示する点にあります。</p><p>目的の操作によってブラウザがほかのページに移動したり、現在のページをリロードしたりする場合には、常に <em>AndWait</em> コマンドを使います。</p><p>ただし、ほかのページへの移動やページの更新を伴わない操作に対して <em>AndWait</em> コマンドを使うと、テストは失敗します。
テストが失敗する理由は、ほかのページへの移動や更新が行われないまま <em>AndWait</em> のタイムアウトに達して、Selenium がタイムアウト例外を発生させるためです。</p><h2 id=ajax-アプリケーションにおける-waitfor-コマンド>AJAX アプリケーションにおける waitFor コマンド</h2><p>AJAX 駆動型 Web アプリケーションでは、ページを更新することなく、サーバーからデータが取得されます。
この場合、実際にはページが更新されないため、 andWait コマンドは動作しません。
一定時間、テストの実行を停止するやり方も、優れた対応策とは言えません。
当該時点でのシステムの応答性能、負荷、その他の制御不可能な要素によって、指定された時間よりも早く、あるいは遅く、目的の Web 要素が表示されることがあり、その場合にはテストが失敗するからです。
最も適切なアプローチは、動的な期間、必要な要素が表示されるのを待って、要素が見つかり次第、テストの実行を続行するやり方です。</p><p><em>waitFor</em> コマンドを使うと、このようなやり方を実現できます。
<em>waitForElementPresent</em> や <em>waitForVisible</em> は、動的な期間、待機し、目的の条件が満たされるかどうかを毎秒チェックし、条件が満たされると同時にスクリプトの次のコマンドの実行を続けます。</p><h2 id=評価順序とフロー制御>評価順序とフロー制御</h2><p>スクリプトを実行すると、そのスクリプトに含まれるコマンドが順序に従って実行されます。</p><p>Selenese それ自体は、条件判定文 (if-else など) または反復 (for、while など) をサポートしていません。
フロー制御を使わなくても、多くの有用なテストは実行できます。
しかし、複数のページが関係することが多い動的コンテンツをきちんとテストするには、プログラミングロジックがしばしば必要になります。</p><p>フロー制御が必要になった場合には、次の 3 つの選択肢があります。</p><p>a) Selenium-RC と、Java や PHP といったクライアントライブラリを使ってスクリプトを実行し、プログラミング言語の持つフロー制御機能を利用する。
b) スクリプトの内部から storeEval コマンドを使って小さな JavaScript コードの断片を実行する。
c) <code>goto_sel_ide.js extension</code> 拡張スクリプトをインストールする。</p><p>ほとんどのテスターは、テストスクリプトをプログラミング言語ファイルにエクスポートし、Selenium-RC API を利用する方法を選択することになるでしょう (Selenium-RC API については、Selenium-RC に関する章を参照)。
ただし、組織によっては、可能な限りテストスクリプトを Selenium-IDE から実行した方が都合がよい場合もあります (テストの実行を多数の契約社員に担当させている組織や、十分なプログラミングスキルを期待できないケースなど)。
このような場合には、JavaScript コードの断片を利用する方法か、goto_sel_ide.js 拡張スクリプトを使う方法を検討するとよいでしょう。</p><h2 id=store-コマンド群と-selenium-変数>store コマンド群と Selenium 変数</h2><p>Selenium 変数を使うと、スクリプトの冒頭で定数を格納することができます。
また、データ駆動型テスト設計と組み合わせて使う場合には (あとのセクションで取り上げます)、コマンドライン、ほかのプログラム、またはファイルからテストプログラムに渡す値を Selenium 変数に格納することができます。</p><p>プレーンな store コマンドは、たくさんある store コマンド群の中で最も基本的なコマンドで、Selenium 変数に単純に定数値を格納するのに使用できます。
store コマンドは、変数に格納するテキスト値と Selenium 変数の 2 つのパラメータを取ります。
変数の名前を付けるときは、英数文字だけを使う標準的な命名規則に従ってください。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>store</td><td><a href=mailto:paul@mysite.org>paul@mysite.org</a></td><td></td></tr></tbody></table><p>上のように記述すると、スクリプトのあとの方で、変数に格納された値を利用できます。
変数の値にアクセスするには、次に示すように、変数をブレース ({}) で囲み、先頭にドル記号を付けます。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>verifyText</td><td>//div/p</td><td>\${userName}</td></tr></tbody></table><p>変数の一般的な使い方の 1 つに、入力フィールドへの入力を格納する操作があります。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>type</td><td>id=login</td><td>\${userName}</td></tr></tbody></table><p>Selenium 変数は、最初のパラメータにも 2 番目のパラメータにも使用することができます。
コマンドのパラメータに変数が使われている場合、変数は、このコマンドが実行するほかのあらゆる操作に先立って Selenium によって解釈されます。
Selenium 変数をロケータ表現の内部で使うこともできます。</p><p>verify および assert コマンドのそれぞれに対し、対応する store コマンドが存在します。
これらのコマンドのうち、よく使われるものを以下に示します。</p><h3 id=storeelementpresent>storeElementPresent</h3><p>storeElementPresent は、verifyElementPresent に対応するコマンドです。
このコマンドは、UI 要素が見つかったかどうかに応じて、ブール値 (“true” または “false” のいずれか) を格納します。</p><h3 id=storetext>storeText</h3><p>StoreText は、verifyText に対応するコマンドです。
このコマンドはロケータを使ってページ上の特定のテキストを探します。
テキストが見つかった場合には、そのテキストが変数に格納されます。
storeText を使うと、テスト対象のページからテキストを抽出することができます。</p><h3 id=storeeval>storeEval</h3><p>storeEval の最初のパラメータにはスクリプトを指定します。
JavaScript を Selenese に埋め込む方法については、次のセクションで取り上げます。
テストの中で storeEval を使うと、スクリプトの実行結果を変数に格納することができます。</p><h2 id=javascript-と-selenese-パラメータ>JavaScript と Selenese パラメータ</h2><p>JavaScript は、 スクリプト と非スクリプト (一般には式) の 2 つの種類の Selenese パラメータで使用できます。
ほとんどの場合は、Selenese パラメータに指定された JavaScript コードの断片の中で、テストケース変数にアクセスしたり操作したりすることが多いでしょう。
テストケース内で作成されたすべての変数は、JavaScript の 連想配列 に格納されます。連想配列とは、連番の添字ではなく、文字列を添字にもつ配列のことです。
作成したテストケースの変数が格納される連想配列には、 <strong>storedVars</strong> という名前が付けられます。
JavaScript コードの断片で変数にアクセスしたり操作したりするには、必ず <strong>storedVars[&lsquo;yourVariableName&rsquo;]</strong> の形で参照する必要があります。</p><h3 id=スクリプトパラメータでの-javascript-の使用>スクリプトパラメータでの JavaScript の使用</h3><p>いくつかの Selenese コマンド、たとえば <strong>assertEval</strong> 、 <strong>verifyEval</strong> 、 <strong>storeEval</strong> 、 <strong>waitForEval</strong> などのコマンドでは、 スクリプト パラメータを指定します。これらのパラメータでは特別な構文は必要ありません。
Selenium-IDE ユーザーなら、JavaScript コードの断片の適切なフィールドを入力するだけです (通常、入力先のフィールドは <strong>対象</strong> フィールドです。
<strong>スクリプト</strong> パラメータは一般に、最初のパラメータか唯一のパラメータのいずれかだからです) 。</p><p>次に示すのは、JavaScript コードの断片を使って簡単な算術演算を行う例です。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>store</td><td>10</td><td>hits</td></tr><tr><td>storeXpathCount</td><td>//blockquote</td><td>blockquotes</td></tr><tr><td>storeEval</td><td>storedVars[&lsquo;hits&rsquo;].storedVars[&lsquo;blockquotes&rsquo;]</td><td>paragraphs</td></tr></tbody></table><p>次に示すのは、JavaScript コードの断片でメソッドを呼び出す例です。
この例では、JavaScript String オブジェクトの <code>toUpperCase</code> メソッドと <code>toLowerCase</code> メソッドを呼び出しています。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>store</td><td>Edith Wharton</td><td>name</td></tr><tr><td>storeEval</td><td>storedVars[&rsquo;name&rsquo;].toUpperCase()</td><td>uc</td></tr><tr><td>storeEval</td><td>storedVars[&rsquo;name&rsquo;].toUpperCase()</td><td>lc</td></tr></tbody></table><h4 id=非スクリプトパラメータでの-javascript-の使用>非スクリプトパラメータでの JavaScript の使用</h4><p>コマンドが取るパラメータの種類が <strong>スクリプト</strong> ではない場合でも、パラメータに使う値を JavaScript を使って生成することができます。
ただし、この場合には特別な構文が必要になり、JavaScript コードの断片をブレースで囲み、その前にラベル javascript を付ける必要があります。
具体的には、 <code>javascript {*ここにコードを記述*}</code> のように指定します。
次に示すのは、 <code>type</code> コマンドの 2 番目のパラメータ <code>value</code> を、特別な構文を使って JavaScript コードから生成する例です。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>store</td><td>league of nations</td><td>searchString</td></tr><tr><td>type</td><td>q</td><td>javascript{storedVars[&lsquo;searchString&rsquo;].toUpperCase()}</td></tr></tbody></table><h2 id=echo---selenese-の-print-コマンド><em>echo</em> - Selenese の Print コマンド</h2><p>Selenese には、テスト出力にテキストを書き込むことができる簡単なコマンドが用意されています。
このコマンドを使うと、テストの実行中に進捗状況を示す情報をコンソールに表示できるので便利です。
これらの情報を使えば、テスト結果のレポートに実行時の状況を埋め込むこともできるので、テストで問題が見つかったときに、ページ上のどこにバグがあるのか探すのに役立ちます。
また、echo 文を使うと、Selenium 変数の内容を出力できます。次に例を示します。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>echo</td><td>Testing page footer now.</td><td></td></tr><tr><td>echo</td><td>Username is \${userName}</td><td></td></tr></tbody></table><h2 id=警告ポップアップおよび複数のウィンドウ>警告、ポップアップ、および複数のウィンドウ</h2><p>次のようなページをテストしているとします。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>&lt;!DOCTYPE HTML&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>head</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>script</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text/javascript&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>output</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>resultText</span><span style=color:#000;font-weight:700>){</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>document</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getElementById</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;output&#39;</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>childNodes</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>].</span><span style=color:#000>nodeValue</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>resultText</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>show_confirm</span><span style=color:#000;font-weight:700>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>confirmation</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>confirm</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Chose an option.&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>confirmation</span><span style=color:#ce5c00;font-weight:700>==</span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>){</span>
</span></span><span style=display:flex><span>          <span style=color:#000>output</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Confirmed.&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>else</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          <span style=color:#000>output</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Rejected!&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>show_alert</span><span style=color:#000;font-weight:700>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#000>alert</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;I&#39;m blocking!&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#000>output</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Alert is gone.&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>show_prompt</span><span style=color:#000;font-weight:700>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>response</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>prompt</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;What&#39;s the best web QA tool?&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>&#34;Selenium&#34;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#000>output</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>open_window</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>windowName</span><span style=color:#000;font-weight:700>){</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>window</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>open</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;newWindow.html&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>windowName</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>script</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>head</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;btnConfirm&#34;</span> <span style=color:#c4a000>onclick</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;show_confirm()&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Show confirm box&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;btnAlert&#34;</span> <span style=color:#c4a000>onclick</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;show_alert()&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Show alert&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;btnPrompt&#34;</span> <span style=color:#c4a000>onclick</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;show_prompt()&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Show prompt&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;newWindow.html&#34;</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;lnkNewWindow&#34;</span> <span style=color:#c4a000>target</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;_blank&#34;</span><span style=color:#000;font-weight:700>&gt;</span>New Window Link<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;btnNewNamelessWindow&#34;</span> <span style=color:#c4a000>onclick</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;open_window()&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Open Nameless Window&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>input</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;btnNewNamedWindow&#34;</span> <span style=color:#c4a000>onclick</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;open_window(&#39;Mike&#39;)&#34;</span> <span style=color:#c4a000>value</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Open Named Window&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>br</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>span</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;output&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>span</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><p>ユーザーは、アラート/確認ボックスに応答するとともに、新しく開いたポップアップウィンドウにフォーカスを移動する必要があります。
幸いなことに、SeleniumはJavaScriptポップアップをカバーできます。</p><p>ただし、アラート/確認/プロンプトを個別に詳細に説明する前に、それらの共通点を理解しておくと役立ちます。
アラート、確認ボックス、プロンプトにはすべて次のバリエーションがあります。</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td>assertFoo(pattern)</td><td>パターンがポップアップのテキストと一致しない場合、エラーをスローします</td></tr><tr><td>assertFooPresent</td><td>ポップアップが利用できない場合はエラーをスローします</td></tr><tr><td>assertFooNotPresent</td><td>ポップアップが存在する場合、エラーをスローします</td></tr><tr><td>storeFoo(variable)</td><td>ポップアップのテキストを変数に保存します</td></tr><tr><td>storeFooPresent(variable)</td><td>ポップアップのテキストを変数に保存し、trueまたはfalseを返します</td></tr></tbody></table><p>Seleniumで実行している場合、JavaScriptポップアップは表示されません。
これは、関数呼び出しが実行時に実際にSeleniumのJavaScriptによってオーバーライドされるためです。
ただし、ポップアップが表示されないからといって、ポップアップを処理する必要はありません。
ポップアップを処理するには、その <code>assertFoo(pattern)</code> 関数を呼び出す必要があります。
ポップアップの存在をアサートしないと、次のコマンドがブロックされ、次のようなエラーが表示されます。 <code>[エラー]エラー：予期しない確認がありました！ [オプションを選択してください。]</code></p><h3 id=アラート>アラート</h3><p>アラートは処理が最も簡単なポップアップなので、始めましょう。
まず、ブラウザで上記のHTMLサンプルを開き、&ldquo;Show alert&rdquo; ボタンをクリックします。
アラートを閉じると、&ldquo;Alert is gone.&rdquo; というテキストが表示されます。
ページに表示されます。
次に、Selenium IDE記録で同じ手順を実行し、アラートを閉じた後にテキストが追加されたことを確認します。
テストは次のようになります。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>open</td><td>/</td><td></td></tr><tr><td>click</td><td>btnAlert</td><td></td></tr><tr><td>assertAlert</td><td>I’m blocking!</td><td></td></tr><tr><td>verifyTextPresent</td><td>Alert is gone.</td><td></td></tr></tbody></table><p>あなたは「それはおかしい、私はそのアラートをアサートしようとしたことはない」と考えているかもしれません。
ただし、これはSelenium-IDEの処理であり、アラートを閉じます。
そのステップを削除してテストを再生すると、次のエラーが表示されます <code>[エラー]エラー：予期しないアラートがありました！ [I'm blocking!]</code> 。
アラートの存在を確認するには、アラートのアサーションを含める必要があります。</p><p>アラートが存在することをアサートしたいが、アラートに含まれるテキストがわからないか気にする必要がない場合は、<code>assertAlertPresent</code>を使うことができます。
これはtrueまたはfalseを返し、falseはテストを停止します。</p><h3 id=確認>確認</h3><p>確認はアラートとほぼ同じように動作し、 <code>assertConfirmation</code> と <code>assertConfirmationPresent</code> は対応するアラートと同じ特性を提供します。
ただし、デフォルトでは、確認が表示されたときにSeleniumはOKを選択します。
サンプルページの"確認ダイアログを表示"ボタンをクリックして記録を試みますが、ポップアップの"キャンセル"ボタンをクリックして、出力テキストをアサートします。
テストは次のようになります。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>open</td><td>/</td><td></td></tr><tr><td>click</td><td>btnConfirm</td><td></td></tr><tr><td>chooseCancelOnNextConfirmation</td><td></td><td></td></tr><tr><td>assertConfirmation</td><td>Choose an option.</td><td></td></tr><tr><td>verifyTextPresent</td><td>Rejected</td><td></td></tr></tbody></table><p><code>chooseCancelOnNextConfirmation</code> 関数は、後続のすべての確認がfalseを返すことをSeleniumに伝えます。
chooseOkOnNextConfirmationを呼び出すことでリセットできます。</p><p>Seleniumは未処理の確認があると苦情を言うので、このテストを再生できないことに気付くかもしれません。
これは、Selenium-IDEが記録するイベントの順序により、クリックしてchooseCancelOnNextConfirmationが間違った順序になるためです（考えてみれば、Seleniumは、確認を開く前にキャンセルしていることを知ることができません）。
これら2つのコマンドを切り替えると、テストは正常に実行されます。</p><h3 id=プロンプト>プロンプト</h3><p>プロンプトは、<code>assertPrompt</code> および <code>assertPromptPresent</code> が対応するアラートと同じ特性を提供することで、アラートとほぼ同じように動作します。
デフォルトでは、Seleniumはプロンプトがポップアップしたときにデータの入力を待機します。
サンプルページの &ldquo;Show prompt&rdquo; ボタンをクリックして記録を試み、プロンプトに &ldquo;Selenium&rdquo; と入力します。
テストは次のようになります。</p><table><thead><tr><th>Command</th><th>Target</th><th>Value</th></tr></thead><tbody><tr><td>open</td><td>/</td><td></td></tr><tr><td>answerOnNextPrompt</td><td>Selenium!</td><td></td></tr><tr><td>click</td><td>id=btnPrompt</td><td></td></tr><tr><td>assertPrompt</td><td>What’s the best web QA tool?</td><td></td></tr><tr><td>verifyTextPresent</td><td>Selenium!</td><td></td></tr></tbody></table><p>プロンプトで"キャンセル"を選択すると、 answerOnNextPrompt が単に空白のターゲットを表示することに気付くかもしれません。
Seleniumは、プロンプトのキャンセルと空白のエントリを基本的に同じものとして扱います。</p><h2 id=デバッグ>デバッグ</h2><p>デバッグとはテストケースのエラーを見つけて解決する作業のことです。
デバッグはテストケース開発に含まれる通常の工程です。</p><p>ほとんどの Selenium 初心者もデバッグについてはすでに基礎知識を持っているでしょうから、ここではデバッグそのものについてはふれません。
デバッグをするのがまったく初めてという場合には、社内や組織内の開発者にアドバイスをもらってください。</p><h3 id=ブレークポイントと開始位置>ブレークポイントと開始位置</h3><p>Selenium-IDE では、テストケース内の任意の位置でテストケースの実行を開始または停止するためのブレークポイントの指定と開始位置の指定がサポートされています。
この機能を使うと、テストケースの途中の特定のコマンドでテストケースの実行を停止させ、その時点でのテストケースの動作を調べることができます。
この場合、具体的には、調べようとするコマンドの直前のコマンドにブレークポイントを指定します。</p><p>ブレークポイントを指定するには、コマンドを選択し、右クリックして表示されるコンテキストメニューで <em>ブレークポイントの指定/解除</em> をクリックします。
テストケースを最初からブレークポイントまで実行するには、&ldquo;Run&rdquo; ボタンをクリックします。</p><p>テストケースの途中から最後まで、または最初からブレークポイントまでの部分を実行できると便利なことがあります。
たとえば、最初に Web サイトにログインし、次に一連のテストを実行するテストケースを作成していて、ログイン後の一連のテストのいずれかをデバッグしたい場合などです。
この場合、ログインは 1 度すれば不要になりますが、その後のテストは繰り返し実行する必要があります。
このようなテストケースでは、いったんログインした後、ログイン操作の後に開始位置を指定し、この開始位置からテストケースを実行することができます。
こうすれば、テストケースを再実行するたびに手動で Web サイトからログアウトする必要はなくなります。</p><p>開始位置を指定するには、コマンドを選択し、右クリックして表示されるコンテキストメニューで <em>開始位置の指定/解除</em> をクリックします。テストケースを開始位置から実行するには、&ldquo;Run&rdquo; ボタンをクリックします。</p><h3 id=テストケースのステップ実行>テストケースのステップ実行</h3><p>テストケースのコマンドを 1 つずつ実行 (ステップ実行) するには、次の手順に従います。</p><ol><li><p>ツールバーの &ldquo;Run&rdquo; ボタンをクリックしてテストケースの実行を開始します。</p></li><li><p>すぐに &ldquo;Pause&rdquo; ボタンをクリックして、テストケースの実行を一時停止します。</p></li><li><p>&ldquo;Step&rdquo; ボタンを繰り返しクリックします。</p></li></ol><h3 id=検索ボタン>検索ボタン</h3><p>検索ボタンを使うと、現在 (ブラウザに) 表示されている Web ページ上の UI 要素のうち、現在選択されている Selenium コマンドで使われているのはどの UI 要素かを知ることができます。
この機能は、コマンドの最初のパラメータでロケータを使う場合に便利です (Selenium のコマンドに関する章の <code>要素の特定</code> を参照)。
検索ボタンは、Web ページ上の UI 要素を指定する必要があるあらゆるコマンド、すなわち <em>click</em> 、 <em>clickAndWait</em> 、 <em>type</em> 、および一部の <em>assert</em> と <em>verify</em> コマンドなどで使用できます。</p><p>テーブルタブで、ロケータパラメータを持ついずれかのコマンドを選択します。
検索ボタンをクリックします。
Firebox ブラウザに表示されている Web ページに注目します。
ロケータパラメータで指定されている要素が、明るい緑の四角で囲んで表示されます。</p><h3 id=デバッグ時のページソースの参照>デバッグ時のページソースの参照</h3><p>テストケースをデバッグするときは、しばしばページソース (テスト対象の Web ページの HTML) を参照して問題を解決しなければなりません。
Firefox では、ページソースも簡単に参照できます。
具体的には、目的の Web ページを右クリックし、&ldquo;ページのソースを表示&rdquo; を選択するだけです。
これで、ソースの HTML が別のウィンドウに表示されます。
テスト対象の UI 要素を HTML から見つけるためのキーワードを検索するには、このウィンドウの &ldquo;編集&rdquo; メニューにある &ldquo;検索&rdquo; を使ってください。</p><p>また、ソースを見たい Web ページの一部を選択し、右クリックして表示されるメニューから &ldquo;選択した部分のソースを表示&rdquo; をクリックする方法もあります。
この場合は、ソースの一部だけが別のウィンドウに表示され、選択した部分が強調表示されます。</p><h3 id=ロケータアシスタンス>ロケータアシスタンス</h3><p>Selenium-IDE は、ロケータ型引数を記録するたびに追加情報を保存し、この追加情報を使って、代わりに使用できるほかのロケータ型引数をユーザーに提示できるようにしています。
この機能は、ロケータについて詳しく学ぶ上で非常に有益なだけでなく、記録された型とは異なる型のロケータを使う場合にしばしば必要となります。</p><p>ロケータアシスタンスは、Selenium-IDE ウィンドウ内の &ldquo;対象&rdquo; フィールドの右端にドロップダウンリストとして表示されます (ドロップダウンリストが表示されるのは、&ldquo;対象&rdquo; フィールドに入力されている引数が、記録されたロケータ型引数である場合だけです)。
次に示すのは、あるコマンドのドロップダウンリストの内容です。
ドロップダウンリストの最初の列には、代わりに使用できるロケータが表示され、2 列目にはそれぞれの型が表示されることに注意してください。</p><p><img src=/images/documentation/legacy/selenium_ide_locator_assistance.png alt="Selenium Locator Assistance"></p><h2 id=テストスイートの作成>テストスイートの作成</h2><p>テストスイートとはテストケースの集合のことで、Selenium-IDE ウィンドウの一番左にある &ldquo;テストスイート&rdquo; ペインに表示されます。
&ldquo;テストスイート&rdquo; ペインを手動で開いたり閉じたりするには、&ldquo;テストケース&rdquo; ペインの右端 (ペインが閉じている場合は Selenium-IDE ウィンドウ全体の左端になります) の半分ほど下にある小さな点を選択します。</p><p>&ldquo;テストスイート&rdquo; ペインは、既存のテストスイートが開かれるか、 または ユーザーが &ldquo;ファイル&rdquo; メニューの &ldquo;テストケースを新規作成&rdquo; をクリックすると、自動的に開きます。
後者の場合、新しいテストケースは直前のテストケースのすぐ下に表示されます。</p><p>既存のテストケースをテストスイートに読み込む操作は、Selenium-IDE ではまだサポートされていません。既存のテストケースを追加して、テストスイートを作成または修正するには、ユーザーが手動でテストスイートファイルを編集する必要があります。</p><p>テストスイートファイルは、1 列のテーブルを含む HTML ファイルです。
&lt;tbody> セクション内の各行のセルには、テストケースへのリンクが収められています。
次に示すのは、4 つのテストケースを含むテストスイートの例です。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>head</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>meta</span> <span style=color:#c4a000>http-equiv</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;Content-Type&#34;</span> <span style=color:#c4a000>content</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text/html; charset=UTF-8&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>title</span><span style=color:#000;font-weight:700>&gt;</span>Sample Selenium Test Suite<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>title</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>head</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>table</span> <span style=color:#c4a000>cellpadding</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;1&#34;</span> <span style=color:#c4a000>cellspacing</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;1&#34;</span> <span style=color:#c4a000>border</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;1&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>thead</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;</span>Test Cases for De Anza A-Z Directory Links<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>thead</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tbody</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;./a.html&#34;</span><span style=color:#000;font-weight:700>&gt;</span>A Links<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;./b.html&#34;</span><span style=color:#000;font-weight:700>&gt;</span>B Links<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;./c.html&#34;</span><span style=color:#000;font-weight:700>&gt;</span>C Links<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;./d.html&#34;</span><span style=color:#000;font-weight:700>&gt;</span>D Links<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>tbody</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>table</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><p>注 : テストケースファイルは、呼び出し元のテストスイートファイルと同じ場所に置く必要はありません。
実際、Mac OS と Linux システムではそのとおりです。
ただし、この項目の執筆時点では、Windows システムで使う場合にはバグがあって、テストケースファイルを呼び出し元のテストスイートファイルと別の場所に置くことはできません。</p><h2 id=ユーザー拡張スクリプト>ユーザー拡張スクリプト</h2><p>ユーザー拡張スクリプトは、ユーザー独自のカスタマイズや機能を作成して Selenium の機能を拡張できる JavaScript ファイルです。
多くの場合、コマンドのカスタマイズという形を取りますが、ユーザー拡張スクリプトによる機能拡張はコマンドの追加だけに限定されません。</p><p>重要 : このセクションは期限切れです。近日中に改訂します。</p><p>ユーザーが作成した多くの有益な 拡張スクリプト があります。</p><ul><li>_extensions: <a href=http://wiki.openqa.org/display/SEL/Contributed+User-Extensions>http://wiki.openqa.org/display/SEL/Contributed+User-Extensions</a></li></ul><p>.. _<a href=http://wiki.openqa.org/download/attachments/379/goto_sel_ide.js><code>goto_sel_ide.js extension</code></a>:</p><p>おそらく Selenium-IDE のすべての拡張スクリプトの中で最も人気があるのは、while ループとプリミティブな条件判定によってフロー制御を可能にする goto_sel_ide.js でしょう。
この拡張スクリプトの使用例については、作者が用意した ページ を参照してください。</p><p>この拡張スクリプトをインストールするには、Selenium-IDE の &ldquo;オプション&rdquo; メニューで &ldquo;設定&rdquo; をクリックし、 &ldquo;一般&rdquo; タブの <strong>Selenium Core 拡張スクリプト (user-extension.js) のパス</strong> フィールドに、ファイルのパス名を入力します。</p><p><img src=/images/documentation/legacy/selenium_ide_extensions_install.png alt="Selenium IDE Extensions Install"></p><p><strong>OK</strong> ボタンをクリックしたら、拡張スクリプトを読み込むために、Selenium-IDE をいったん閉じて開く必要があります。
また、拡張スクリプトに変更を加えた場合も、Selenium-IDE をいったん閉じて開く必要があります。</p><p>独自の拡張スクリプトを作成する方法については、Selenium リファレンス ドキュメントの終わりの方に説明があります。</p><p>ステップごとにSelenium IDEとユーザー拡張機能をデバッグすると非常に役立つことがあります。
XUL/Chromeベースの拡張機能をデバッグできると思われる唯一のデバッガーは、バージョン32が含まれるまでFirefoxでサポートされているVenkmanです。
段階的なデバッグは、Firefox 32およびSelenium IDE 2.9.0で動作することが確認されています。</p><h2 id=フォーマット-形式>フォーマット (形式)</h2><p>&ldquo;オプション&rdquo; メニューの &ldquo;設定&rdquo; をクリックすると表示される &ldquo;フォーマット&rdquo; タブでは、テストケースの保存と表示に使う言語を選択できます。
デフォルトは &ldquo;HTML&rdquo; です。</p><p>作成したテストケースを Selenium-RC を使って実行する場合には、作成されたテストケースをプログラミング言語に変換するためにこの機能が使われます。
テストプログラムの開発用に Selenium-RC で使う言語 (&ldquo;Java&rdquo;、&ldquo;PHP&rdquo; など) を選択し、次に &ldquo;ファイル&rdquo; メニューの &ldquo;保存&rdquo; を使ってテストケースを保存します。
これで、テストケースは、選択した言語の一連の関数に変換されます。
テストをサポートするプログラムコードは、基本的に、ユーザーに代わって Selenium-IDE によって生成されます。</p><p>生成されたコードが自分のニーズに合わないときは、生成プロセスが定義された設定ファイルを編集することで、生成されるコードを変更できることに注意してください。サポートされている言語ごとに設定があり、これらの設定を編集できます。設定は、&ldquo;オプション&rdquo; メニューの &ldquo;設定&rdquo; をクリックすると表示される &ldquo;フォーマット&rdquo; タブにあります。</p><h2 id=異なるブラウザでの-selenium-ide-テストの実行>異なるブラウザでの Selenium-IDE テストの実行</h2><p>Selenium-IDE 自体は Firefox を対象にしたテストしか実行できませんが、Selenium-IDE で作成したテストは、Selenium-RC サーバーを呼び出すシンプルなコマンドラインインタフェースを使うことで、ほかのブラウザを対象に実行することができます。
詳細については、Selenium-RC に関する章の <code>Selenese テストの実行</code> を参照してください。
特に関連性が高いのは、 -htmlSuite コマンドラインオプションです。</p><h2 id=トラブルシューティング>トラブルシューティング</h2><p>以下は、Selenium-IDE で発生することが多いさまざまな問題について、実際の画面を示しながら説明したものです。</p><p>Table view is not available with this format.</p><p>このメッセージは、Selenium IDEの起動時に"テーブル"タブに表示されることがあります。
回避策は、Selenium IDEを閉じて再度開くことです。
詳細については、 <a href="http://code.google.com/p/selenium/issues/detail?id=1008">issue 1008</a> を参照してください。
これを確実に再現できる場合は、修正に取り組むことができるように詳細を提供してください。</p><hr><p><em>error loading test case: no command found</em></p><p>「ファイル」メニューの「開く」を使用して、テストスイートファイルを開こうとしました。
代わりに「ファイル」メニューの「テストスイートを開く」を使用してください。</p><p>このエラーメッセージを改善するために、機能の拡張がリクエストされました。
詳細は、<a href="http://code.google.com/p/selenium/issues/detail?id=1010">issue 1010</a>を参照してください。</p><hr><p><img src=/images/documentation/legacy/selenium_ide_trouble_timing.png alt="Selenium IDE Trouble Timing"></p><p>このタイプの <strong>エラー</strong> は、タイミングの問題を示している可能性があります。
つまり、コマンドのロケーターによって指定された要素が、コマンドの実行時に完全にロードされていません。
コマンドの前に <strong>pause 5000</strong> を入れて、問題が本当にタイミングに関連しているかどうかを判断してください。
その場合、失敗したコマンドの前に適切な <strong>waitFor*</strong> または <strong>*AndWait</strong> コマンドを使って調査してください。</p><hr><p><img src=/images/documentation/legacy/selenium_ide_trouble_param.png alt="Selenium IDE Trouble Param"></p><p>上記の <strong>open</strong> コマンドの場合のように変数置換を使用しようとして失敗した場合は、アクセスしようとしている値を持つ変数を実際に作成していないことを示します。
これは、変数を <strong>Target</strong> フィールドに配置する必要がある場合に <strong>Value</strong> フィールドに配置するか、その逆の場合があります。
上記の例では、storeコマンドの2つのパラメーターが、必要なものと逆の順序で誤って配置されています。
Seleneseコマンドの場合、最初の必須パラメーターは <strong>Target</strong> フィールドに入力し、2番目の必須パラメーター（存在する場合）は <strong>Value</strong> フィールドに入力する必要があります。</p><hr><p><em>error loading test case: [Exception&mldr; &ldquo;Component returned failure code:
0x80520012 (NS_ERROR_FILE_NOT_FOUND) [nsIFileInputStream.init]&rdquo; nresult:
&ldquo;0x80520012 (NS_ERROR_FILE_NOT_FOUND)&rdquo; location: &ldquo;JS frame ::
chrome://selenium-ide/content/file-utils.js :: anonymous :: line 48&rdquo; data: no]</em></p><p>テストスイートのテストケースの1つが見つかりません。
テストケースが配置されていることを示すテストスイートが実際に配置されていることを確認してください。
また、実際のテストケースファイルのファイル名と参照先のテストスイートファイルの両方に.html拡張子が付いていることを確認してください。</p><p>このエラーメッセージを改善するために、機能の拡張がリクエストされました。
詳細は、<a href="http://code.google.com/p/selenium/issues/detail?id=1011">issue 1011</a>を参照してください。</p><hr><p><img src=/images/documentation/legacy/selenium_ide_trouble_extension.png alt="Selenium IDE Trouble Extension"></p><p>拡張ファイルの内容が、Selenium-IDEによって読み取られていません。
Selenium-IDE の <em>“オプション” メニューで “設定” をクリックし、 “一般” タブ</em> の <strong>Selenium Core 拡張スクリプト (user-extension.js) のパス</strong> フィールドに適切なパス名を指定していることを確認してください。
また、 <strong>Selenium Core 拡張スクリプト (user-extension.js) のパス</strong> フィールドの内容を変更した後は、Selenium-IDEを再起動する必要があります。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-83d0a8171b15b9b98fe401350fa5a31d>4.1 - HTMLランナー</h1><div class=lead>Execute HTML Selenium IDE exports from command line</div><p><em>Selenium HTMLランナー</em> を使用すると、コマンドラインからテストスイートを実行できます。
テストスイートは、Selenium IDEまたは互換性ツールからのHTMLエクスポートです。</p><h2 id=共通情報>共通情報</h2><ul><li>geckodriver / firefox / selenium-html-runnerのリリースの組み合わせが重要です。
どこかにソフトウェア互換性マトリックスがあるかもしれません。</li><li>selenium-html-runnerはテストスイートのみを実行します（テストケースではなく、Monitis Transaction Monitorからのエクスポートなど）。
必ずこれを順守してください。</li><li>DISPLAYのないLinuxユーザーの場合-仮想ディスプレイでhtml-runnerを起動する必要があります（xvfbを検索）。</li></ul><h2 id=linux環境の例>Linux環境の例</h2><p>次のソフトウェアパッケージをインストール/ダウンロードします。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>user@localhost ~<span style=color:#ce5c00;font-weight:700>]</span>$ cat /etc/redhat-release
</span></span><span style=display:flex><span>CentOS Linux release 7.4.1708 <span style=color:#ce5c00;font-weight:700>(</span>Core<span style=color:#ce5c00;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>user@localhost ~<span style=color:#ce5c00;font-weight:700>]</span>$ rpm -qa <span style=color:#000;font-weight:700>|</span> egrep -i <span style=color:#4e9a06>&#34;xvfb|java-1.8|firefox&#34;</span>
</span></span><span style=display:flex><span>xorg-x11-server-Xvfb-1.19.3-11.el7.x86_64
</span></span><span style=display:flex><span>firefox-52.4.0-1.el7.centos.x86_64
</span></span><span style=display:flex><span>java-1.8.0-openjdk-1.8.0.151-1.b12.el7_4.x86_64
</span></span><span style=display:flex><span>java-1.8.0-openjdk-headless-1.8.0.151-1.b12.el7_4.x86_64
</span></span></code></pre></div><p>テストスイートの例</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>[user@localhost ~]$ cat testsuite.html
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>&lt;!DOCTYPE html PUBLIC &#34;-//W3C//DTD XHTML 1.0 Strict//EN&#34; &#34;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&#34;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>html</span> <span style=color:#c4a000>xmlns</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;http://www.w3.org/1999/xhtml&#34;</span> <span style=color:#c4a000>xml:lang</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;en&#34;</span> <span style=color:#c4a000>lang</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;en&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>head</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>meta</span> <span style=color:#c4a000>content</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;text/html; charset=UTF-8&#34;</span> <span style=color:#c4a000>http-equiv</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;content-type&#34;</span> <span style=color:#000;font-weight:700>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>title</span><span style=color:#000;font-weight:700>&gt;</span>Test Suite<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>title</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>head</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>table</span> <span style=color:#c4a000>id</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;suiteTable&#34;</span> <span style=color:#c4a000>cellpadding</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;1&#34;</span> <span style=color:#c4a000>cellspacing</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;1&#34;</span> <span style=color:#c4a000>border</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;1&#34;</span> <span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;selenium&#34;</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>tbody</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>b</span><span style=color:#000;font-weight:700>&gt;</span>Test Suite<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>b</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;</span><span style=color:#204a87;font-weight:700>a</span> <span style=color:#c4a000>href</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;YOUR-TEST-SCENARIO.html&#34;</span><span style=color:#000;font-weight:700>&gt;</span>YOUR-TEST-SCENARIO<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>a</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>td</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>tr</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>tbody</span><span style=color:#000;font-weight:700>&gt;&lt;/</span><span style=color:#204a87;font-weight:700>table</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>body</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>html</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><h2 id=selenium-html-runnerをヘッドレスで実行する方法>selenium-html-runnerをヘッドレスで実行する方法</h2><p>さて、最も重要な部分、selenium-html-runnerの実行方法の例！
経験によってソフトウェアの組み合わせ、- geckodriver / FF / html-runnerリリースによって異なる場合があります。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>xvfb-run java -Dwebdriver.gecko.driver<span style=color:#ce5c00;font-weight:700>=</span>/home/mmasek/geckodriver.0.18.0 -jar selenium-html-runner-3.7.1.jar -htmlSuite <span style=color:#4e9a06>&#34;firefox&#34;</span> <span style=color:#4e9a06>&#34;https://YOUR-BASE-URL&#34;</span> <span style=color:#4e9a06>&#34;</span><span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>/testsuite.html&#34;</span> <span style=color:#4e9a06>&#34;results.html&#34;</span> <span style=color:#000;font-weight:700>;</span> grep result: -A1 results.html/firefox.results.html
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>[</span>user@localhost ~<span style=color:#ce5c00;font-weight:700>]</span>$ xvfb-run java -Dwebdriver.gecko.driver<span style=color:#ce5c00;font-weight:700>=</span>/home/mmasek/geckodriver.0.18.0 -jar selenium-html-runner-3.7.1.jar -htmlSuite <span style=color:#4e9a06>&#34;*firefox&#34;</span> <span style=color:#4e9a06>&#34;https://YOUR-BASE-URL&#34;</span> <span style=color:#4e9a06>&#34;</span><span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>pwd</span><span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>/testsuite.html&#34;</span> <span style=color:#4e9a06>&#34;results.html&#34;</span> <span style=color:#000;font-weight:700>;</span> grep result: -A1 results.html/firefox.results.html
</span></span><span style=display:flex><span>Multi-window mode is longer used as an option and will be ignored.
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>1510061109691</span>   geckodriver     INFO    geckodriver 0.18.0
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>1510061109708</span>   geckodriver     INFO    Listening on 127.0.0.1:2885
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>1510061110162</span>   geckodriver::marionette INFO    Starting browser /usr/bin/firefox with args <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#4e9a06>&#34;-marionette&#34;</span><span style=color:#ce5c00;font-weight:700>]</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>1510061111084</span>   Marionette      INFO    Listening on port <span style=color:#0000cf;font-weight:700>43229</span>
</span></span><span style=display:flex><span><span style=color:#0000cf;font-weight:700>1510061111187</span>   Marionette      WARN    TLS certificate errors will be ignored <span style=color:#204a87;font-weight:700>for</span> this session
</span></span><span style=display:flex><span>Nov 07, <span style=color:#0000cf;font-weight:700>2017</span> 1:25:12 PM org.openqa.selenium.remote.ProtocolHandshake createSession
</span></span><span style=display:flex><span>INFO: Detected dialect: W3C
</span></span><span style=display:flex><span>2017-11-07 13:25:12.714:INFO::main: Logging initialized @3915ms to org.seleniumhq.jetty9.util.log.StdErrLog
</span></span><span style=display:flex><span>2017-11-07 13:25:12.804:INFO:osjs.Server:main: jetty-9.4.z-SNAPSHOT
</span></span><span style=display:flex><span>2017-11-07 13:25:12.822:INFO:osjsh.ContextHandler:main: Started o.s.j.s.h.ContextHandler@87a85e1<span style=color:#ce5c00;font-weight:700>{</span>/tests,null,AVAILABLE<span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>2017-11-07 13:25:12.843:INFO:osjs.AbstractConnector:main: Started ServerConnector@52102734<span style=color:#ce5c00;font-weight:700>{</span>HTTP/1.1,<span style=color:#ce5c00;font-weight:700>[</span>http/1.1<span style=color:#ce5c00;font-weight:700>]}{</span>0.0.0.0:31892<span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span>2017-11-07 13:25:12.843:INFO:osjs.Server:main: Started @4045ms
</span></span><span style=display:flex><span>Nov 07, <span style=color:#0000cf;font-weight:700>2017</span> 1:25:13 PM org.openqa.selenium.server.htmlrunner.CoreTestCase run
</span></span><span style=display:flex><span>INFO: <span style=color:#000;font-weight:700>|</span>open <span style=color:#000;font-weight:700>|</span> /auth_mellon.php <span style=color:#000;font-weight:700>|</span>  <span style=color:#000;font-weight:700>|</span>
</span></span><span style=display:flex><span>Nov 07, <span style=color:#0000cf;font-weight:700>2017</span> 1:25:14 PM org.openqa.selenium.server.htmlrunner.CoreTestCase run
</span></span><span style=display:flex><span>INFO: <span style=color:#000;font-weight:700>|</span>waitForPageToLoad <span style=color:#000;font-weight:700>|</span> <span style=color:#0000cf;font-weight:700>3000</span> <span style=color:#000;font-weight:700>|</span>  <span style=color:#000;font-weight:700>|</span>
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>.etc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;td&gt;result:&lt;/td&gt;
</span></span><span style=display:flex><span>&lt;td&gt;PASS&lt;/td&gt;
</span></span></code></pre></div></div></main></div></div><div class="row justify-content-center p-5"><h2 class="selenium text-center">Selenium Level Sponsors</h2></div><div class="row justify-content-around pt-4 pb-5 px-5"><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href="http://www.browserstack.com/automate/?utm_campaign=open-source-sponsor&utm_source=seleniumorg&utm_medium=referral" class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/browserstack.png alt=BrowserStack></a></div><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href=http://saucelabs.com class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/saucelabs.png alt="Sauce Labs"></a></div><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href=http://bit.ly/36uZ7ad class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/Digital.ai.jpg alt=Digital.ai></a></div><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href=https://applitools.com/ class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/applitools.png alt=Applitools></a></div><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href=https://www.perfecto.io/ class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/perfecto-perforce.jpg alt=Perfecto></a></div><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href="https://www.lambdatest.com/selenium-automation?utm_source=selenium&utm_medium=open-source-sponsor&utm_campaign=nov_14&utm_term=sk&utm_content=web" class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/lambda-test.png alt=LambdaTest></a></div><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href="https://www.subject-7.com/unified-testing/?utm_source=selenium&utm_medium=unifiedtesting&utm_campaign=product" class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/subject7_logo.png alt=Subject7></a></div><div class="col-lg-3 col-md-6 mb-4 mb-lg-0 align-self-center px-5 py-3"><a href="https://www.avoautomation.ai/why-avo//?utm_source=SeleniumHQ&utm_medium=listing&utm_campaign=SeleniumHQ" class=border-0><img class="w-100 shadow-1-strong rounded selenium-backer-logo" src=/images/sponsors/Avo_logo.png alt="Avo Automation"></a></div></div><div class="row justify-content-center pt-2 pb-3 -bg-selenium-cyan"><div class="card text-center border-0 bg-transparent py-5"><div class=card-body><h2 class=card-title>Support the Selenium Project</h2><p class=card-text>Want to support the Selenium project? Learn more or view the full list of sponsors.</p><div class=selenium-button-container><a href=/sponsors class="selenium-button selenium-white-cyan text-uppercase fw-bold">Learn more
<i class="ps-3 fas fa-caret-right"></i></a></div></div></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/group/selenium-users aria-label="User mailing list"><i class="fas fa-mail-bulk"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Selenium in Twitter" aria-label="Selenium in Twitter"><a class=text-white target=_blank rel=noopener href=https://twitter.com/SeleniumHQ aria-label="Selenium in Twitter"><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="SeleniumConf YouTube Channel" aria-label="SeleniumConf YouTube Channel"><a class=text-white target=_blank rel=noopener href=https://www.youtube.com/channel/UCbDlgX_613xNMrDqCe3QNEw aria-label="SeleniumConf YouTube Channel"><i class="fab fa-youtube"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Selenium in Facebook" aria-label="Selenium in Facebook"><a class=text-white target=_blank rel=noopener href=https://www.facebook.com/Selenium2.WebDriver aria-label="Selenium in Facebook"><i class="fab fa-facebook"></i></a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Software Freedom Conservancy" aria-label="Software Freedom Conservancy"><a class=text-white target=_blank rel=noopener href=mailto:selenium@sfconservancy.org aria-label="Software Freedom Conservancy"><i class="fas fa-envelope-square"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/seleniumhq/selenium aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://join.slack.com/t/seleniumhq/shared_invite/zt-2eb74x010-b2NmeZUnS0o~Ut76prMFAQ aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=IRC aria-label=IRC><a class=text-white target=_blank rel=noopener href=https://kiwiirc.com/nextclient/irc.libera.chat/#selenium aria-label=IRC><i class="fas fa-comments"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/selenium-developers aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><a href=https://www.netlify.com><img style=margin-right:50px src=https://www.netlify.com/v3/img/components/netlify-light.svg alt="Deploys by Netlify"></a></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2024 Software Freedom Conservancy All Rights Reserved</small><p class=mt-2><a href=/ja/documentation/about/>このドキュメントについて</a></p></div></div></div></footer></div><script src=/js/main.min.bfefba6b7ccbf88710915ea7a0df9461124cad8959623d18119929418a2da080.js integrity="sha256-v++6a3zL+IcQkV6noN+UYRJMrYlZYj0YEZkpQYotoIA=" crossorigin=anonymous></script>
<script src=/js/prism.js></script>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.5.2 integrity="sha512-LzxWPDNELae1RSIsDRSitKYPJpRtjYo22GbOl+d+xLcjKiZQRRdxSTI3cRRHw7O05e0MbIIu33QnU2rt6ymQ6A==" crossorigin=anonymous></script>
<script type=text/javascript>const containers=["#docsearch-0","#docsearch-1"];for(let e of containers)docsearch({container:e,appId:"6IOXA5JK7Z",apiKey:"2b44a1d3530f9951dd6502059058984a",indexName:"selenium"})</script><script src=/js/tabpane-persist.js></script></body></html>